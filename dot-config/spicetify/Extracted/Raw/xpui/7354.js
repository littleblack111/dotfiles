"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7354],{45664:(e,t,i)=>{i.d(t,{M:()=>C,f:()=>N});var n=i(30758),r=i(97500),a=i.n(r),s=i(93523),l=i(1820),o=i(46607),c=i(31417),d=i(50324),u=i(622),p=i(35035);var m=i(99701),y=i(50342),h=i(94141),b=i(6038),f=i(48014),g=i(13787),x=i(69285);const w="x-downloadButton-DownloadButton",R="x-downloadButton-button",k="x-downloadButton-cancelDownload",A="x-downloadButton-progress";var T=i(86070);let C=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const I=e=>{const{currentTarget:t,detail:i}=e;i>0&&t&&t.blur()},N=({uri:e,isFollowing:t,onFollow:i,size:r=C.sm,className:N,onClick:v=(()=>{}),showUpsell:S=!0,canDownload:O=!0,condensedAll:_,condensed:P})=>{const[E,j]=(0,n.useState)(!1),{capability:$,availability:L,addDownload:D}=(0,g.$)(e,O),M=(0,f.V)(),U=(0,x.e)(e);((e,t)=>{const i=(0,d.i)(),r=(0,n.useRef)(!1);(0,n.useEffect)((()=>{e===p.kw.DOWNLOADING&&!1===r.current&&(r.current=!0,i.say(c.Ru.get("download.downloading",t.totalItems)))}),[i,e,t]);const a=(0,u.Z)(e);(0,n.useEffect)((()=>{a===p.kw.DOWNLOADING&&e===p.kw.YES&&(r.current=!1,i.say(c.Ru.get("download.complete")))}),[i,a,e])})(L,U);const B=(0,n.useCallback)((e=>{e.preventDefault(),$===p.vs.NO_PERMISSION?v(e,p.NV.NO_PERMISSION):(!1===t?(i(),j(!0)):D(),v(e,p.NV.ADD)),I(e)}),[D,$,t,v,i]),K=(0,n.useCallback)((t=>{t.preventDefault(),M(e),I(t),v(t,p.NV.REMOVE)}),[e,M,v]);if((0,n.useEffect)((()=>{!0===E&&!0===t&&(D(),j(!1))}),[t,E,D]),L===p.kw.YES)return(0,T.jsx)(m.Zp,{label:c.Ru.get("download.remove"),children:(0,T.jsx)(s.H,{className:N,onClick:K,iconOnly:l.F,semanticColor:"textBrightAccent",size:r,"aria-label":c.Ru.get("download.remove"),"aria-checked":!0,condensedAll:_,condensed:P})});if($===p.vs.NO_CAPABILITY||$===p.vs.NO_PERMISSION_HIDE)return null;if($===p.vs.NO_PERMISSION)return S?(0,T.jsx)("div",{className:a()(w,N),children:(0,T.jsx)(b.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,T.jsx)(h.z,{children:(0,T.jsx)("span",{children:c.Ru.get("download.upsell")})}),renderInline:!1,children:(0,T.jsx)("div",{children:(0,T.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,T.jsx)(s.H,{onClick:B,iconOnly:o.i,size:r,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:_,condensed:P})})})})}):null;if(L===p.kw.NO)return(0,T.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,T.jsx)(s.H,{className:N,onClick:B,iconOnly:o.i,size:r,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:_,condensed:P})});let z;switch(r){case C.xs:z=16;break;case C.sm:z=24;break;default:z=32}return(0,T.jsxs)("div",{className:a()(k,N),role:"switch","aria-checked":!0,children:[(0,T.jsx)(m.Zp,{label:c.Ru.get("download.cancel"),children:(0,T.jsx)("button",{style:{height:z,width:z},className:a()(R,N),onClick:K,"aria-label":c.Ru.get("download.cancel")})}),(0,T.jsx)("span",{className:a()(A),children:(0,T.jsx)(y.C,{"aria-valuetext":c.Ru.get("progress.downloading-tracks"),percentage:U.percentage,size:z})})]})}},2296:(e,t,i)=>{i.d(t,{F:()=>P});var n=i(30758),r=i(14343),a=i(31417),s=i(37115),l=i(76633),o=i(3175),c=i(97500),d=i.n(c),u=i(81162),p=i(422),m=i(14178),y=i(86070);const h=({children:e})=>(0,y.jsx)(p.E,{dir:"auto",className:d()(m.A.rowTitle,m.A.discTitle,"standalone-ellipsis-one-line"),as:"div",variant:"bodyMediumBold",children:e});var b=i(27305),f=i(67799),g=i(60651),x=i(13679);const w=({discNumber:e})=>(0,y.jsxs)("div",{className:d()(m.A.trackListRowGrid,m.A.discRow),children:[(0,y.jsx)(g.y,{ariaColIndex:0,children:(0,y.jsx)("div",{className:m.A.rowMarker,children:(0,y.jsx)(f.a,{children:(0,y.jsx)(u.I,{size:"small"})})})}),(0,y.jsx)(x.U,{ariaColIndex:1,children:(0,y.jsx)(b.l,{children:(0,y.jsx)(h,{children:a.Ru.get("tracklist.disc-sperator.title",e)})})})]});var R=i(96614),k=i(88308),A=i(18316),T=i(55845),C=i(6107),I=i(81834);const N=(e,t)=>{const{request:i}=(0,n.useContext)(I.j),r=(0,k.lB)((()=>t),[t]),a=(0,n.useMemo)((()=>function(e){return(0,C.YD)(e)?e.items.reduce(((e,t)=>(e.push(t.discNumber-1),e.concat(Array(t.nrTracks??0).fill(t.discNumber)))),[]):null}(r)),[r]);return(0,n.useCallback)((async(t,n)=>{const s=await i(A.xt,{uri:e,offset:null!==a?t-a[t]:t,limit:n});return(0,T.T)(s?.data,r)}),[r,a,i,e])};var v=i(91182),S=i(38501),O=i(44672),_=i(7307);const P=n.memo((function({albumName:e,nrTracks:t,discs:i,albumUri:c,highlightUri:d,scrollToIndex:u,usePlayContextItem:p,hasHeaderRow:m=!0,initalTracks:h,isCompactMode:b=!1}){const f=(0,r.NC)(S.LX5),g=N(c,i),x=(0,n.useRef)(null),k=(0,n.useRef)(!1),[A,T]=(0,n.useState)(null);(0,n.useEffect)((()=>{x.current&&(A?x.current.scrollToIndex(A):u&&x.current.scrollToIndex(u))}),[A,u]);const C=(0,n.useCallback)((async(e,t)=>{const i=await g(e,t);if(d&&!A){const e=i.items?.findIndex((e=>e.type===_.c.TRACK&&e?.uri===d));T(e||-1)}return i}),[g,d,A]),I=(0,l.w)(),P=(0,n.useCallback)((e=>({uri:e.type===_.c.TRACK?e.linkedUri??e.uri:""})),[]),E=(0,n.useCallback)(((t,i)=>{if("AlbumDisc"===t.type)return(0,y.jsx)(w,{discNumber:t.discNumber},`${i}-${t.discNumber}`);const n=t.linkedUri??t.uri,r=t.playcount?parseInt(t.playcount,10):0,s=!(k.current||!d||d!==t.uri&&d!==n);s&&(k.current=!0);const l=t.hasAssociatedVideo;return(0,y.jsxs)("div",{children:[d===t.uri&&(0,y.jsx)(v.c,{artistOrShow:t.artists.map((e=>e.name)).join(a.Ru.getSeparator()),title:t.name,uri:n,entityType:v.p.TRACK}),(0,y.jsx)(o.d,{index:i,trackNumber:t.trackNumber,contextUri:c,uri:n,uid:t.uid,albumName:e,duration_ms:t.duration.milliseconds,name:t.name,isPlayable:t.isPlayable,artists:t.artists,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,playcount:r,shouldHighLight:s,usePlayContextItem:p,isCompactMode:b,hasAssociatedVideo:l&&f})]},i+t.uri)}),[d,e,c,p,b,f]);return(0,y.jsx)(O.pZ,{value:"album-tracklist",children:(0,y.jsx)(R.S4,{ariaLabel:e,hasHeaderRow:m,rowPlaceholder:s.Bz,columns:I,renderRow:E,resolveItem:P,nrTracks:t,fetchTracks:C,limit:300,outerRef:x,tracks:h,isCompactMode:b,columnPersistenceKey:"album-tracklist"},c)})}))},91182:(e,t,i)=>{i.d(t,{c:()=>x,p:()=>b});var n=i(30758),r=i(93240),a=i(97714),s=i(88394),l=i(31417),o=i(26344),c=i(86568),d=i(20817),u=i(20784),p=i(81752),m=i(50671),y=i(21549),h=i(86070);let b=function(e){return e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.EPISODE="episode",e.PLAYLIST="playlist",e.PODCAST="podcast",e.TRACK="track",e}({});const f=e=>e===b.TRACK?l.Ru.get("web-player.deeplink-intent.add-to-library.liked-songs-title"):e===b.EPISODE?l.Ru.get("web-player.deeplink-intent.add-to-library.episodes-title"):l.Ru.get("web-player.deeplink-intent.add-to-library.title"),g=({entityType:e,artistOrShow:t,title:i})=>e===b.ARTIST||e===b.PODCAST?l.Ru.get("web-player.deeplink-intent.add-to-library.artist-description",{name:t??""}):l.Ru.get("web-player.deeplink-intent.add-to-library.description",{title:i??"",name:t??""}),x=e=>{const{intent:t,clear:i}=(0,c.AT)();return t!==c.pg.ADD_TO_LIBRARY?null:(0,h.jsx)(w,{...e,clearDeeplinkIntent:i})};function w({uri:e,entityType:t,artistOrShow:i,title:c,clearDeeplinkIntent:x}){const w=(0,u.f)(),R=(0,p._)(),{enqueueSnackbar:k}=(0,r.dh)(),[A,T]=(0,n.useState)(null),{spec:C,logger:I}=(0,y.r)(a.K0,{data:{uri:e,identifier:t}}),{spec:N,logger:v}=(0,y.r)(s.y4,{data:{uri:e,identifier:t}}),S=(0,m.t)(C);(0,n.useEffect)((()=>{t===b.PLAYLIST?R?.contains([e]).then((e=>T(e[0]))):w.contains(e).then((e=>T(e[0])))}),[t,w,R,e]),(0,n.useEffect)((()=>{A&&(k(l.Ru.get("web-player.deeplink-intent.add-to-library.already-in-library")),v.logImpression(N.impression()),x())}),[x,k,A,v,N]);const O=(0,n.useCallback)((()=>{I.logInteraction(C.closeButtonFactory().hitUiHide()),x()}),[x,I,C]),_=(0,n.useCallback)((()=>{t===b.PLAYLIST?R?.add([e],{before:"start"}):w.add({uris:[e]}),t===b.EPISODE||t===b.TRACK?I.logInteraction(C.addButtonFactory().hitAddToPlaylist({playlist:t===b.TRACK?d.BP:d.Xn,itemToBeAdded:e})):I.logInteraction(C.addButtonFactory().hitFollow({itemToBeFollowed:e})),x()}),[x,t,w,I,R,C,e]);return null===A?null:(0,h.jsx)(o.T,{ref:S,titleText:f(t),descriptionText:g({entityType:t,artistOrShow:i,title:c}),confirmText:l.Ru.get("playlist.extender.button.add"),cancelText:l.Ru.get("block-user.dialog.cancel"),onConfirm:_,onClose:O,"aria-label":f(t)})}},66339:(e,t,i)=>{i.d(t,{r:()=>p});var n=i(14343),r=i(50486),a=i(3773),s=i(46131),l=i(99958),o=i(81834),c=i(27963),d=i(43329),u=i(30758);function p(e){const t=(0,n.NC)(d.HO),{request:i}=(0,u.useContext)(o.j);return(0,r.I)({enabled:t,queryKey:["useDynamicColors",e],gcTime:864e5,staleTime:432e5,queryFn:async()=>{const t=await(0,c.c)(i,s.XN,{uri:e}),n=t?.data,r=n?.lookup.at(0);if(!r)throw new a.t("Empty response");if("AlbumResponseWrapper"===r?.__typename||"ArtistResponseWrapper"===r?.__typename||"PodcastOrAudiobookResponseWrapper"===r?.__typename||"EpisodeOrChapterResponseWrapper"===r?.__typename||"TrackResponseWrapper"===r?.__typename){const e=r.data;if("Album"===e.__typename||"Podcast"===e.__typename||"Audiobook"===e.__typename||"Episode"===e.__typename||"Track"===e.__typename)return(0,l.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet);if("Artist"===e.__typename)return(0,l.V)(e.visualIdentity?.wideFullBleedImage?.extractedColorSet)}throw new a.t(`Invalid response: ${t}`)},select:e=>t?e:null})}},50324:(e,t,i)=>{i.d(t,{i:()=>a});var n=i(30758);class r{constructor(e={}){this.settings={level:e.level||"polite",parent:e.parent||document.body,idPrefix:e.idPrefix||"live-region-",delay:e.delay||0},this.currentRegion=document.createElement("span")}say(e,t=this.settings.delay){this.clearNode(),this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());const i="assertive"!==this.settings.level?"status":"alert";this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",i),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout((()=>{this.currentRegion.textContent=e}),t)}clearNode(){const e=this.settings.parent.querySelector(`[id^="${this.settings.idPrefix}"]`);e&&this.settings.parent.removeChild(e)}}const a=({delay:e,idPrefix:t,level:i,parent:a}={})=>{const s=(0,n.useMemo)((()=>new r({delay:e,idPrefix:t,level:i,parent:a})),[e,t,i,a]);return(0,n.useEffect)((()=>()=>{s.clearNode()}),[s]),s}},87498:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(30758),r=i(4266),a=i(61147),s=i(18753),l=i(72762);const o=[r.$.INDEX,r.$.TITLE_AND_ARTIST,r.$.PLAYS,r.$.DURATION],c=()=>{const{isCompactMode:e}=(0,a.a)(),t=(0,l.My)()===s.m.Web;return(0,n.useMemo)((()=>(({isWebPlayer:e,isCompactMode:t})=>{const i=[...o];return e&&i.splice(i.indexOf(r.$.PLAYS),1),t&&i.splice(i.indexOf(r.$.TITLE_AND_ARTIST),1,r.$.TITLE,r.$.ARTIST),i})({isWebPlayer:t,isCompactMode:e})),[e,t])}},79570:(e,t,i)=>{i.d(t,{J:()=>d});var n=i(62411),r=i(14343),a=i(22726),s=i(39566),l=i(38501),o=i(36061),c=i(24533);const d=e=>{const[t]=(0,c.A)(e),i=(0,s.n)(),d=(0,n.d4)(o.F6),u=(0,r.NC)(l.U4t),p=!i&&t,m=(0,a.o_h)(e);return m?.type===a.NQG.ALBUM?{playUri:p&&!u?(0,a.Uu7)(d,(0,a.o_h)(e)?.id).toURI():e,playOptions:p?{useListPlatformPlay:u}:{}}:{playUri:e,playOptions:{}}}},622:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(30758);function r(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},43855:(e,t,i)=>{i.d(t,{P:()=>n.P});var n=i(62361)},56970:(e,t,i)=>{i.d(t,{L$:()=>o,Q2:()=>c,hV:()=>l,j2:()=>s,pr:()=>u,qc:()=>a,rO:()=>d});var n=i(16157),r=i(13155);const a=({albumArtists:e,albumName:t,albumType:i,shouldLocalize:a,i18n:s})=>{if(!i||!t||!e)return"";const l=i!==n._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(i):i,o=(0,r.C)(i),c=`${t} - ${l} by ${e} | Spotify`,d=s.get("i18n.meta.album.title",t,o,e);return a?d:c},s=({artistName:e})=>e?`${e} | Spotify`:"",l=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",o=({episodeOrChapterName:e,showOrAudiobookName:t,type:i})=>e&&t?`${e} - ${t} | ${i} on Spotify`:"",c=({playlistName:e,userName:t,isSpotifyOwned:i=!1})=>{if(!e||!t)return"";return`${e}${i?"":` - playlist by ${t}`} | ${i?"Spotify Playlist":"Spotify"}`},d=({i18n:e,trackArtistsList:t,trackName:i,shouldLocalize:n,disabled:r=!1})=>{if(!t||!i)return"";let a=`${i} - song and lyrics by ${t} | Spotify`,s=e.get("i18n.meta.track-lyrics.title",i,t);return r&&(a=`${i} - song by ${t} | Spotify`,s=e.get("i18n.meta.track.title",i,t)),n?s:a},u=({i18n:e,shouldLocalize:t})=>{const i=e.get("i18n.meta.home.title");return t?i:"Spotify - Web Player: Music for everyone"}}}]);
//# sourceMappingURL=7354.js.map