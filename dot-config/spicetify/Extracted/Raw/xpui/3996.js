"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3996],{6904:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(30758),s=n(97500),i=n.n(s),r=n(22726),o=n(75411),l=n(86070);const c="div";class d extends a.Component{constructor(e){super(e),this.state={isDropTargetActive:!1},this.enterEventCount=0,this.leaveEventCount=0}componentDidMount(){document.body.addEventListener("dragend",this.handleDragEnd)}shouldComponentUpdate(e,t){return t.isDropTargetActive!==this.state.isDropTargetActive||e.children!==this.props.children||e.onDragEnter!==this.props.onDragEnter||e.onDragLeave!==this.props.onDragLeave||e.onDrop!==this.props.onDrop||e.types.length!==this.props.types.length||e.types.some(((e,t)=>e!==this.props.types[t]))}componentWillUnmount(){document.body.removeEventListener("dragend",this.handleDragEnd)}handleDragOver=e=>{this.getMatchingMimeTypes(e).length>0&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")};handleDragEnter=e=>{this.enterEventCount&&!e.relatedTarget||(this.enterEventCount++,1===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.props.onDragEnter?.(e),this.setState({isDropTargetActive:!0})))};handleDragLeave=e=>{this.leaveEventCount++,this.leaveEventCount===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.enterEventCount=0,this.leaveEventCount=0,this.props.onDragLeave?.(e),this.setState({isDropTargetActive:!1}))};handleDragEnd=()=>{this.enterEventCount=0,this.leaveEventCount=0};handleDrop=e=>{if(0===this.getMatchingMimeTypes(e).length)return;const{onDragLeave:t,onDrop:n}=this.props,a=this.getMatchingDropData(e);this.enterEventCount=0,this.leaveEventCount=0;const s=e.defaultPrevented;e.preventDefault(),t?.(e),s||n(e,a),this.setState({isDropTargetActive:!1})};getMatchingMimeTypes(e){const t=this.props.types;return Array.from(e.dataTransfer.types).filter((e=>t.includes(e)))}getMatchingDropData(e){const t=this.getMatchingMimeTypes(e),n={};t.forEach((t=>{const a=e.dataTransfer.getData(t),s=0===t.indexOf("text/x-spotify"),i=s?a.split("\n"):[a];n[t]=i.map((e=>{if(s){const t=(0,r.o_h)(e);if(t)return t.toURI()}return e})).filter((e=>!!e))}));const a=e.dataTransfer.getData("text/plain");return n.all=a?a.split("\n").map((e=>{const t=(0,r.o_h)(e);return t?t.toURI():e})):[],n}render(){const{types:e=[],as:t=c,testId:n,className:a=""}=this.props,s=t,r=e.filter(Boolean).map((e=>`GlueDropTarget--${e.replace("text/x-spotify-","")}`));return(0,l.jsx)(s,{className:i()("GlueDropTarget",r,{"GlueDropTarget--active":this.state.isDropTargetActive},a),onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onContextMenu:this.props.onContextMenu,"data-testid":n,children:this.props.children})}}const u=e=>{const{supportsDragAndDrop:t}=(0,o._)();if(!t){const t=e.as??c;return(0,l.jsx)(t,{children:e.children})}return(0,l.jsx)(d,{...e})}},30536:(e,t,n)=>{n.d(t,{s:()=>i});var a=n(422),s=n(86070);const i=({variant:e})=>(0,s.jsx)(a.E,{variant:e,semanticColor:"textBase",children:"Spotify"})},91127:(e,t,n)=>{n.d(t,{R:()=>d});var a=n(30758),s=n(62411),i=n(22726),r=n(2963),o=n(6904),l=n(27012),c=n(86070);const d=({uri:e,owner:t,children:n})=>{const d=(0,s.wA)(),u=(0,s.d4)((e=>e.session.user?.id)),m=(0,i.tbX)(e),p=(0,a.useCallback)(((t,n)=>{const a=[...n[l.O[i.NQG.ALBUM]]||[],...n[l.O[i.NQG.TRACK]]||[],...n[l.O[i.NQG.LOCAL_TRACK]]||[],...n[l.O[i.NQG.EPISODE]]||[]];a.length>0&&d((0,r.io)(e,a))}),[d,e]);return m&&t===u?(0,c.jsx)(o.A,{types:[l.O[i.NQG.ALBUM],l.O[i.NQG.TRACK],l.O[i.NQG.EPISODE],l.O[i.NQG.LOCAL]],onDrop:p,testId:"cover-drop-target",children:n}):(0,c.jsx)(c.Fragment,{children:n})}},4041:(e,t,n)=>{n.d(t,{a:()=>x});var a=n(30758),s=n(97500),i=n.n(s),r=n(14343),o=n(31417),l=n(64143),c=n(29543),d=n(53133),u=n(60384),m=n(13134),p=n(61451),h=n(5805),g=n(43329),v=n(86070);const x=({context:e,item:t,className:n,onClick:s=(()=>{})})=>{const{dislikeEndpoint:x,shouldShowFeedbackControls:f}=(0,c.d)(e),y=(0,r.NC)(g.en),b=(0,m.j)(),{enqueueSnackbar:D}=(0,d.d)(),C=e.metadata?.[p.W.CONTEXT_DESCRIPTION]??"",{setDislikeFeedback:E}=(0,u.I)({uri:t.uri,setFeedbackPath:x,contextUri:e.uri}),S=(0,a.useCallback)((async()=>{E(),D(o.Ru.get("feedback.hide-song",C)),s?.()}),[D,C,s,E]),w=(0,a.useCallback)((async()=>{b.addContextTrackBan(e.uri,t.uri),D(o.Ru.get("feedback.hide-song",C)),s?.()}),[e.uri,C,D,b,t.uri,s]);return(0,h.v)(t)&&f?(0,v.jsx)(l.O,{className:i()(n,{"control-button":!n,"control-button-feedback":!n}),isDisliked:!1,onClick:y?w:S}):null}},68599:(e,t,n)=>{n.d(t,{g:()=>h});var a=n(30758),s=n(97500),i=n.n(s),r=n(422),o=n(31417),l=n(41616);const c="w0kwPDoelauN3C9dVoVe",d="xzLZD9uD3b4u9wecXAJY",u="DaFhhSm73r7rNpomErhI";var m=n(86070);const p=({children:e})=>(0,m.jsx)(m.Fragment,{children:e}),h=(0,a.forwardRef)((function({users:e,maxSlots:t=3,size:n,withoutOverflowBadge:a=!1,dropShadow:s=!1,AvatarWrapper:h=p},g){const v=Math.max(2,t),x=e.length>v?e.length-v+1:0,f=e.slice(0,v),{userIconSize:y,width:b,smallFontSize:D,largeFontSize:C}=(e=>{switch(e){case"xxlarge":return{userIconSize:"xlarge",width:64,smallFontSize:24,largeFontSize:32};case"xlarge":return{userIconSize:"large",width:48,smallFontSize:18,largeFontSize:24};case"large":return{userIconSize:"medium",width:32,smallFontSize:12,largeFontSize:16};case"medium":default:return{userIconSize:"small",width:24,smallFontSize:9,largeFontSize:12};case"small":return{userIconSize:"xsmall",width:18,smallFontSize:8,largeFontSize:10}}})(n),E=x>9?D:C,S=(0,m.jsx)("span",{className:i()(d,"encore-inverted-light-set"),style:{width:b,height:b},role:"presentation",children:(0,m.jsx)(r.E,{variant:"bodySmallBold",style:{fontSize:E},semanticColor:"textBase",children:`+${x}`})});return(0,m.jsx)("div",{className:i()(c),ref:g,children:f.map(((e,t)=>!a&&x>0&&t===v-1?(0,m.jsx)(h,{index:t,children:(0,m.jsx)(l.e,{images:[],userIconSize:y,label:o.Ru.get("web-player.social-connect.facepile.and-others",x),width:b,piled:!0,customPlaceholder:S})},"others"):(0,m.jsx)(h,{index:t,user:e,children:(0,m.jsx)(l.e,{images:e.images,userIconSize:y,label:e.displayName,displayName:e.displayName,username:e.username,width:b,piled:t>0,imageClassName:s?u:void 0})},e.displayName)))})}))},68204:(e,t,n)=>{n.d(t,{g:()=>a.g});var a=n(88882)},31650:(e,t,n)=>{n.d(t,{v:()=>a.v});var a=n(95320)},57969:(e,t,n)=>{n.d(t,{g:()=>c});var a=n(30758),s=n(92443),i=n(76730),r=n(25016),o=n(82662),l=n(53481);function c(){const e=(0,r.V)(),t=(0,l.u)(),[n,c]=(0,a.useState)(null),d=(0,a.useCallback)((async()=>{const n=e.getDefaultDevice();if(null===n)return void c(null);if(n.transportType!==s.Yg.BLUETOOTH)return void c({audioDevice:n});const a=await t.lookup(n.name);c({audioDevice:n,externalAccessory:a})}),[e,t]);return(0,o.k)(i.B.DEVICE_CONNECTED,d),(0,a.useEffect)((()=>{d()}),[d]),n}},31233:(e,t,n)=>{n.d(t,{l:()=>c});var a=n(14343),s=n(82921),i=n(79237),r=n(62642),o=n(43329);const l={id:"",connectStateId:"",name:"",type:r.bq.COMPUTER,isGroup:!1,isLocal:!0,isActive:!0,isConnecting:!1,isDisabled:!1,volume:0,losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1},supportsLogout:!1,supportedMediaTypes:null},c=()=>{const e=(0,a.NC)(o.vF),t=(0,s.Z)(),{activeDevice:n,devices:r}=(0,i.v)((n=>({activeDevice:e?t.getActiveDevice():n.activeDevice,devices:e?t.getDevices():n.devices})));return{currentDevice:n??l,devices:r}}},29839:(e,t,n)=>{n.d(t,{r:()=>h});var a=n(30758),s=n(62411),i=n(10495),r=n(30631),o=n(28874),l=n(40339),c=n(53328),d=n(8428),u=n(62844),m=n(47756),p=n(92333);function h(){const e=(0,s.d4)(o.u),t=(0,s.wA)(),{setYlxSidebarState:n}=(0,u.sy)(),{mainLandmarkRef:h,lyricsCinemaRef:g}=(0,i.JT)(),{isActive:v,panelSend:x}=(0,l.AI)(d.Z.NowPlayingView);return{mode:e,setMode:(0,a.useCallback)((e=>{e===m.YU.cinema&&v?(g.current?.classList.add(p.A.lyricsCinemaVisible),h.current?.classList.add(p.A.nonDisplayedArea),n(u.fX.COLLAPSED),x(c.$S.NPV_BUTTON_CLICK)):(g.current?.classList.remove(p.A.lyricsCinemaVisible),h.current?.classList.remove(p.A.nonDisplayedArea),v||x(c.$S.NPV_BUTTON_CLICK)),t((0,r.gh)(e))}),[t,x,v,g,h,n])}}},20675:(e,t,n)=>{n.d(t,{P:()=>u,X:()=>d});var a=n(31417),s=n(75497),i=n(13947),r=n(45627),o=n(5805),l=n(4861),c=n(85907);function d(e){return(0,o.v)(e)?a.Ru.get("playback-control.now-playing-label",e.name,e.artists.map((({name:e})=>e)).join(a.Ru.getSeparator())):(0,r.p)(e)?a.Ru.get("playback-control.now-playing-label",e.name,e.show.name):(0,i.d)(e)?a.Ru.get("playback-control.now-playing-label",e.name,e.book.name):(0,s.N)(e)?a.Ru.get("ad-formats.advertisement"):(0,l.v)(e)?void 0:(0,c.d)(e)}function u(e){let t=d(e);return t||(t=a.Ru.get("queue.now-playing")),t}},29543:(e,t,n)=>{n.d(t,{d:()=>a});const a=e=>{const t=e?.metadata?.["dislike-endpoint"]??null;return{dislikeEndpoint:t,shouldShowFeedbackControls:"1"===e?.metadata?.["dislike-feedback-available"]&&null!==t}}},20883:(e,t,n)=>{n.d(t,{e:()=>g});var a=n(30758),s=n(21082),i=n(85425),r=n(20675),o=n(75497),l=n(13947),c=n(45627),d=n(5805),u=n(4861),m=n(85907),p=n(86070);const h=(0,a.lazy)((()=>n.e(94).then(n.bind(n,60094)))),g=({context:e,index:t,item:n,isVisible:g,children:v,className:x,referrer:f,onClick:y,adEventReason:b})=>{const D=(0,r.P)(n),C=n.type,E=g?void 0:-1;if((0,d.v)(n)||(0,c.p)(n)||(0,l.d)(n)){const a=(0,i.O)(e,n,t);return a?(0,p.jsx)(s.N,{className:x,referrer:f,"data-testid":"context-link","data-context-item-type":C,style:{border:"none"},to:a.to,search:a.search,"aria-label":D,tabIndex:E,onClick:y,children:v}):(0,p.jsx)(p.Fragment,{children:v})}return(0,o.N)(n)?(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)(p.Fragment,{children:v}),children:(0,p.jsx)(h,{item:n,"aria-label":D,tabIndex:E,adEventReason:b,children:v})}):(0,u.v)(n)?(0,p.jsx)(p.Fragment,{children:v}):(0,m.d)(n)}},49885:(e,t,n)=>{n.d(t,{j:()=>m});var a=n(30758),s=n(16273),i=n(50486),r=n(92443),o=n(43013),l=n(23805),c=n(89133),d=n(11388);const u={headphoneDevice:null,audioDevice:null,predictedState:null,isOnboarded:!1,currentState:{externalizationEnabled:!1,specificEnabled:!1},contentRestrictions:{specificRestricted:!1,externalizationRestricted:!1,processingCapabilitiesRestricted:!1},toggleTuneHeadphones:null,toggleTuneStudio:null,setFilterState:()=>Promise.resolve()},m=()=>{const e=(0,l.N)(),t=(0,s.jE)(),n=(0,o.l)(),m=(0,a.useMemo)((()=>["puffin-current-device"]),[]),{data:p,isLoading:h,isError:g}=(0,i.I)({queryKey:m,queryFn:async()=>await e.getFilterState(),gcTime:5e3,staleTime:5e3});var v;return v=()=>{t.invalidateQueries({queryKey:m})},(0,d.G)(c.n.UPDATE,v),{deviceFilterState:!n&&p||u,isMaybeHeadphoneDevice:(0,r.lS)(p?.audioDevice),isLoading:h,isError:g}}},15645:(e,t,n)=>{n.d(t,{o:()=>r});var a=n(30758),s=n(49885),i=n(62021);const r=()=>{const{deviceFilterState:e}=(0,s.j)(),t=(0,a.useMemo)((()=>e.audioDevice?.id),[e.audioDevice?.id]),[n,r]=(0,i.x)("onboarding-dismissed:puffin",{}),o=(0,a.useCallback)((()=>{t&&r({...n,[t]:(n[t]??0)+1})}),[t,n,r]);return{isDeviceDismissed:(0,a.useMemo)((()=>!!t&&n[t]>=3),[t,n]),incrementDismissCountForDevice:o}}},16514:(e,t,n)=>{n.d(t,{o:()=>w});var a=n(30758),s=n(97500),i=n.n(s),r=n(93523),o=n(8518),l=n(78350),c=n(14503),d=n(22726),u=n(31417),m=n(99701),p=n(38165),h=n(98712),g=n(51354),v=n(608),x=n(11893),f=n(33329),y=n(21549);const b="VcqCvLW71lZT4kqnCgt0";var D=n(86070);const C=({contextUri:e="",uri:t,id:n=t,className:s,canAdd:d})=>{const{description:x}=(0,v.f)(),C=(0,f.s)(),{spec:E}=(0,y.r)(c.A,{data:{uri:e}}),S=(0,a.useCallback)((()=>{C.logInteraction(E.undoButtonFactory({uri:t}).hitUiHide())}),[C,E,t]),w=(0,a.useCallback)((()=>{C.logInteraction(E.removeRecommendationButtonFactory({uri:t}).hitRemoveRecommendation({recommendedItemUri:t,contextUri:e}))}),[e,C,E,t]),k=(0,a.useCallback)((()=>{C.logInteraction(E.addRecommendationButtonFactory({uri:t}).hitAddToPlaylist({playlist:e,itemToBeAdded:t}))}),[e,C,E,t]),{removeRecommendation:N,addRecommendation:A,canRemoveRecommendation:R,canAddRecommendation:T}=(0,p.t)({uri:t,uid:n,contextUri:e,onUndo:S,onRemoveRecommendation:w,onAddRecommendation:k}),F=(0,a.useCallback)((()=>x?u.Ru.get("web-player.smart-shuffle.add-to-playlist-button",x):u.Ru.get("web-player.smart-shuffle.add-to-playlist-button-fallback")),[x]),j=(0,g.y)();return(0,D.jsxs)("div",{className:i()(b,s),children:[R&&(0,D.jsx)(m.Zp,{label:u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),children:(0,D.jsx)(r.H,{onClick:N,iconOnly:o.P,size:j===h.E.MEDIUM?"medium":"small","aria-label":u.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),condensedAll:!0})}),d&&T&&(0,D.jsx)(m.Zp,{label:F(),children:(0,D.jsx)(r.H,{onClick:A,iconOnly:l.P,size:j===h.E.MEDIUM?"medium":"small","aria-label":F(),condensedAll:!0})})]})},E=e=>{const t=(0,x.J)(e.contextUri);return(0,D.jsx)(C,{...e,canAdd:t?.canAdd??!1})},S=e=>(0,D.jsx)(C,{...e,canAdd:!0}),w=e=>e.contextUri&&(0,d.tbX)(e.contextUri)?(0,D.jsx)(E,{...e,contextUri:e.contextUri}):e.contextUri&&(0,d.Z0m)(e.contextUri)?(0,D.jsx)(S,{...e,contextUri:e.contextUri}):(0,D.jsx)(C,{...e,canAdd:!1})},64333:(e,t,n)=>{n.d(t,{c:()=>i,t:()=>r});var a=n(22726);const s=e=>({url:e}),i=e=>{const t=[];return e.largeImageUrl?t.push(s(e.largeImageUrl)):e.imageUrl&&t.push(s(e.imageUrl)),{displayName:e.displayName,images:t,username:e.username,uri:(0,a.Qjr)(e.username).toURI()}},r=(e,t,n)=>{const a=[],s=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId));s&&a.push(s);const r=e.isSessionOwner?void 0:e?.sessionMembers.find((({username:e})=>e===t));r&&(n?.userFirst?a.unshift(r):a.push(r));const o=e.sessionMembers.filter((({username:n,id:a})=>a!==e.sessionOwnerId&&n!==t));return[...a,...o].map(i)}},45836:(e,t,n)=>{n.d(t,{K:()=>f});var a=n(30758),s=n(62411),i=n(99410),r=n(422),o=n(31417),l=n(75610),c=n(68599),d=n(64333),u=n(83123),m=n(22726),p=n(21549);var h=n(69693);const g="UWuPbrFbZar0lIcBFH31",v="wFkvSGFYuw6rhfwWWYWC";var x=n(86070);const f=()=>{const{currentSession:e}=(0,h.D)(),t=(0,s.d4)((({session:e})=>e.user?.id)),{logJamNameClick:n}=(()=>{const{spec:e,logger:t}=(0,p.r)(u.V,{});return{logJamNameClick:(0,a.useCallback)((()=>{const n=e.jamNameFactory().hitUiNavigate({destination:(0,m.K72)().toURI()});t.logInteraction(n)}),[t,e])}})(),{openQueue:f}=(0,l.R)(),y=(0,a.useCallback)((()=>{n(),f()}),[n,f]);if(!e?.active)return null;const b=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId)),D=(0,d.t)(e,t,{userFirst:!0});return(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)(c.g,{users:D,dropShadow:!0,size:"small"}),(0,x.jsx)(i.Y,{className:v,onClick:y,semanticColor:"textBase",tabIndex:0,standalone:!0,children:(0,x.jsx)(r.E,{variant:"bodySmallBold",children:o.Ru.get("web-player.social-connect.session-info.title",{host:b?.displayName??""})})})]})}},20916:(e,t,n)=>{n.d(t,{v:()=>i});var a=n(23805),s=n(65292);const i=()=>{const e=(0,a.N)(),t="1"===(0,s.$)("is-puffin");return e.isAvailable()&&t}},35072:(e,t,n)=>{n.d(t,{J:()=>s});var a=n(30758);function s(e){const t=(0,a.useRef)(e);return(0,a.useLayoutEffect)((()=>{t.current=e})),(0,a.useCallback)(((...e)=>t.current(...e)),[])}},11388:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(30758),s=n(23805);function i(e,t){const n=(0,a.useRef)(t),i=(0,s.N)();n.current=t,(0,a.useEffect)((()=>{const t=i.getFiltersEvents();return t?.addListener(e,(e=>{n.current(e)}))}),[e,i])}},90754:(e,t,n)=>{n.d(t,{c:()=>o});var a=n(30758),s=n(66530),i=n(10565),r=n(35072);function o(e,t){const n=(0,i.d)(),o=(0,r.J)(t),l=(0,s.a)();(0,a.useEffect)((()=>n.getBroadcastingEvents().addListener(e,(e=>{l()&&o(e)}))),[n,o,e,l])}},92333:(e,t,n)=>{n.d(t,{A:()=>a});const a={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",lyricsCinemaVisible:"sgQuNaOh5Eu6vnzh3eoh",nonDisplayedArea:"KJNUWtMTBWtQrmsas64b",Container:"F3qS5Fne4ECzEWyFeJ5S",Controls:"dS_1_x4lBrx_vX9AMg6Q",Content:"mC8gFZzy9ZRO5c61MeuO"}}}]);
//# sourceMappingURL=3996.js.map