"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{23432:(e,t,a)=>{a.d(t,{I:()=>o});var s=a(30758),i=a(45664),r=a(89402),n=a(24533),l=a(86070);const o=s.memo((function({uri:e,size:t=i.M.md,className:a,onClick:o,canDownload:c,condensedAll:d}){const[u,m]=(0,n.A)(e),p=(0,r.W)(),x=(0,s.useCallback)((()=>{p({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[p,e,u,m]);return(0,l.jsx)(i.f,{className:a,isFollowing:u,onFollow:x,onClick:o,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},72954:(e,t,a)=>{a.d(t,{w:()=>m});var s=a(30758),i=a(97500),r=a.n(i),n=a(52439),l=a(31417),o=a(881),c=a(6837);const d="pvGZ831aNzHTQMZ8CA_u";var u=a(86070);const m=(0,s.memo)((function({onClick:e=(()=>{}),size:t,className:a,uri:i,sharingInfo:m,interactionData:p,ariaLabel:x=l.Ru.get("mwp.list.item.share"),condensedAll:y,placement:h,semanticColor:g,disableTooltip:b}){const{onCopyLink:f}=(0,c.L)({sharingInfo:m,uri:i,interactionData:p}),A=(0,s.useCallback)((()=>{f(),e()}),[e,f]);return(0,u.jsx)(o.a,{ariaLabel:x,size:t,onClick:A,className:r()(d,a),icon:n.C,condensedAll:y,placement:h,condensed:!0,semanticColor:g,disableTooltip:b})}))},46628:(e,t,a)=>{a.d(t,{k:()=>d});var s=a(30758),i=a(97500),r=a.n(i),n=a(97548),l=a(35226),o=a(27062),c=a(86070);const d=(0,s.memo)((function(e){const{breakpoint:t,className:a,showSeparator:s,isActive:i,...d}=e;return(0,c.jsx)(n.v,{className:r()(a,o.A.entityRow,{[o.A.separator]:s,[o.A.active]:i}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===l.e.SMALL?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===l.e.SMALL?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...d})}))},12969:(e,t,a)=>{a.d(t,{X:()=>l});var s=a(422);const i="dK79XxAEu3SEKJ2jS_Qy",r="guiUbDD6Ga8Qpatq2jQ8";var n=a(86070);const l=({badges:e,children:t})=>(0,n.jsxs)("div",{className:i,children:[e,(0,n.jsx)(s.E,{variant:"bodySmall",className:r,children:t})]})},53387:(e,t,a)=>{a.d(t,{q:()=>r});var s=a(34733),i=a(86070);const r=e=>(0,i.jsx)(s.R,{size:"small",version:s.H.secondary,...e})},16970:(e,t,a)=>{a.d(t,{k:()=>l});var s=a(61093),i=a(48896),r=a(27062),n=a(86070);const l=({description:e,children:t})=>(0,n.jsxs)("div",{className:r.A.body,children:[e&&(0,n.jsx)(s.v,{lineClamp:2,as:"div",dir:"auto",children:(0,n.jsx)(i.q,{asTextContent:!0,html:e})}),t]})},75863:(e,t,a)=>{a.d(t,{F:()=>r});var s=a(27062),i=a(86070);const r=({actions:e,playButton:t})=>(0,i.jsxs)("div",{className:s.A.footer,children:[(0,i.jsx)("div",{className:s.A.actions,children:e}),t]})},12008:(e,t,a)=>{a.d(t,{e:()=>o});var s=a(35226),i=a(32255),r=a(69624),n=a(32999),l=a(86070);const o=({images:e,breakpoint:t,type:a,name:o})=>{const c=(0,n._)(),d=t===s.e.SMALL?r.Qe.SIZE_64:r.Qe.SIZE_112;return(0,l.jsx)(i.b,{fadeIn:!0,images:c(e,r.BZ[d]),shape:i.u.ROUNDED_CORNERS,size:d,iconSize:t===s.e.SMALL?"medium":"xlarge",type:a,title:o,loadingMode:"eager"})}},79514:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(68933),i=a(27062),r=a(86070);const n=({children:e})=>(0,r.jsx)(s.d,{lineClamp:2,as:"div",dir:"auto",className:i.A.title,children:e})},33712:(e,t,a)=>{a.d(t,{p:()=>d});var s=a(92255),i=a(50635),r=a(44875),n=a(98811),l=a(83327),o=a(50671),c=a(86070);const d=({index:e,logShelfImpressions:t=!1,...a})=>{const{id:d,seeAllUri:u,title:m}=a,{onClickShelfTitle:p,onClickShelfSeeAll:x,spec:y}=(0,i.w)({seeAllUri:u,index:e,id:d}),h=(0,o.t)(y),g=(0,r.a)(u,m),b=(0,n.O)(u,m);return(0,c.jsx)(l.r,{spec:y,children:(0,c.jsx)(s.$,{...a,elementRef:t?h:void 0,onClickShelfTitle:()=>{p(),g({category:r.w.TitleClicks}),b({category:n.U.TitleClicks})},onClickShelfSeeAll:()=>{x(),g({category:r.w.ShowAll}),b({category:n.U.ShowAll})}})})}},50635:(e,t,a)=>{a.d(t,{w:()=>n});var s=a(30758),i=a(4414),r=a(21549);const n=({seeAllUri:e,index:t,id:a})=>{const{spec:n,logger:l}=(0,r.r)(i.f,{data:{identifier:a,position:t,uri:e??""}}),o=(0,s.useCallback)((()=>{const e=n.swipeUiReveal();l.logInteraction(e)}),[l,n]),c=(0,s.useCallback)((e=>{const t=n.shelfHeaderFactory().shelfCarouselControlsFactory(),a="next"===e?t.shelfCarouselControlsNextFactory():t.shelfCarouselControlsPreviousFactory();l.logInteraction(a.hitUiReveal())}),[l,n]);return{onClickShelfTitle:(0,s.useCallback)((()=>{const t=n.shelfHeaderFactory().shelfHeaderTitleFactory().hitUiNavigate({destination:e??""});l.logInteraction(t)}),[l,e,n]),onClickShelfSeeAll:(0,s.useCallback)((()=>{const t=n.shelfHeaderFactory().shelfHeaderSeeAllFactory().hitUiNavigate({destination:e??""});l.logInteraction(t)}),[l,e,n]),onSwipe:o,onClickCarouselControls:c,spec:n}}},80737:(e,t,a)=>{a.d(t,{l:()=>d});var s=a(30758),i=a(422),r=a(31417),n=a(99701),l=a(83044),o=a(33329),c=a(86070);const d=({artists:e,spec:t,className:a})=>{const d=(0,o.s)(),u=(0,s.useCallback)(((e,a)=>{t&&d.logInteraction(t.artistLinkFactory({position:a??0,uri:e}).hitUiNavigate({destination:e}))}),[d,t]);if(!e||0===e.length)return null;const m=e.map((({name:e})=>e)).join(r.Ru.getSeparator());return(0,c.jsx)(n.Zp,{label:m,showDelay:n.uF,children:(0,c.jsx)(i.E,{as:"span",variant:"bodySmall",className:a,children:e.map((({uri:e,name:t},a)=>(0,c.jsxs)(s.Fragment,{children:[a>0&&r.Ru.getSeparator(),(0,c.jsx)(l.y,{name:t,uri:e,onClick:u,index:a,children:t},e)]},e)))})})}},50915:(e,t,a)=>{a.d(t,{u:()=>p});var s=a(97500),i=a.n(s),r=a(40638),n=a(16832),l=a(68118),o=a(89402),c=a(94139),d=a(33329),u=a(14178),m=a(86070);const p=({uri:e,src:t,playAriaLabel:a,onClick:s,isPlaying:p,isActive:x,isLocked:y,isEpisode:h,isVideo:g,spec:b})=>{const f=(0,o.W)(),A=(0,d.s)(),j=(0,r.YQ)((t=>{let a;if(f({type:"click",intent:p?"pause":"play"}),b){const t=b.playbackButtonFactory();let s;s=x&&p?t.hitPause({itemToBePaused:e}):x&&!p?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=A.logInteraction(s)}s(t,a)}),c.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(l.e,{src:t,isEpisode:h,isVideo:g}),(0,m.jsx)(n.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:j,isPlaying:p,isLocked:y,playAriaLabel:a})]})}},92347:(e,t,a)=>{a.d(t,{Y:()=>o});var s=a(30758),i=a(422),r=a(31417),n=a(14178),l=a(86070);const o=(0,s.memo)((function({playcount:e}){return e<1?null:(0,l.jsx)(i.E,{as:"div",variant:"bodySmall",className:n.A.rowPlayCount,children:r.Ru.formatNumber(e)})}))},91182:(e,t,a)=>{a.d(t,{c:()=>f,p:()=>h});var s=a(30758),i=a(93240),r=a(97714),n=a(88394),l=a(31417),o=a(26344),c=a(86568),d=a(20817),u=a(20784),m=a(81752),p=a(50671),x=a(21549),y=a(86070);let h=function(e){return e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.EPISODE="episode",e.PLAYLIST="playlist",e.PODCAST="podcast",e.TRACK="track",e}({});const g=e=>e===h.TRACK?l.Ru.get("web-player.deeplink-intent.add-to-library.liked-songs-title"):e===h.EPISODE?l.Ru.get("web-player.deeplink-intent.add-to-library.episodes-title"):l.Ru.get("web-player.deeplink-intent.add-to-library.title"),b=({entityType:e,artistOrShow:t,title:a})=>e===h.ARTIST||e===h.PODCAST?l.Ru.get("web-player.deeplink-intent.add-to-library.artist-description",{name:t??""}):l.Ru.get("web-player.deeplink-intent.add-to-library.description",{title:a??"",name:t??""}),f=e=>{const{intent:t,clear:a}=(0,c.AT)();return t!==c.pg.ADD_TO_LIBRARY?null:(0,y.jsx)(A,{...e,clearDeeplinkIntent:a})};function A({uri:e,entityType:t,artistOrShow:a,title:c,clearDeeplinkIntent:f}){const A=(0,u.f)(),j=(0,m._)(),{enqueueSnackbar:R}=(0,i.dh)(),[C,k]=(0,s.useState)(null),{spec:T,logger:v}=(0,x.r)(r.K0,{data:{uri:e,identifier:t}}),{spec:S,logger:I}=(0,x.r)(n.y4,{data:{uri:e,identifier:t}}),E=(0,p.t)(T);(0,s.useEffect)((()=>{t===h.PLAYLIST?j?.contains([e]).then((e=>k(e[0]))):A.contains(e).then((e=>k(e[0])))}),[t,A,j,e]),(0,s.useEffect)((()=>{C&&(R(l.Ru.get("web-player.deeplink-intent.add-to-library.already-in-library")),I.logImpression(S.impression()),f())}),[f,R,C,I,S]);const w=(0,s.useCallback)((()=>{v.logInteraction(T.closeButtonFactory().hitUiHide()),f()}),[f,v,T]),N=(0,s.useCallback)((()=>{t===h.PLAYLIST?j?.add([e],{before:"start"}):A.add({uris:[e]}),t===h.EPISODE||t===h.TRACK?v.logInteraction(T.addButtonFactory().hitAddToPlaylist({playlist:t===h.TRACK?d.BP:d.Xn,itemToBeAdded:e})):v.logInteraction(T.addButtonFactory().hitFollow({itemToBeFollowed:e})),f()}),[f,t,A,v,j,T,e]);return null===C?null:(0,y.jsx)(o.T,{ref:E,titleText:g(t),descriptionText:b({entityType:t,artistOrShow:a,title:c}),confirmText:l.Ru.get("playlist.extender.button.add"),cancelText:l.Ru.get("block-user.dialog.cancel"),onConfirm:N,onClose:w,"aria-label":g(t)})}},87091:(e,t,a)=>{a.d(t,{M:()=>c});var s=a(21743),i=a(30758);const r=[],n=(e,t)=>{const a=[];let s=e,i=t;for(;s>0;){const t=Math.ceil(s/i);a.push({first:e-s,nrItems:t}),s-=t,i--}return a};var l=a(86070);const o=e=>{const{itemsInNode:t,renderItem:a,renderPlaceholder:i,estimatedHeight:r,scrollNodeRef:c,nrRowsOverscan:d=10,nrInitialInView:u=0,firstIndex:m,heights:p,fanOut:x=2}=e,{ref:y,inView:h,entry:g}=(0,s.Wx)({root:c.current,rootMargin:d*r+"px 0px",initialInView:m<u}),b=`${m}-${t}`;p[b]??=r*t,g?.boundingClientRect?.height&&(p[b]=g.boundingClientRect.height);const f=p[b];return 0===t?null:h?1===t?(0,l.jsx)("div",{ref:y,role:"presentation",children:a(m,f)}):(0,l.jsx)("div",{ref:y,role:"presentation",children:n(t,x).map((({first:t,nrItems:a},s)=>(0,l.jsx)(o,{...e,itemsInNode:a,firstIndex:m+t},s)))}):(0,l.jsx)("div",{ref:y,role:"presentation",children:i(`${f}px`)})},c=e=>{const t=(e=>{const t=r.find((t=>t.key===e))?.heights||{},a=(0,i.useCallback)((t=>{if(!e)return;const a=r.findIndex((t=>t.key===e));-1===a?r.push({key:e,heights:t}):(r[a].heights=t,r.push(r.splice(a,1)[0])),r.length>10&&r.shift()}),[e]),s=(0,i.useRef)({...t});return(0,i.useEffect)((()=>()=>{a(s.current)}),[a]),s.current})(e.persistanceKey);return(0,l.jsx)(o,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})}},12336:(e,t,a)=>{a.d(t,{u:()=>s});let s=function(e){return e.TITLE="title",e.SUBTITLE="subTitle",e}({})},35226:(e,t,a)=>{a.d(t,{$:()=>n,e:()=>r});var s=a(98712),i=a(51354);const r={SMALL:"small",LARGE:"large"},n=()=>(0,i.y)()===s.E.SMALL?"small":"large"},91978:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u,useThisisPlaylistExtensionQuery:()=>y});var s=a(422),i=a(56515),r=a(31417),n=a(21082),l=a(33329),o=a(50671),c=a(7060),d=a(86070);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,l.s)(),x=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:x,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(n.N,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(57776),p=a(59147);const x=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),y=(e,t)=>(0,p.I)(x,e,t)},67554:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Yi});var s=a(30758),i=a(62411),r=a(85387),n=a(422),l=a(14343),o=a(25060),c=a(22726),d=a(31417),u=a(2963),m=a(54165),p=a(86070);const x=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),y=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:u})=>{const y=(0,i.wA)(),[h,g]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(y((0,m.tb)()),y((0,m.i2)(x("event_viewed",c,u))),()=>{y((0,m.zV)())})),[y,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{y((0,m.i2)(x("event_clicked",c,u))),g(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),h&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},h=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(y,{...a})}):null},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const n=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return n?(0,p.jsx)(h,{playlistUri:e}):null};var b=a(76123),f=a(42583),A=a(50925),j=a(15292),R=a(81067),C=a(79876),k=a(80750),T=a(60915),v=a(79301),S=a(92202),I=a(38682),E=a(39795),w=a(95446),N=a(6966),P=a(60690),L=a(91978),U=a(91182),B=a(96621),M=a(30147),_=a(21549);var O=a(45415),D=a(47186),F=a(85961),$=a(57776),z=a(59147);const V=new $.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),W=new $.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),H=new $.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),K=new $.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var q=a(7307),Q=a(35529),Y=a(41031);function G(e){return{type:q.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d.Ru.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,Q.e$)(e.accessInfo),isExplicit:e.contentRating?.label===Y.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var J=a(16157),X=a(68993),Z=a(95651),ee=a(13719),te=a(85907);function ae(e){return{type:q.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Z.r)(e.coverArt)}}function se(e){if("Album"!==e.data.__typename)return null;return ae(e.data)}function ie(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>se(e))).filter(ee.P)||[]}function re(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:q.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,Z.r)(t.visuals.avatarImage)}}function ne(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:q.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,Z.r)(t.coverArt),isExplicit:t.contentRating?.label===J.x7.Explicit,is19PlusOnly:t.contentRating?.label===J.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function le(e){const t=(0,Z.r)(e.albumOfTrack?.coverArt||null);return{type:q.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===J.x7.Explicit,is19PlusOnly:e.contentRating?.label===J.x7.NineteenPlus}}function oe(e){if("Track"!==e.data.__typename)return null;return le(e.data)}function ce(e){return(e?.itemsV2??[]).map((e=>{const t=(0,X.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return se(t);case"ArtistResponseWrapper":return re(t);case"EpisodeResponseWrapper":return ne(t);case"TrackResponseWrapper":return oe(t);default:return(0,te.k)(t),null}})).filter(ee.P)||[]}function de(e){return(e?.itemsV2??[]).map((e=>{const t=(0,X.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?G(t.data):null})).filter(ee.P)||[]}const ue=async(e,t,a,s=0,i=10,r=10)=>{const n={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(W,n),s=a?.data?.searchV2;return s?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:de(s.topResultsV2)??[],query:l}):null}var l;const o=await e(V,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:ie(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>re(e))).filter(ee.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>ne(e))).filter(ee.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>oe(e.item))).filter(ee.P)||[])??[]),topResults:ce(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},me=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(H,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>le(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,te.k)(t),null}}(n):null},pe=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(K,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>ae(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>le(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,te.k)(t),null}}(n):null};let xe=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const ye=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:xe.SEARCH,term:t.term,title:""}]}),e);var he=a(97500),ge=a.n(he),be=a(40638),fe=a(66371);const Ae="playlist-inlineSearchBox-filterInputContainer",je="playlist-inlineSearchBox-filterInput",Re="playlist-inlineSearchBox-overlay",Ce="playlist-inlineSearchBox-searchIconContainer",ke="playlist-inlineSearchBox-searchIcon",Te="playlist-inlineSearchBox-clearButton",ve=s.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:a=(()=>{})}){const[i,r]=(0,s.useState)(""),l=(0,s.useRef)(null),o=(0,be.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:Ae,role:"search",children:[(0,p.jsx)(n.E,{as:"input",variant:"bodySmall",ref:l,className:ge()(je),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:Re,children:[(0,p.jsx)("span",{className:Ce,children:(0,p.jsx)(fe.C,{size:"small",className:ke,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:Te,onClick:u,"aria-label":d.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(O.M,{size:"small"})})]})]})}));var Se=a(17918),Ie=a(56515),Ee=a(86563),we=a(81231),Ne=a(96364),Pe=a(98293),Le=a(83352),Ue=a(23432),Be=a(38157),Me=a(72954),_e=a(75830),Oe=a(65462),De=a(47863),Fe=a(12969),$e=a(53387),ze=a(46628),Ve=a(16970),We=a(75863),He=a(12008),Ke=a(79514),qe=a(12336),Qe=a(35226),Ye=a(21082),Ge=a(67668),Je=a(20829),Xe=a(99041),Ze=a(24533),et=a(19546),tt=a(85346),at=a(35035),st=a(28340),it=a(79678),rt=a(33329),nt=a(55769),lt=a(27062);const ot="i3wVxndfxMEqUujUJOYc",ct="XFwXZEToljeXDRWQYSEm",dt="hZ_wTiRO870PNY1cRKCd",ut=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,index:l,sharingInfo:o,uid:u,rating:m,isRecommendation:x=!1,canRemove:y=!1,showSeparator:h=!1,highlightText:g=(e=>e),onAddClick:b,...f}){const{name:A,description:j,isLocked:R,isExplicit:C,images:k,type:T,uri:v,authorName:S,consumptionCapExplanation:I,durationMs:E,topics:w=[],signifierText:N}=e,P=(0,rt.s)(),{spec:L}=(0,_.r)(Ne.m,{data:{position:l,uri:v}}),{isPlaying:U,isActive:B,togglePlay:M}=(0,st.P)({uri:v},{featureIdentifier:a}),O=(0,r.Zp)(),D=(0,c.o_h)(v).toURLPath(!0),F=(0,Qe.$)(),$=(0,it.p)(v),[z,V]=(0,Ze.A)(v),W=(0,tt.T)(v),H=(0,i.wA)(),K=(0,Ge.V)(),q=F===Qe.e.SMALL?"small":"medium",Q=(0,s.useCallback)((()=>{P.logInteraction(L.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:v})),b?.(v)}),[P,L,t,v,b]),G=(0,s.useCallback)((()=>{if(!I||K)if(R&&!I)O(D);else{const e=(0,Je.$I)({isPlaying:U,isActive:B,spec:L.playButtonFactory(),logger:P,uri:v});M({loggingParams:e})}else H((0,Pe._3)(I))}),[I,H,B,K,R,U,P,O,L,M,v,D]),J=(0,s.useCallback)((()=>{P.logInteraction(L.genreLinkFactory({uri:w[0].uri??""}).hitUiNavigate({destination:w[0].uri??""}))}),[P,L,w]),X=(0,p.jsx)(Ke.U,{children:g(A,qe.u.TITLE)}),Z=(0,p.jsx)(Ve.k,{description:j,children:(0,p.jsxs)(Fe.X,{badges:!!C&&(0,p.jsx)(Xe.U,{}),children:[!0===m?.showAverage&&void 0!==m.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Se.j,{size:"xsmall",className:ot}),d.Ru.formatNumber(m.average,{maximumFractionDigits:1})]}),w.at(0)?.title&&(0,p.jsx)(Ye.N,{className:ct,to:w[0].uri??"",onClick:J,children:w[0].title}),void 0!==E&&(0,p.jsx)(nt.j,{isPlaying:!1,fullyPlayed:$?.state===Y.H7.Completed,durationMs:E,position:$?.playPositionMilliseconds})]})}),ee=(0,p.jsx)(De.p,{uri:v,uid:u,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:y}),te=!R&&!!!I,ae=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Le.M,{className:ge()({[lt.A.visibleAction]:z}),isAdded:z,onClick:()=>{z?P.logInteraction(L.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:v})):P.logInteraction(L.saveToLibraryButtonFactory().hitLike({itemToBeLiked:v})),V(!z)},size:q,condensedAll:!0,condensed:!0}),(0,p.jsx)(Ue.I,{className:ge()({[lt.A.visibleAction]:(0,et.X)(W)}),uri:v,onClick:(e,t)=>{t===at.NV.ADD&&P.logInteraction(L.downloadButtonFactory().hitDownload({itemToDownload:v}))},size:q,canDownload:te,condensedAll:!0}),(0,p.jsx)(Me.w,{uri:v,sharingInfo:o??null,interactionData:{intent:"share",type:"click"},size:q,onClick:()=>{P.logInteraction(L.shareButtonFactory().hitShare({entityToBeShared:v,shareId:o?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(_e.b,{menu:ee,children:(0,p.jsx)(Be.e,{label:d.Ru.get("more.label.context",A),size:q,onClick:()=>{P.logInteraction(L.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),se=x?null:(0,p.jsx)(We.F,{actions:ae,playButton:(0,p.jsx)($e.q,{onClick:G,isPlaying:U,ariaPlayLabel:d.Ru.get("tracklist.a11y.play",A,S),ariaPauseLabel:d.Ru.get("tracklist.a11y.pause",A,S),locked:R})}),ie=(0,p.jsx)(He.e,{images:k,name:A,type:T,breakpoint:F}),re=N?(0,p.jsx)(n.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:N}):null,ne=b?(0,p.jsx)(Ie.n,{size:"small",onClick:Q,children:d.Ru.get("playlist.extender.button.add")}):null,le=(0,p.jsxs)(Ee.j,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[x&&R&&(0,p.jsx)(we.u,{semanticColor:"textSubdued",title:d.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:dt}),d.Ru.get("card.tag.audiobook")]}),g(S,qe.u.SUBTITLE)]});return(0,p.jsx)(Oe.h,{menu:ee,onShow:()=>{P.logInteraction(L.secondaryHitUiReveal())},children:(0,p.jsx)(ze.k,{breakpoint:F,id:`book-${v}`,media:ie,pretitle:re,title:X,body:Z,subtitle:le,footer:se,trailing:ne,isActive:B,onClick:()=>{P.logInteraction(L.hitUiNavigate({destination:v})),O(D)},showSeparator:h,...f})})}));var mt=a(37115),pt=a(96614),xt=a(4266);const yt=({renderRow:e,searchResults:t})=>(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]});var ht=a(11860);const gt=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===q.c.TRACK)),s=t.filter((e=>e.type===q.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ht.A.artistResultListTitle,children:d.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:ht.A.artistResultListTitle,children:d.Ru.get("playlist.curation.albums")}),(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]})]})},bt=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:mt.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ft=({renderRow:e,searchResults:t})=>(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]}),At=({renderRow:e,searchResults:t})=>(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]}),jt=({renderRow:e,searchResults:t})=>(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:mt.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADD]});var Rt=a(89845),Ct=a(18377);const kt="G2t3w2AAeb5OXp0_GeWs",Tt="saVjTFMyWYUz975_tkQm",vt="thi8fNCkEhutRkDC90c0",St="pHVlkChuJpEnBQyU3ADv",It="ENWs3JxcqtD98_8fbPz2",Et="L8IUKEJL6JiTyE_qUVCc",wt="XcyjdXgsNX0DBt72tfiD",Nt="VhJnuS7UcUPfIlzD8dlU",Pt="He29vQ5anFj_bJ5iEaI2",Lt=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ct.$,{className:It,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Pt,onClick:s,children:[(0,p.jsxs)(Rt.T,{columnIndex:0,className:Et,children:[void 0!==i?(0,p.jsx)("img",{className:vt,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:wt,children:[(0,p.jsx)(n.E,{as:"p",className:St,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("album")})]})]}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Nt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(D.V,{})})})]})})};var Ut=a(90694);const Bt=({size:e})=>(0,p.jsx)("div",{className:Tt,children:(0,p.jsx)(Ut.r,{size:e})}),Mt=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ct.$,{className:It,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:Pt,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Rt.T,{columnIndex:0,className:Et,children:[void 0!==i?(0,p.jsx)("img",{className:kt,src:i,alt:e.name}):(0,p.jsx)(Bt,{size:"small"}),(0,p.jsxs)("div",{className:wt,children:[(0,p.jsx)(n.E,{as:"p",className:St,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("artist")})]})]}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Nt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(D.V,{})})})]})})};var _t=a(91676),Ot=a(32183),Dt=a(14563),Ft=a(50915),$t=a(27305),zt=a(82391),Vt=a(13679),Wt=a(38215),Ht=a(95797),Kt=a(35522),qt=a(89402),Qt=a(42621),Yt=a(97253),Gt=a(18663),Jt=a(44672),Xt=a(31),Zt=a(15838),ea=a(14178);const ta=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:n,name:l,imgUrl:o,index:c,podcast:u,usePlayContextItem:m}){const x=(0,s.useMemo)((()=>n.replace("internal:recs:","")),[n]),y=(0,qt.W)(),{addItems:h}=(0,Xt.x)(x),{isActive:g,isPlaying:b,triggerPlay:f,togglePlay:A}=m({uid:e,uri:t,index:c}),j=(0,s.useCallback)((()=>{h([t],{after:"end"}),y({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:x})}),[h,t,y,x]),R=(0,tt.T)(t),{isPlayable:C,isAnyArtistBanned:k}=(0,Qt.g)(t,{isPlayable:a}),{badges:T,hasBadges:v}=(0,Zt.b)({downloadAvailability:R,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(Jt.pZ,{value:"row",index:c,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(_t.b,{uri:t,contextUri:n}),children:(0,p.jsxs)(Kt.w,{uri:t,contextUri:t,isPlayable:C,isAnyArtistBanned:k,onTriggerPlay:()=>{f()},isActive:g,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:l,createdBy:u.name},isExplicit:r,children:[(0,p.jsxs)(Vt.U,{ariaColIndex:0,children:[(0,p.jsx)(Ft.u,{uri:t,src:o,onClick:()=>{A()},isLocked:!1,isPlaying:b,isActive:g,isEpisode:!0,playAriaLabel:d.Ru.get("tracklist.a11y.play",l,u.name)}),(0,p.jsxs)($t.l,{children:[(0,p.jsx)(Ht.p,{titleText:l,children:l}),v&&(0,p.jsxs)(Dt.P,{children:[T.download&&(0,p.jsx)(Yt._,{}),T.explicit&&(0,p.jsx)(Xe.U,{}),T.nineteen&&(0,p.jsx)(Gt.q,{className:ea.A.nineteen,size:16})]})]})]}),(0,p.jsx)(Wt.o,{ariaColIndex:1,children:(0,p.jsx)(Ot.g,{uri:u.uri,name:u.name,children:u.name})}),(0,p.jsx)(zt.l,{ariaColIndex:2,children:(0,p.jsx)(Ie.n,{size:"small",onClick:j,children:d.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),aa=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(ta,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),sa=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(Ct.$,{className:It,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:Pt,onClick:s,children:[(0,p.jsx)(Rt.T,{columnIndex:0,className:Et,children:(0,p.jsx)(n.E,{as:"p",className:St,variant:"bodyMedium",children:e})}),(0,p.jsx)(Rt.T,{columnIndex:1}),(0,p.jsx)(Rt.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Nt,onClick:s,children:a?(0,p.jsx)(F.g,{}):(0,p.jsx)(D.V,{})})})]})});var ia=a(10611),ra=a(54622),na=a(80737),la=a(20455),oa=a(95931),ca=a(93627),da=a(44335),ua=a(3436),ma=a(55926);const pa=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:n,index:l,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:m,usePlayContextItem:x,durationMs:y,shouldRenderDuration:h,internalLink:g}){const{spec:b,logger:f}=(0,_.r)(ia.i,{data:{position:l,reason:"",uri:t}}),A=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),j=(0,qt.W)(),{addItems:R}=(0,Xt.x)(A),{isActive:C,isPlaying:k,triggerPlay:T,togglePlay:v}=x({uid:e,uri:t,index:l}),S=(0,s.useCallback)((()=>{f.logInteraction(b.addButtonFactory().hitAddToPlaylist({playlist:A,itemToBeAdded:t})),R([t],{after:"end"}),j({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:A})}),[f,b,A,t,R,j]),I=(0,tt.T)(t),{isPlayable:E,isAnyArtistBanned:w}=(0,Qt.g)(t,{isPlayable:u,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:N}=(0,ua.M)(r.map((e=>e.uri))),P=r.map((e=>e.name)).join(d.Ru.getSeparator()),{badges:L,hasBadges:U}=(0,Zt.b)({downloadAvailability:I,isExplicit:n,isMOGEFRestricted:m}),B=h&&y,M=r.map((e=>e.name)).join(d.Ru.getSeparator()),O=(0,ma.c)();return(0,p.jsx)(Jt.pZ,{value:"row",index:l,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(ra.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(Kt.w,{uri:t,contextUri:c,isPlayable:E,isAnyArtistBanned:w,handleArtistBanUndoClick:N,onTriggerPlay:(e,t)=>{T({loggingParams:t})},isActive:C,ageRestricted:m,index:l,ariaRowIndex:l,dragMetadata:{name:a,createdBy:P},spec:b,className:ea.A.isRecommendedTrackListRow,isExplicit:n,children:[(0,p.jsxs)(Vt.U,{ariaColIndex:0,children:[(0,p.jsx)(Ft.u,{uri:t,src:i,onClick:(e,t)=>{v({loggingParams:t})},isLocked:!1,isPlaying:k,isActive:C,playAriaLabel:d.Ru.get("tracklist.a11y.play",a,P),spec:b}),(0,p.jsxs)($t.l,{children:[g&&O?(0,p.jsx)(Ye.N,{to:t,className:ea.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Ht.p,{titleText:a,children:a})}):(0,p.jsx)(Ht.p,{titleText:a,children:a}),U&&(0,p.jsxs)(Dt.P,{children:[L.explicit&&(0,p.jsx)(Xe.U,{}),L.download&&(0,p.jsx)(Yt._,{}),L.nineteen&&(0,p.jsx)(Gt.q,{className:ea.A.nineteen,size:16})]}),(0,p.jsx)(ca.p,{children:(0,p.jsx)(na.l,{artists:r,spec:b})})]})]}),(0,p.jsx)(Wt.o,{ariaColIndex:1,children:(0,p.jsx)(Ot.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:b,children:o.name})}),(0,p.jsx)(Wt.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(zt.l,{ariaColIndex:3,children:[B?(0,p.jsx)(da.d,{uri:t}):null,B?(0,p.jsx)(la.P,{duration:y,dataTestId:"render-duration"}):(0,p.jsx)(Ie.n,{size:"small",onClick:S,"aria-label":d.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:d.Ru.get("playlist.extender.button.add")}),B?(0,p.jsx)(oa.Y,{menu:(0,p.jsx)(ra.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:d.Ru.get("more.label.track",a,M)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),xa=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(pa,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});var ya=a(27012);const ha=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:u})=>{let m=e;const x=(e=>e.map((e=>{if(e.type===q.c.TRACK||e.type===q.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_m)(t)?q.c.TRACK:q.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(ee.P))(e),{draggable:y,onDragStart:h}=(0,ya.P)(),{addItems:g}=(0,Xt.x)(i),f=(0,s.useCallback)((e=>{g([e],{after:"end"})}),[g]),{usePlayContextItem:A}=(0,st.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:x}]},{featureIdentifier:"search"}),j=(0,s.useCallback)(((e,t)=>(0,p.jsx)(sa,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),R=(0,s.useCallback)(((e,t)=>e.type===q.c.ARTIST?(0,p.jsx)(Mt,{isRTL:a,index:t,searchResult:e,onClick:()=>{l({navType:xe.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===q.c.EPISODE?(0,p.jsx)(aa,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:A},e.uri):e.type===q.c.TRACK?(0,p.jsx)(xa,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:A},e.uri):e.type===q.c.ALBUM?(0,p.jsx)(Lt,{index:t,isRTL:a,searchResult:e,onClick:()=>{l({navType:xe.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(ut,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,onAddClick:f,showSeparator:0!==t},e.uri)),[a,l,f,i,A]);if(""===o)return(0,p.jsx)("div",{className:ht.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:ht.A.emptyStateContainer,children:[(0,p.jsx)(n.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.Ru.get("search.empty-results-text")})]});if(t?.navType===xe.SEARCH){const t=[{type:xe.ARTISTRESULTS,label:d.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:xe.ALBUMRESULTS,label:d.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:xe.TRACKRESULTS,label:d.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===q.c.AUDIOBOOK?(0,p.jsx)(ut,{contextUri:i,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,onAddClick:f,draggable:y,onDragStart:t=>{h(t,{itemUris:[e.uri],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(bt,{renderRow:R,searchResults:m,renderSeeAllRow:j,seeAllXList:t})}return t?.navType===xe.ALBUM?(0,p.jsx)(yt,{renderRow:R,searchResults:m}):t?.navType===xe.ARTIST?(0,p.jsx)(gt,{renderRow:R,searchResults:m}):t?.navType===xe.ALBUMRESULTS?(0,p.jsx)(ft,{renderRow:R,searchResults:m}):t?.navType===xe.TRACKRESULTS?(0,p.jsx)(jt,{renderRow:R,searchResults:m}):t?.navType===xe.ARTISTRESULTS?(0,p.jsx)(At,{renderRow:R,searchResults:m}):null};var ga=a(37178),ba=a(81834);const fa=({playlistUri:e,hideInlineCuration:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(),c=(0,ga.W)(),{level:u,changeTerm:m,goBack:x,navToEntity:y,navToResults:h,term:g}=(()=>{const[e,t]=(0,s.useReducer)(ye,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,s.useContext)(ba.j),{spec:f,logger:A,UBIFragment:j}=(0,_.r)(B.e,{}),R=(0,s.useCallback)((e=>{m(e),e?A.logInteraction(f.searchBarFactory().keyStrokeFilter()):A.logInteraction(f.searchBarFactory().hitClearFilter())}),[m,A,f]);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case xe.SEARCH:try{if(!l||l.query!==g&&""!==g){const t=await ue(b,g,a);e&&o(t)}else""===g&&r([])}catch{r([])}l&&r(l.topResults);break;case xe.ARTISTRESULTS:l&&r(l?.artists);break;case xe.ALBUMRESULTS:l&&r(l?.albums);break;case xe.TRACKRESULTS:l&&r(l?.tracks);break;case xe.EPISODERESULTS:l&&r(l?.episodes);break;case xe.ALBUM:try{const t=await me(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case xe.ARTIST:try{const t=await pe(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,g,l,b,a]),(0,p.jsxs)(j,{spec:f,children:[(0,p.jsxs)("section",{className:ht.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:ht.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.E,{as:"h1",className:ht.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(ve,{placeholder:a?d.Ru.get("playlist.curation.search_placeholder-booklists"):d.Ru.get("playlist.curation.search_placeholder"),onChange:R})})]}),(0,p.jsx)("button",{className:ht.A.playlistInlineCurationCloseButton,onClick:t,children:(0,p.jsx)(O.M,{"aria-label":d.Ru.get("close")})})]}),null!==u&&u.navType!==xe.SEARCH?(0,p.jsxs)("button",{className:ht.A.playlistInlineCurationBackButton,onClick:()=>x(),children:[c?(0,p.jsx)(D.V,{"aria-label":d.Ru.get("navbar.go-back"),className:ht.A.icon}):(0,p.jsx)(F.g,{"aria-label":d.Ru.get("navbar.go-back"),className:ht.A.icon}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:ht.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(ha,{playlistUri:e,term:g,level:u,resultList:i,navToEntity:y,navToResults:h,isRTL:c,isBooklist:a})})]})};var Aa=a(89702),ja=a(28506),Ra=a(20616);const Ca=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),ka=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(Ca.Provider,{value:{getReference:a,setReference:i},children:e})};var Ta=a(29074);const va=(e,t,a)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,s.useContext)(w.cL),c=o.order!==xt.H.NONE,{draggable:d,onDragStart:m}=(0,ya.P)({itemIds:[l],itemUris:[n],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:x}=(0,s.useContext)(Ca),y=(0,s.useCallback)((e=>{p({uri:n,uid:l}),m(e)}),[m,p,l,n]),h=(0,i.wA)(),g=(0,Ta.m)(),j=(0,s.useCallback)(((e,a)=>{const s=e[b.fl.AUDIOBOOKS];if(!s)return;const i=x();i?a===f.Nz.BEFORE?g.move(t,[i],{before:{uri:n,uid:l}}):g.move(t,[i],{after:{uri:n,uid:l}}):a===f.Nz.BEFORE?h((0,u.io)(t,s,{before:{uri:n,uid:l}})):h((0,u.io)(t,s,{after:{uri:n,uid:l}})),p(null)}),[t,h,x,g,p,l,n]),R=a&&!c?[b.fl.AUDIOBOOKS]:[];return{...(0,A.A)({uri:n,id:l,allowedMimeTypesByDropPosition:{[f.Nz.BEFORE]:R,[f.Nz.AFTER]:R},onDrop:j}),onDragStart:y,draggable:d}},Sa="bg5inM_sdkHpYWiFf7Id",Ia="DyW2LAm9YDcCkcdM0eeP",Ea=()=>(0,p.jsx)("div",{className:Ia}),wa=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i,highlightText:r}){const{className:n,dropPosition:l,draggable:o,...c}=va(e,t,a);return(0,p.jsxs)(Ra.W,{className:n,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[l===f.Nz.BEFORE&&(0,p.jsx)(Ea,{}),(0,p.jsx)(ut,{book:e,contextUri:t,index:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:n,draggable:o,showSeparator:0!==i,highlightText:r,...c}),l===f.Nz.AFTER&&(0,p.jsx)(Ea,{})]})}));var Na=a(96533),Pa=a(87091),La=a(13295),Ua=a(43863),Ba=a(89273);const Ma=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,Ta.m)(),c=(0,M.v7)(),{filter:d}=(0,s.useContext)(E.g),{sortState:u}=(0,s.useContext)(w.cL),{contentsOptions:m}=(0,Na.$)(u,d),[,x]=(0,N.z)(),y=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:(0,Ua.pW)(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:h,nrValidItems:g,invalidateCache:b}=(0,La.E)({nrItems:a,fetch:y,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{x(g)}),[g,x]),(0,Ba.H)(e,b);const f=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),A=(0,s.useCallback)(((e,t)=>t===qe.u.TITLE||t===qe.u.SUBTITLE?(0,p.jsx)(ja.M,{searchWords:[d],textToHighlight:e}):e),[d]),j=(0,s.useCallback)(((t,a)=>{const s=h(t);return s?(0,p.jsx)(wa,{contextUri:e,item:s,canEdit:i,canRemove:n,index:t,highlightText:A},s.uri):f(`${a}px`)}),[i,n,e,h,A,f]),R="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:Sa,children:(0,p.jsx)(Aa.R,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":g,"aria-colcount":6,children:(0,p.jsx)(ka,{children:(0,p.jsx)(Pa.M,{totalCount:g,estimatedHeight:200,renderItem:j,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:R})})})})};var _a=a(76633),Oa=a(92026),Da=a(22555),Fa=a(36072),$a=a(78592);let za=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const Va={[za.DOWN]:()=>(0,p.jsx)(Da.y,{size:"small",className:ea.A.statusChangeDown}),[za.UP]:()=>(0,p.jsx)(Fa.J,{size:"small",className:ea.A.statusChangeUp}),[za.NEW]:()=>(0,p.jsx)($a.Z,{className:ea.A.notificationDot}),[za.EQUAL]:()=>null},Wa=({status:e,number:t})=>{const a=Va[e];return(0,p.jsxs)("div",{className:ge()(ea.A.rowChartStatus),children:[(0,p.jsx)(n.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var Ha=a(68118),Ka=a(87619),qa=a(591),Qa=a(67799),Ya=a(92347),Ga=a(12499),Ja=a(87732),Xa=a(33593);const Za=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:n,isPlayable:l,uid:o,index:c,contextUri:u,imgUrl:m,statusChange:x,playCount:y,usePlayContextItem:h,isCompactMode:g}){const{spec:b}=(0,_.r)(ia.i,{data:{position:c,reason:"",uri:e}}),f=(0,_a.w)(),A=(0,ma.c)(),{isActive:j,isPlaying:R,triggerPlay:C,togglePlay:k}=h({uid:o,uri:e,index:c}),T=(0,tt.T)(e),{isPlayable:v,isAnyArtistBanned:S}=(0,Qt.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,artistUris:s?.map((e=>e.uri))}),{unBanArtists:I}=(0,ua.M)(s?.map((e=>e.uri))??[]),{badges:E,hasBadges:w}=(0,Zt.b)({downloadAvailability:T,isExplicit:n,isMOGEFRestricted:r}),N=s?.map((e=>e.name)).join(d.Ru.getSeparator())||"";return(0,p.jsx)(Jt.pZ,{value:"row",index:c,children:(0,p.jsx)(Oe.h,{menu:(0,p.jsx)(ra.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(Kt.w,{uri:e,contextUri:u,index:c,onTriggerPlay:(e,t)=>{C({loggingParams:t})},isActive:j,ariaRowIndex:c+1,isPlayable:v,isAnyArtistBanned:S,handleArtistBanUndoClick:I,ageRestricted:r,dragMetadata:{name:t,createdBy:N},allowedDropTypes:[],spec:b,isCompactMode:g,isExplicit:n,children:f.map((({columnType:r,options:n},l)=>{const o=(0,Ja.y)(l,r,f);return(0,p.jsx)(o,{ariaColIndex:l,children:(()=>{switch(r){case xt.$.INDEX:return(0,p.jsx)(qa.$,{uri:e,className:ea.A.rowMarkerChartStatus,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,N),onClick:(e,t)=>{v&&k({loggingParams:t})},isPlaying:R,isActive:j,spec:b,children:x?(0,p.jsx)(Wa,{number:c+1,status:x}):(0,p.jsx)(Qa.a,{children:c+1})});case xt.$.TITLE_AND_ARTIST:case xt.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ha.e,{src:m}),(0,p.jsxs)($t.l,{children:[(0,p.jsx)(Ht.p,{titleText:t,children:t}),w&&(0,p.jsxs)(Dt.P,{children:[E.download&&(0,p.jsx)(Yt._,{}),E.explicit&&(0,p.jsx)(Xe.U,{}),E.nineteen&&(0,p.jsx)(Gt.q,{className:ea.A.nineteen,size:16})]}),(0,p.jsx)(ca.p,{children:(0,p.jsx)(na.l,{artists:s,spec:b})})]})]});case xt.$.TITLE:return(0,p.jsxs)(Ka.q,{children:[A?(0,p.jsx)(Ye.N,{to:e,className:ea.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Ht.p,{titleText:t,children:t})}):(0,p.jsx)(Ht.p,{titleText:t,children:t}),w&&(0,p.jsxs)(Dt.P,{children:[E.download&&(0,p.jsx)(Yt._,{}),E.explicit&&(0,p.jsx)(Xe.U,{}),E.nineteen&&(0,p.jsx)(Gt.q,{className:ea.A.nineteen,size:16}),E.hasAssociatedVideo&&(0,p.jsx)(Xa.l,{})]})]});case xt.$.ARTIST:case xt.$.AUTHOR:return(0,p.jsx)(Ga.Y,{children:s&&(0,p.jsx)(Oa.E,{artists:s,spec:b})});case xt.$.PLAYS:return(0,p.jsx)(Ya.Y,{playcount:y});case xt.$.ALBUM_OR_PODCAST:case xt.$.ALBUM:return(0,p.jsx)(Ot.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:b,children:i.name});case xt.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(da.d,{uri:e,spec:b}),!n?.hideDuration&&(0,p.jsx)(la.P,{duration:a}),(0,p.jsx)(oa.Y,{menu:(0,p.jsx)(ra.P,{uri:e,albumUri:i?.uri,artists:s}),label:d.Ru.get("more.label.track",t,N),spec:b})]});case xt.$.ADDED_BY:case xt.$.ADDED_AT:case xt.$.RELEASE_DATE:case xt.$.ACTIONS:case xt.$.ALBUM_OR_SHOW:case xt.$.EVENT_DATE:case xt.$.EVENT_INFO:case xt.$.CONCERT:case xt.$.CONCERT_VENUE:case xt.$.ADD:case xt.$.BPM:case xt.$.KEY:case xt.$.VIBE:return null;default:(0,te.d)(r)}return null})()},`column-${l}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var es=a(63096);const ts={column:null,order:xt.H.NONE},as=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,Ta.m)(),{filter:d,setFilter:u}=(0,s.useContext)(E.g),m=(0,s.useRef)(null),x=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,Ba.H)(a,x);const{sortState:y,setSortState:h}=(0,s.useContext)(w.cL),g=(0,s.useCallback)((e=>{h((0,I.So)(e,y))}),[y,h]);(0,s.useEffect)((()=>{h(ts),u("")}),[a,u,h]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(y),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,y,d]),f=(0,s.useCallback)(((e,t)=>{const s=(0,es.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Za,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),A=(0,_a.w)(),j=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Jt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(pt.S4,{ariaLabel:e,hasHeaderRow:!0,columns:A,sortableColumns:l,sortState:y,onSort:g,renderRow:f,resolveItem:j,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:ea.A.chartTrackList},a)})}));var ss=a(21743),is=a(80809),rs=a(33712),ns=a(72671),ls=a(98655);function os(e,t){return e.build().withHost(ns.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var cs=a(99644),ds=a(62021);const us="BagEpNps_J8R2QuHRZMa",ms="bjB8WZd0Ev30ZFbiScDm",ps=(0,s.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,s.useContext)(M.bi),{ref:a,inView:i}=(0,ss.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,ls.Z)(os,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),n=(0,s.useRef)(null),l=function(e){const[t,a]=(0,ds.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,cs.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:us,style:{"--last-height":`${l}px`},ref:a,children:r&&(0,p.jsx)(rs.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:ms,children:r.map(((e,t)=>(0,p.jsx)(is.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var xs=a(12662),ys=a(88260),hs=a(60038),gs=a(45664),bs=a(40675),fs=a(21951),As=a(83812),js=a(35895),Rs=a(67239),Cs=a(86568),ks=a(93523),Ts=a(91488),vs=a(99701),Ss=a(44398),Is=a(47422),Es=a(17509);const ws={bottomEnd:Es.dw.topStart,top:Es.dw.bottom},Ns=({visible:e,onHide:t,placement:a,children:s,label:i})=>(0,p.jsx)(Ss.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{children:(0,p.jsx)(Is.A,{arrow:ws[a],colorSet:"announcement",onClose:t,children:i})}),children:s});var Ps=a(60965),Ls=a(55221),Us=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(Us||{});const Bs=({uri:e,label:t,onClick:a,size:s=Us.md})=>{const{onCopyLink:i}=(0,Ls.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,Ps.R)();return(0,p.jsx)(Ns,{visible:r,onHide:()=>n(!1),label:d.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(vs.Zp,{label:t,children:(0,p.jsx)(ks.H,{onClick:e=>{a?.(e),i?.()},iconOnly:Ts.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var Ms=a(68448),_s=a(87621),Os=a(30416);const Ds=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,_.r)(Ms.E,{}),o=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:ht.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(_s.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(Os.d,{columns:[...a],isBooklist:r})]})}));var Fs=a(89849),$s=a(18576),zs=a(29997);const Vs=()=>null;var Ws=a(48460),Hs=a(29368),Ks=a(39566),qs=a(38501),Qs=a(83327);const Ys=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:n,isBooklist:l,isConcert:o=!1,backgroundColor:c,tracklistDomRef:u,sortableColumns:m,className:x}){const{metadata:{uri:y,name:h,unfilteredTotalLength:g,isOwnedBySelf:b,isRootlistable:f,canPlay:A,isPublished:j,totalLength:R}}=e,C=(0,Ks.n)(),k=(0,rt.s)(),T=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),v=t.canFilter&&g>0,S=t.canSort&&g>0,I=g>0,E=(0,zs.X)(),w=(0,Ws.x)(),[N,P]=(0,Ze.A)(y),L=(0,s.useCallback)((async()=>{try{await P(!N)}catch{}}),[N,P]),U=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:y,shareId:""});k.logInteraction(e)}),[a,k,y]),B=(0,Cs.d$)(),{spec:M,logger:O}=(0,_.r)(xs.e,{data:{uri:y}});(0,s.useEffect)((()=>{B&&O.logImpression(M.impression())}),[B,O,M]);const D=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();N?e=t.hitUnfollow({itemToBeUnfollowed:y}):(e=t.hitFollow({itemToBeFollowed:y}),B&&O.logInteraction(M.hitFollow({itemToBeFollowed:y}))),k.logInteraction(e),L()}),[a,L,N,k,y,B,O,M]),F=(0,Hs.j)(),$=v&&S;return(0,p.jsx)(ys.E,{backgroundColor:c,className:x,children:(0,p.jsxs)(hs.S,{children:[A&&!l?(0,p.jsx)(js.D,{onClick:n,isPlaying:i,size:F,uri:y,ariaPlayLabel:d.Ru.get("playlist.a11y.play",h),ariaPauseLabel:d.Ru.get("playlist.a11y.pause",h)}):null,E&&R>0&&!l&&(0,p.jsx)(Qs.r,{spec:T,children:(0,p.jsx)(Fs.Y,{shuffleContext:$s.b.playlistActionBar,entityName:h,contextUri:y,isActive:r,activationPlacement:"bottomEnd",size:F})}),!b&&f?(0,p.jsx)(fs.e,{children:(0,p.jsx)(Le.M,{isAdded:N,onClick:D,size:F,condensed:!0})}):null,!l&&I&&(0,p.jsx)(gs.f,{uri:y,isFollowing:N,canDownload:I,onClick:(e,t)=>(0,Je.Qv)(t,a.downloadButtonFactory(),k,y),onFollow:L,size:F,condensed:!0}),e.metadata.permissions?.canAdministratePermissions&&C&&(0,p.jsx)(Bs,{onClick:U,label:d.Ru.get("permissions.invite-collaborators",h),uri:y,size:F}),(o||l)&&(0,p.jsx)(Me.w,{uri:y,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:U,size:F}),w&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Vs,{uri:y,playlistMetadata:e.metadata})}),(0,p.jsx)(_e.b,{onShow:()=>(0,Je.R2)(a,k),menu:(0,p.jsx)(bs.W,{uri:y,isPublished:j}),children:(0,p.jsx)(Be.e,{label:d.Ru.get("more.label.context",h),size:F})}),$?(0,p.jsx)(Qs.r,{spec:a,children:(0,p.jsx)(Ds,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:m})}):(0,p.jsx)("div",{className:ht.A.leadingSlot,children:(0,p.jsx)(As.u,{property:qs.mA2,renderNewExperience:()=>(0,p.jsx)(Rs.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var Gs=a(3520),Js=a(50671);const Xs=e=>{const t=(0,rt.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Js.t)(a);return(0,p.jsxs)("div",{className:ht.A.concertsFooter,children:[(0,p.jsx)(Ye.N,{to:"/concerts",className:ht.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:ht.A.promoRow,ref:i,children:[(0,p.jsx)(n.E,{as:"h2",variant:"bodyMediumBold",className:ht.A.promoTitle,children:d.Ru.get("concerts.find_more")}),(0,p.jsx)(Gs.v,{as:"span",selected:!0,children:d.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:ht.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:ht.A.disclaimerContainer,children:(0,p.jsx)(n.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Zs=a(12835),ei=a(550),ti=a(82610);const ai="multiUserAttributionDisplayNamesV2";function si(e){return(0,Ua.Jy)(e)||(0,Ua.xp)(e)}function ii(e){return(0,Ua.Jy)(e)||(0,Ua.xp)(e)||(0,Ua.pW)(e)}const ri=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:x,isBooklist:y,canEdit:h,scrollToUid:g,feedbackPath:f,deleteFeedbackPath:A,usePlayContextItem:j,tracklistRef:R,tracklistDomRef:C,canRemove:k,spec:T,initialItems:v,isCompactMode:S=!1,sortableColumns:P,hasSpotifyAudiobooks:L}){const U=(0,rt.s)(),B=(0,l.NC)(qs.LX5),M=(0,Ta.m)(),{filter:_}=(0,s.useContext)(E.g),{sortState:O,setSortState:D}=(0,s.useContext)(w.cL),F=(0,s.useRef)((()=>{})),[$,z]=(0,s.useState)([]),V=(0,i.wA)(),W=(0,_a.w)(),H=(0,s.useCallback)((()=>{R?.current&&R.current.update()}),[R]);(0,Ba.H)(a,H);const K=(0,s.useCallback)(((e,t)=>{D((0,I.So)(e,O)),U.logInteraction(T.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[D,O,U,T]),q=(0,s.useCallback)((e=>{F.current(),M.remove(a,e)}),[M,a]),Q=(0,s.useCallback)(((e,t,a=!1)=>{k&&(F.current=t,e.length>1&&!a?z(e):q(e))}),[k,q]);(0,s.useEffect)((()=>{R?.current&&g&&R.current.scrollToItem({uid:g})}),[g,R]);const Y=(0,s.useCallback)((async(e,t)=>{const s=await M.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(O),filter:_,decorateFormatListData:!!f||o||m});return{items:s.items,totalLength:s.totalLength}}),[a,M,O,_,f,o,m]),G=(0,s.useCallback)(((e,t,s)=>{if(!R?.current)return;const i=R.current.getRows()[t];i&&(U.logInteraction(T.dragSort()),s===Kt.Y.Before?M.move(a,e,{before:i}):M.move(a,e,{after:i}))}),[R,U,T,M,a]),J=(0,s.useCallback)(((e,t,s)=>{if(!R?.current)return;const i=R.current.getRows()[t];i&&(U.logInteraction(T.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===Kt.Y.Before?V((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):V((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[R,U,T,a,V]),X=(0,s.useCallback)(((e,t)=>{let s,i=null;(0,Ua.xp)(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):(0,Ua.Jy)(e)?(i=e.album,s=e.album?.images):(0,Ua.pW)(e)&&(s=e.images);const l=(0,es.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];h&&O.order===xt.H.NONE&&(o=y?[b.fl.AUDIOBOOKS]:[b.fl.TRACKS,b.fl.LOCAL_TRACKS,b.fl.EPISODES,...L?[b.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!(0,Ua.xp)(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;(0,Ua.xp)(e)&&e.podcastSubscription.isPaywalled&&!u?g=!0:si(e)?g=e.isPlayable&&!d:(0,Ua.pW)(e)&&(g=!0);let R=!1;(0,Ua.xp)(e)&&e.podcastSubscription.isPaywalled?R=!0:(0,Ua.pW)(e)&&(R=e.isLocked&&!e.isOutOfMarket);const C=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[ai]?ai:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],s=t&&(0,c.Qjr)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:l[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let T=0;si(e)?T=e.duration.milliseconds:(0,Ua.pW)(e)&&(T=e.durationMs||0);let v="";ii(e)&&(v=e.name);let I=null;return(0,Ua.xp)(e)&&(I=e.gatedEntityRelations),(0,p.jsx)(ti.W,{isCompactMode:S,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:T,isPaywalled:R,isUserSubscribed:u,name:v,artists:(0,Ua.Jy)(e)?e.artists:void 0,albumOrShow:i,isExplicit:(ii(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Ua.Jy)(e)&&e.hasAssociatedVideo&&B)??!1,isMixedMedia:n,isLocal:(0,Ua.Jy)(e)&&e.isLocal,addedBy:C,hasDecoratedAddedBy:M.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ua.xp)(e)&&e.release.isoString||"",isMOGEFRestricted:((0,Ua.Jy)(e)||(0,Ua.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:G,onInsert:J,usePlayContextItem:j,allowedDropTypes:o,feedbackPath:f,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:A,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:k,playlistName:r,isConcert:x,concertsCount:String(e.formatListAttributes?.concert_uris?.split(",").length??0),concertURI:e.formatListAttributes?.concert_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.concert_subtitle,authorName:(0,Ua.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Ua.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ua.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h,bpm:(0,Ua.Jy)(e)?e.bpm:void 0,musicKey:(0,Ua.Jy)(e)?e.key:void 0,gatedEntityRelations:I,isBanned:!!(0,Ua.Jy)(e)&&e.isBanned},t+e.uri)}),[h,y,O.order,m,S,a,B,n,M,G,J,j,f,A,k,r,x,L]),Z=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ee]=(0,N.z)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Jt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(pt.S4,{isCompactMode:S,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:W,sortableColumns:P,sortState:O,onSort:K,onRemove:Q,renderRow:X,resolveItem:Z,nrTracks:t,fetchTracks:Y,limit:100,canFetchAllTracks:M.getCapabilities().canFetchAllTracks,outerRef:R,outerDomRef:C,tracks:v,isConcertPlaylist:x,onNrValidItemsChange:ee,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(ei.F,{title:d.Ru.get("playlist.remove_from_playlist",r),isOpen:$.length>0,tracks:$,onClose:e=>{e.stopPropagation(),z([])},onRemove:q})]})}));var ni=a(37488);var li=a(47362),oi=a(6102);const ci={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},di=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},ui=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===ci.USER&&(t=di(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,a)=>(e[r[a]]=n[a],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var mi=a(20150),pi=a(66834),xi=a(16273);const yi=new $.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),hi=3e5;function gi(e,t){return["list-extender",e,t]}const bi=(e,t,a=10,i)=>{const r=2*a,n=3*a,l=(0,xi.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>l.getQueriesData({queryKey:gi(e,t),stale:!1}).at(0)?.[1]??[])),x=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:y,logger:h}=(0,_.r)(o.K,{data:{uri:e}}),g=(0,s.useMemo)((()=>y.recommendedFactory()),[y]);(0,pi.e)(mi.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===mi.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===mi.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==mi.sP.ADD&&a.operation!==mi.sP.REMOVE||l.invalidateQueries({queryKey:gi(e,t)}))}));const b=(0,s.useRef)(!0);(0,s.useEffect)((()=>(b.current||(p([]),u(e),x.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),a=c.current,s=gi(d,t),o=b.current&&0===x.current.length;(o?l.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:hi,gcTime:hi}):i(d,x.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&x.current.length?x.current=[]:x.current=[...x.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(s,t)}))}b.current=!1}),[r,n,d,m.length,l,i,t]);const f=(0,s.useCallback)((()=>{if(y){const e=g.refreshButtonFactory().hitRefreshContent();h.logInteraction(e)}p((e=>e.slice(a)))}),[h,g,y,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},fi=s.memo((function({uri:e,canEdit:t}){const{recommendations:a,refresh:i}=((e,t=10)=>{const a=(0,Ta.m)(),{request:i}=(0,s.useContext)(ba.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),n=await i(yi,{uris:r});return n?.data?.podcasts?.map((e=>"Audiobook"===e.__typename?G(e):null)).filter(ee.P)??[]}),[a,i]);return bi(e,"book",t,r)})(e),{draggable:r,onDragStart:l}=(0,ya.P)(),{addItems:o}=(0,Xt.x)(e),c=(0,oi.p)(),u=(0,s.useCallback)((e=>{o([e],{after:"end"})}),[o]);return c?a?.length&&a.length>0?(0,p.jsxs)("div",{className:ht.A.recommendedTrackList,"data-testid":"recommended-books",children:[(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:d.Ru.get("playlist.extender.songs.in.playlist")})]})}),c&&(0,p.jsxs)(p.Fragment,{children:[a.map(((a,s)=>a?(0,p.jsx)(ut,{contextUri:e,index:s,featureIdentifier:"playlist_recommendations",book:a,sharingInfo:a.sharingInfo,isRecommendation:!0,draggable:r,onAddClick:t?u:void 0,onDragStart:e=>{l(e,{itemUris:[a.uri],itemMimeTypes:[b.fl.AUDIOBOOKS],dragLabelText:a.name})},showSeparator:0!==s},s):null)),(0,p.jsx)(ks.H,{className:ht.A.refreshButton,onClick:i,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ht.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:d.Ru.get("web-player.playlist.booklist-recommender-dsa-message")})]})})})}));var Ai=a(65292);const ji=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,Ai.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,st.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:q.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),n=(0,s.useCallback)(((a,s)=>{const n=a.duration;return(0,p.jsx)(pa,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:n,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),l=(0,s.useMemo)((()=>[xt.$.TITLE_AND_ARTIST,xt.$.ALBUM,xt.$.ADDED_AT,xt.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(pt.S4,{ariaLabel:d.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:mt.qq,tracks:c,renderRow:n,resolveItem:o,columns:l},`${e}-recommended`)})),Ri=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,Ta.m)(),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>ui(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return bi(e,"track",t,i)})(e),l=!t||0===t,o=(0,oi.p)(),c=l?d.Ru.get("playlist.extender.empty.playlist"):d.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:ht.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ji,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(ks.H,{className:ht.A.refreshButton,onClick:r,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:ht.A.recommendedTrackList,children:(0,p.jsx)("div",{className:ht.A.top,children:(0,p.jsxs)("div",{className:ht.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:ht.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var Ci=a(13889);class ki{async deleteChanges(e){throw new Error("Method not implemented.")}async getChanges(e){throw new Error("Method not implemented.")}async applyChanges(e,t){throw new Error("Method not implemented.")}async applyChangesNewPlaylist(e,t){throw new Error("Method not implemented.")}async previewChanges(e,t){throw new Error("Method not implemented.")}async getTrackPairTransitionMetadata(e){throw new Error("Method not implemented.")}maybeApplyAutoTuna(e){throw new Error("Method not implemented.")}turnOnMix(e){throw new Error("Method not implemented.")}turnOffMix(e){throw new Error("Method not implemented.")}}const Ti=(0,s.createContext)(null);const vi=function({children:e}){const t=(0,s.useMemo)((()=>new ki),[]);return(0,p.jsx)(Ti.Provider,{value:t,children:e})},Si=()=>{};var Ii=a(61147),Ei=a(58337),wi=a(65698),Ni=a(48655),Pi=a(48994),Li=a(25182);const Ui=["meta+v"];var Bi=a(36061),Mi=a(50674),_i=a(43855),Oi=a(44898),Di=a(57764),Fi=a(56970),$i=a(43329);const zi=s.lazy((()=>a.e(4789).then(a.bind(a,20788)))),Vi=s.lazy((()=>Promise.resolve().then(a.bind(a,91978)))),Wi=s.lazy((()=>Promise.all([a.e(4151),a.e(3632)]).then(a.bind(a,84578)))),Hi=s.lazy((()=>Promise.all([a.e(4151),a.e(9718)]).then(a.bind(a,89753)))),Ki=new Set([]),qi=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:x,totalLength:y,unfilteredTotalLength:h,isOwnedBySelf:R,hasEpisodes:S,canAdd:O,canRemove:D,formatListData:F,hasDateAdded:$,collaborators:V,isPublished:W,hasSpotifyAudiobooks:H,hasSpotifyTracks:K},contents:{items:q}}=e,{spec:Q,logger:Y,UBIFragment:G}=(0,_.r)(o.K,{data:{uri:a}});Si(a,e.metadata);const J=(0,Ks.n)(),X=(0,l.NC)($i.Cf,{loadingValue:!1}),Z=(0,Ci.m)(),{isCompactMode:ee}=(0,Ii.a)(),te=s.useMemo((()=>Q.headerFactory()),[Q]),ae=s.useMemo((()=>Q.tracklistFactory()),[Q]),se=s.useMemo((()=>Q.actionBarFactory()),[Q]),ie="chart"===F?.type,re="concerts-near-you"===F?.type&&X,ne="live-streams"===F?.type,le=["blend","celebrity-blend","friends-mix"].indexOf(F?.type||"")>-1,oe=[K,S,H].filter(Boolean).length>1,ce=!oe&&!!H&&(0,li.R)(q),de="artistsets"===F?.type||"this-is"===F?.attributes["editorial.series"],ue=F?.attributes||{},me=ue.header_image_url_desktop||ue.image_url||null,pe=O&&D,{isInlineCurationVisible:xe,showInlineCuration:ye,hideInlineCuration:he}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),r=(0,s.useRef)(a),{scrollNodeChildRef:n}=(0,s.useContext)(M.bi),{spec:l,logger:o}=(0,_.r)(B.e,{}),c=(0,s.useCallback)((()=>{i(!0),o.logInteraction(l.findMoreButtonFactory().hitUiReveal())}),[o,l]),d=(0,s.useCallback)((()=>{i(!1),o.logInteraction(l.closeButtonFactory().hitUiHide())}),[o,l]);return(0,s.useEffect)((()=>{n&&!r.current&&a&&n.current?.scrollIntoView({block:"end",behavior:"smooth"}),r.current=a}),[n,a]),{isInlineCurationVisible:a,showInlineCuration:c,hideInlineCuration:d}})(pe,h),{productState:ge}=(0,i.d4)(Bi.Ht),fe=!!ge?.ads&&parseInt(ge.ads,10)>0,Ae="spotify"===e.metadata.owner.username,je=(0,i.wA)(),Re=(0,r.wQ)(),Ce=(0,r.zy)(),ke=(0,l.NC)(qs.vQ3,{loadingValue:!1}),Te=(0,l.NC)(qs.UPi,{loadingValue:!1}),ve=(0,L.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*z.i,enabled:de}).data?.playlistV2,Se="Playlist"===ve?.__typename?ve.artistsOnTour?.[0]:null,Ie=Te&&"Playlist"===ve?.__typename?ve.concerts?.items.map((e=>e.data)):null,Ee=Ie?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}})),we="POP"!==Re?new URLSearchParams(Ce.search).get("uid"):null,{filter:Ne}=(0,s.useContext)(E.g),{sortState:Pe}=(0,s.useContext)(w.cL),Le=(0,Ta.m)(),Ue=(0,s.useRef)(null),Be=(0,s.useRef)(null),[Me]=x,_e=(0,Ei.H)(null!==me?me:Me?.url||null),{contentsOptions:Oe}=(0,Na.$)(Pe,Ne),{isPlaying:De,isActive:Fe,togglePlay:$e,usePlayContextItem:ze}=(0,st.P)((0,Oi.A)(a,Oe),{featureIdentifier:"playlist"}),Ve=(0,s.useCallback)((()=>{const e=(0,Je.$I)({isPlaying:De,isActive:Fe,spec:se.playButtonFactory(),logger:Y,uri:a});$e({loggingParams:e})}),[De,Fe,$e,se,Y,a]);!function(e){const t=(0,wi._)(),a=(0,be.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,Li.f)(Ui,a),(0,Pi.x)(Ni.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_h)(e))).filter((e=>null!==e&&((0,c.U_m)(e)||(0,c.gHQ)(e)||(0,c.PkR)(e))));if(t.length>0&&O){const e=t.map((e=>e.toURI())),s=Ue.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};je((0,u.io)(a,e,i))}}),[O,je,a]));const We=(0,s.useCallback)((e=>{const t=[...e[b.fl.TRACKS]||[],...e[b.fl.LOCAL_TRACKS]||[],...e[b.fl.EPISODES]||[],...e[b.fl.ALBUMS]||[],...e[b.fl.AUDIOBOOKS]||[]];t.length>0&&O&&(Y.logInteraction(Q.dragAddToPlaylist({playlist:a,itemToBeAdded:t[0]})),je((0,u.io)(a,t)))}),[O,Y,Q,a,je]),He=!Ae&&0!==h,Ke=!ce&&J&&(pe&&!xe||He),qe=ce&&J&&(pe&&!xe||He),Qe=R&&J,Ye=!pe&&!ce&&!He&&J,Ge=(0,v.e4)(),Xe=(0,v.IL)(),Ze=(0,v.mn)(),et=(0,v.wW)(),tt=!(S||H||0===h||Ae||Ye),at=tt&&Ge,it=tt&&Xe,rt=tt&&Ze,nt=tt&&et,lt=(0,C.x)(),ot=`${a}|[]`;(0,s.useEffect)((()=>{rt||nt||at||it||lt(ot)}),[ot,lt,rt,nt,at,it]);const ct=e.metadata.owner.displayName!==e.metadata.owner.username&&e.metadata.owner.displayName?d.Ru.get("internal-link-recommender.more-by-name",{name:e.metadata.owner.displayName}):d.Ru.get("internal-link-recommender.more-by-listener"),dt=V?.count??1,[ut]=(0,N.z)(),mt="plays"===ue.rank_type,pt=(0,s.useMemo)((()=>(0,I.Ey)({isMixedMedia:oe,hasEpisodes:S,hasSpotifyAudiobooks:H,hasDateAdded:$,isLive:ne,isConcert:re,isBlend:le,nrCollaborators:dt,isBooklist:ce,isCompactMode:ee,isChart:ie,showPlayCount:mt,isExtraColumnsEnabled:Z})),[oe,S,H,$,ne,re,le,dt,ce,ee,ie,mt,Z]),xt=(0,s.useMemo)((()=>{let e;return e=Le.getCapabilities().canSort?ce?new Set(w.dh):new Set((0,I.zq)(pt)):Ki,e}),[pt,ce,Le]),yt=ce&&!ee,gt=(0,s.useMemo)((()=>{const e=ce?[b.fl.AUDIOBOOKS]:[b.fl.TRACKS,b.fl.LOCAL_TRACKS,b.fl.EPISODES,b.fl.ALBUMS];return{[f.Nz.ON]:O?e:[]}}),[O,ce]),{className:bt,dropPosition:ft,...At}=(0,A.A)({allowedMimeTypesByDropPosition:gt,onDrop:We});return(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(U.c,{artistOrShow:e.metadata.owner.displayName,title:m,uri:a,entityType:U.p.PLAYLIST}),(0,p.jsx)(j.Q,{children:(0,Fi.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Ae})}),(0,p.jsxs)("section",{role:"presentation",className:ht.A.playlist,"data-testid":"playlist-page","data-test-uri":a,...At,children:[(0,p.jsx)(Zs.x,{metadata:e.metadata,isPlaying:De,isPublished:W,totalItems:ut,togglePlay:Ve,backgroundColor:_e,spec:te,className:bt}),(0,p.jsxs)("div",{className:ht.A.playlistContent,children:[(0,p.jsx)(Ys,{playlist:e,capabilities:t,spec:se,isPlaying:De,isActive:Fe,togglePlay:Ve,isBooklist:ce,backgroundColor:_e,tracklistDomRef:Be,isConcert:re,sortableColumns:xt,className:bt}),(0,p.jsxs)("div",{className:bt,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(zi,{formatListData:e.metadata.formatListData})}),!Te&&Se?.upcomingEventsCount?(0,p.jsx)(Vi,{artistConcertsUri:Se.uri||"",artistImageUrl:Se.imageUrl||"",artistName:Se.title||"",spec:Q}):null,Te&&!!Se&&Ee&&Ee.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Wi,{liveEvents:Ee,artistConcertsUri:Se.uri||"",artistName:Se.title||"",spec:Q})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[fe?(0,p.jsx)(g,{playlistUri:a}):null,fe&&Ae?(0,p.jsx)(Hi,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&ke&&(0,p.jsxs)("div",{className:ht.A.noBooklistSupportContainer,children:[(0,p.jsx)(n.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),y>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:yt?(0,p.jsx)(Ma,{initialItems:q,contextUri:a,nrItems:y,canEdit:pe,canRemove:D,ariaLabel:m}):(0,p.jsx)(G,{spec:ae,children:(0,p.jsx)(P.a,{columns:pt,children:ie?(0,p.jsx)(as,{ariaLabel:m,nrTracks:y,playlistUri:a,scrollToUid:we,usePlayContextItem:ze,tracklistDomRef:Be,sortableColumns:xt,isCompactMode:ee},a):(0,p.jsx)(ri,{ariaLabel:m,nrTracks:y,playlistUri:a,playlistName:m,isMixedMedia:oe,isLive:ne,isConcert:re,isBlend:le,isBooklist:ce,canEdit:pe,scrollToUid:we,feedbackPath:ue["dislike-endpoint"],deleteFeedbackPath:ue["delete-endpoint"],usePlayContextItem:ze,tracklistRef:Ue,tracklistDomRef:Be,canRemove:D,spec:ae,initialItems:q,isCompactMode:ee,sortableColumns:xt,hasSpotifyAudiobooks:H??!1},a)})})}),Qe&&(0,p.jsx)(s.Suspense,{fallback:null,children:xe?(0,p.jsx)(fa,{playlistUri:a,hideInlineCuration:he,isBooklist:ce}):(0,p.jsx)("button",{className:ht.A.seeMore,onClick:ye,children:(0,p.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:d.Ru.get("playlist.curation.find_more")})})}),(at||rt)&&(0,p.jsx)(k.M,{uri:a}),rt&&(0,p.jsx)(T.S,{uri:a,title:ct}),Ke?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(Ri,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:pe})}):null,qe?(0,p.jsx)(fi,{uri:a,canEdit:pe}):null,Ye&&(0,p.jsx)(ps,{uri:a}),(it||nt)&&(0,p.jsx)(k.M,{uri:a}),nt&&(0,p.jsx)(T.S,{uri:a,title:ct})]})]})]}),re&&(0,p.jsx)(Xs,{spec:Q.footerSectionFactory()})]})]})})),Qi=s.memo((function({uri:e}){const t=(0,Ta.m)().getCapabilities(),{filter:a}=(0,s.useContext)(E.g),{sortState:i}=(0,s.useContext)(w.cL),{metadataOptions:r,contentsOptions:n}=(0,Na.$)(i,a),{data:l,isLoading:o,isError:c}=(0,Di.W)(e,r,n);return(e=>{const t=(0,ni.j)(),a=(0,Ta.m)(),i=(0,s.useRef)(!1);(0,s.useEffect)((()=>{t&&i.current&&a.resync(e,{maybe:!0}),t||(i.current=!0)}),[t,a,e])})(e),!l||o?(0,p.jsx)(S.LoadingPage,{hasError:c,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(R.Z,{uri:e}):(0,p.jsx)(qi,{playlist:l,capabilities:t})})),Yi=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Pse)((e||"").split("&")[0]).toURI();return(0,p.jsx)(_i.P,{surface:Mi.u.PLAYLIST,uris:[t],children:(0,p.jsx)(w.sn,{uri:t,children:(0,p.jsx)(E.s,{uri:t,children:(0,p.jsx)(N.S,{children:(0,p.jsx)(vi,{children:(0,p.jsx)(Qi,{uri:t})})})})})})}},58337:(e,t,a)=>{a.d(t,{H:()=>l});var s=a(30758),i=a(85505),r=a(47095),n=a(37948);function l(e=null,t=i.l0o){const{backgroundColor:a}=(0,r.oI)(),l=(0,r.as)(),o=(0,n.z)(e);return(0,s.useEffect)((()=>(l((0,r.Mo)(o)),()=>{l((0,r.Hf)())})),[o,l]),a||t}},43855:(e,t,a)=>{a.d(t,{P:()=>s.P});var s=a(62361)},19546:(e,t,a)=>{a.d(t,{X:()=>i});var s=a(35035);function i(e){return[s.kw.YES,s.kw.DOWNLOADING,s.kw.WAITING].includes(e)}},56970:(e,t,a)=>{a.d(t,{L$:()=>o,Q2:()=>c,hV:()=>l,j2:()=>n,pr:()=>u,qc:()=>r,rO:()=>d});var s=a(16157),i=a(13155);const r=({albumArtists:e,albumName:t,albumType:a,shouldLocalize:r,i18n:n})=>{if(!a||!t||!e)return"";const l=a!==s._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(a):a,o=(0,i.C)(a),c=`${t} - ${l} by ${e} | Spotify`,d=n.get("i18n.meta.album.title",t,o,e);return r?d:c},n=({artistName:e})=>e?`${e} | Spotify`:"",l=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",o=({episodeOrChapterName:e,showOrAudiobookName:t,type:a})=>e&&t?`${e} - ${t} | ${a} on Spotify`:"",c=({playlistName:e,userName:t,isSpotifyOwned:a=!1})=>{if(!e||!t)return"";return`${e}${a?"":` - playlist by ${t}`} | ${a?"Spotify Playlist":"Spotify"}`},d=({i18n:e,trackArtistsList:t,trackName:a,shouldLocalize:s,disabled:i=!1})=>{if(!t||!a)return"";let r=`${a} - song and lyrics by ${t} | Spotify`,n=e.get("i18n.meta.track-lyrics.title",a,t);return i&&(r=`${a} - song by ${t} | Spotify`,n=e.get("i18n.meta.track.title",a,t)),s?n:r},u=({i18n:e,shouldLocalize:t})=>{const a=e.get("i18n.meta.home.title");return t?a:"Spotify - Web Player: Music for everyone"}},27062:(e,t,a)=>{a.d(t,{A:()=>s});const s={entityRow:"ci11tAmTK1LnxThQkXPy",actions:"_2sJPwAAp1wY1Ftke6iFe",visibleAction:"yuNzasMLs7hvemHI4d8Q",active:"dNymWGRudMrTI6ot9FBg",title:"luWcW9hkbLdFxRQB0yGb",body:"abYR6tZoE7BdzThmWTb0",footer:"GOcKQxqNMhGzbGiAXBig",separator:"yFQjuDAhri_egM1pwn70",badges:"tykXaR_9v2wPQNrdPkK6"}},7060:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map