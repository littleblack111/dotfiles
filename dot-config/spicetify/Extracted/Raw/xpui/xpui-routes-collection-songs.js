"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8828],{45664:(e,t,l)=>{l.d(t,{M:()=>S,f:()=>A});var s=l(30758),a=l(97500),r=l.n(a),n=l(93523),i=l(1820),o=l(46607),c=l(31417),d=l(50324),u=l(622),g=l(35035);var m=l(99701),p=l(50342),f=l(94141),y=l(6038),h=l(48014),x=l(13787),k=l(69285);const b="x-downloadButton-DownloadButton",C="x-downloadButton-button",T="x-downloadButton-cancelDownload",w="x-downloadButton-progress";var I=l(86070);let S=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const R=e=>{const{currentTarget:t,detail:l}=e;l>0&&t&&t.blur()},A=({uri:e,isFollowing:t,onFollow:l,size:a=S.sm,className:A,onClick:j=(()=>{}),showUpsell:D=!0,canDownload:v=!0,condensedAll:F,condensed:E})=>{const[P,N]=(0,s.useState)(!1),{capability:L,availability:M,addDownload:_}=(0,x.$)(e,v),O=(0,h.V)(),U=(0,k.e)(e);((e,t)=>{const l=(0,d.i)(),a=(0,s.useRef)(!1);(0,s.useEffect)((()=>{e===g.kw.DOWNLOADING&&!1===a.current&&(a.current=!0,l.say(c.Ru.get("download.downloading",t.totalItems)))}),[l,e,t]);const r=(0,u.Z)(e);(0,s.useEffect)((()=>{r===g.kw.DOWNLOADING&&e===g.kw.YES&&(a.current=!1,l.say(c.Ru.get("download.complete")))}),[l,r,e])})(M,U);const B=(0,s.useCallback)((e=>{e.preventDefault(),L===g.vs.NO_PERMISSION?j(e,g.NV.NO_PERMISSION):(!1===t?(l(),N(!0)):_(),j(e,g.NV.ADD)),R(e)}),[_,L,t,j,l]),$=(0,s.useCallback)((t=>{t.preventDefault(),O(e),R(t),j(t,g.NV.REMOVE)}),[e,O,j]);if((0,s.useEffect)((()=>{!0===P&&!0===t&&(_(),N(!1))}),[t,P,_]),M===g.kw.YES)return(0,I.jsx)(m.Zp,{label:c.Ru.get("download.remove"),children:(0,I.jsx)(n.H,{className:A,onClick:$,iconOnly:i.F,semanticColor:"textBrightAccent",size:a,"aria-label":c.Ru.get("download.remove"),"aria-checked":!0,condensedAll:F,condensed:E})});if(L===g.vs.NO_CAPABILITY||L===g.vs.NO_PERMISSION_HIDE)return null;if(L===g.vs.NO_PERMISSION)return D?(0,I.jsx)("div",{className:r()(b,A),children:(0,I.jsx)(y.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,I.jsx)(f.z,{children:(0,I.jsx)("span",{children:c.Ru.get("download.upsell")})}),renderInline:!1,children:(0,I.jsx)("div",{children:(0,I.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,I.jsx)(n.H,{onClick:B,iconOnly:o.i,size:a,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:F,condensed:E})})})})}):null;if(M===g.kw.NO)return(0,I.jsx)(m.Zp,{label:c.Ru.get("download.download"),children:(0,I.jsx)(n.H,{className:A,onClick:B,iconOnly:o.i,size:a,"aria-label":c.Ru.get("download.download"),"aria-checked":!1,condensedAll:F,condensed:E})});let z;switch(a){case S.xs:z=16;break;case S.sm:z=24;break;default:z=32}return(0,I.jsxs)("div",{className:r()(T,A),role:"switch","aria-checked":!0,children:[(0,I.jsx)(m.Zp,{label:c.Ru.get("download.cancel"),children:(0,I.jsx)("button",{style:{height:z,width:z},className:r()(C,A),onClick:$,"aria-label":c.Ru.get("download.cancel")})}),(0,I.jsx)("span",{className:r()(w),children:(0,I.jsx)(p.C,{"aria-valuetext":c.Ru.get("progress.downloading-tracks"),percentage:U.percentage,size:z})})]})}},51872:(e,t,l)=>{l.d(t,{s:()=>f});var s=l(30758),a=l(97500),r=l.n(a),n=l(3520),i=l(54925),o=l(17287),c=l(22949);const d="IVnoxrO3iL_tz5ULI8g_";var u=l(86070);const g={marginBlockEnd:0,willChange:"transform, opacity"},m=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:l,resetFilterIds:a,toggleFilterId:i,className:o,innerRef:c,onFilterClick:m,index:p=0,...f})=>{const y=f.selected,h=(0,s.useCallback)((()=>{if(!e)return a(),void m(null,!1,p);m(e,!!y,p),i(e)}),[e,a,i,m,y,p]),x=(0,s.useCallback)((e=>{e.detail>1||l||h()}),[l,h]);return(0,u.jsx)(n.v,{...f,className:r()(o,{[d]:l}),onClick:x,selectedColorSet:"invertedLight",secondary:y&&!t,style:g,ref:c,tabIndex:-1})},p=({filterId:e=null,isPlaceholder:t,resetFilterIds:l,toggleFilterId:a,className:n,innerRef:o,onFilterClick:c,index:m=0,...p})=>{const f=p.selected,y=(0,s.useCallback)((()=>{if(!e)return l(),void c(null,!1,m);c(e,!!f,m),a(e)}),[e,l,a,c,f,m]),h=(0,s.useCallback)((e=>{e.detail>1||t||y()}),[t,y]);return(0,u.jsx)(i.m,{...p,"aria-label":p["aria-label"],className:r()(n,{[d]:t}),onClick:h,style:g,ref:o,tabIndex:-1})},f=(0,s.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:l,toggleFilterId:a,resetFilterIds:r,onFilterClick:n,ariaLabel:i,clearBtnAriaLabel:d,className:g,applyLightThemeControls:f=!1}){const y=!(l||t),h=y?e:[...l??[],...t??[]],x=(0,s.useRef)(null),k=(0,s.useCallback)((()=>{(0,c.MS)(x.current,x.current?.nextElementSibling instanceof HTMLElement?x.current?.nextElementSibling:null),r()}),[r]);return 0===h.length?null:(0,u.jsxs)(o.FN,{className:g,ariaLabel:i,applyLightThemeControls:f,children:[!!l?.length&&(0,u.jsx)(p,{resetFilterIds:k,toggleFilterId:a,onFilterClick:n,"aria-label":d??i,innerRef:x}),h.map(((e,t)=>{const s=l?.includes(e),i=0===t;return(0,u.jsx)(m,{filterId:e.id,isPrimaryFilter:i,isPlaceholder:y,onFilterClick:n,resetFilterIds:r,toggleFilterId:a,selected:s,index:t,children:e.getName()},e.id)}))]})}))},47667:(e,t,l)=>{l.d(t,{b:()=>w});var s=l(30758),a=l(31417),r=l(38682),n=l(550),i=l(39795),o=l(95446),c=l(76633),d=l(6966),u=l(82610),g=l(96614),m=l(4266),p=l(41457),f=l(44672),y=l(20784),h=l(33329),x=l(13719),k=l(63096),b=l(86070);const C=new Set(o.gc),T=new Set([]),w=s.memo((function({nrTracks:e,collectionUri:t,initialItems:l,uri:w,sortable:I=!0,scrollToUri:S,usePlayContextItem:R,outerDomRef:A,spec:j,isCompactMode:D=!1,tagFilter:v}){const F=(0,y.f)(),E=(0,s.useRef)(null),{filter:P}=(0,s.useContext)(i.g),N=(0,s.useRef)((()=>{})),[L,M]=(0,s.useState)([]),{sortState:_,setSortState:O}=(0,s.useContext)(o.cL),U=(0,h.s)(),B=(0,c.w)(),$=(0,s.useCallback)(((e,t)=>{e===m.$.ADDED_AT?O({column:m.$.ADDED_AT,order:_.order===m.H.ASC?m.H.DESC:m.H.ASC}):O((0,r.So)(e,_)),j&&U.logInteraction(j.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[U,O,_,j]);(0,s.useEffect)((()=>{E.current&&S&&E.current.scrollToItem({uri:S})}),[S]);const z=(0,s.useCallback)((e=>{const t=e.map((e=>e.uri));N.current(),F.remove({uris:t})}),[F]),V=(0,s.useCallback)(((e,t)=>{N.current=t,e.length>1?M(e):z(e)}),[z]),[,H]=(0,d.z)(),K=(0,s.useCallback)((async(e,t)=>{const l=await F.getTracks({offset:e,limit:t,uri:w,sort:(0,p.c)(_),filters:[P??null,v??null].filter(x.P)}),s=l?.totalLength??0;return{items:l?.items??[],totalLength:s}}),[P,v,F,_,w]),q=(0,s.useCallback)(((e,l)=>{const s=(0,k.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,b.jsx)(u.W,{index:l,contextUri:t,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:R,allowedDropTypes:[],isDisliked:!1,playlistName:a.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:D,hasAssociatedVideo:e.hasAssociatedVideo},l+e.uri)}),[t,R,D]),X=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uri})),[]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.pZ,{value:"liked-songs-tracklist",children:(0,b.jsx)(g.S4,{ariaLabel:a.Ru.get("sidebar.liked_songs"),hasHeaderRow:!0,columns:B,sortableColumns:F.getCapabilities().canSortTracksAndEpisodes&&I?C:T,sortState:_,onSort:$,renderRow:q,resolveItem:X,onRemove:V,nrTracks:e,fetchTracks:K,limit:50,canFetchAllTracks:F.getCapabilities().canFetchAllItems,outerRef:E,outerDomRef:A,tracks:l,onNrValidItemsChange:H,isCompactMode:D,columnPersistenceKey:"liked-songs-tracklist"},t)}),(0,b.jsx)(n.F,{title:a.Ru.get("remove_from_your_liked_songs"),isOpen:L.length>0,tracks:L,onClose:e=>{e.stopPropagation(),M([])},onRemove:z})]})}))},50866:(e,t,l)=>{l.d(t,{d:()=>c});var s=l(97500),a=l.n(s),r=l(97701),n=l(67174);const i="UyzJidwrGk3awngSGIwv";var o=l(86070);const c=({durationMs:e,className:t,displaySeconds:l})=>{const{hours:s,minutes:c,seconds:d}=(0,r.S)(e);return l=!1!==l&&!s&&d,(0,o.jsx)("span",{className:a()(i,t),children:(0,n.j)({h:s,m:c,s:l?d:0})})}},50324:(e,t,l)=>{l.d(t,{i:()=>r});var s=l(30758);class a{constructor(e={}){this.settings={level:e.level||"polite",parent:e.parent||document.body,idPrefix:e.idPrefix||"live-region-",delay:e.delay||0},this.currentRegion=document.createElement("span")}say(e,t=this.settings.delay){this.clearNode(),this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());const l="assertive"!==this.settings.level?"status":"alert";this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",l),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout((()=>{this.currentRegion.textContent=e}),t)}clearNode(){const e=this.settings.parent.querySelector(`[id^="${this.settings.idPrefix}"]`);e&&this.settings.parent.removeChild(e)}}const r=({delay:e,idPrefix:t,level:l,parent:r}={})=>{const n=(0,s.useMemo)((()=>new a({delay:e,idPrefix:t,level:l,parent:r})),[e,t,l,r]);return(0,s.useEffect)((()=>()=>{n.clearNode()}),[n]),n}},41457:(e,t,l)=>{l.d(t,{c:()=>i});var s=l(38682),a=l(13357),r=l(34939);const n={[r.nw.ADDED_AT]:a.Sw.ADDED_AT,[r.nw.ADDED_BY]:null,[r.nw.ALBUM]:a.Sw.ALBUM_NAME,[r.nw.ARTIST]:a.Sw.ARTIST_NAME,[r.nw.DURATION]:null,[r.nw.TITLE]:a.Sw.NAME,[r.nw.SHOW_NAME]:null,[r.nw.PUBLISH_DATE]:null},i=e=>{const t=(0,s.Xt)(e);if(!t)return;const l=n[t.field],a=t.order;return l&&a?{field:l,order:a}:void 0}},85751:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ze});var s=l(30758),a=l(62411),r=l(85387),n=l(97106),i=l(14343),o=l(88775),c=l(22726),d=l(31417),u=l(15292),g=l(58757),m=l(92202),p=l(39795),f=l(95446),y=l(6966),h=l(60690),x=l(4266),k=l(88260),b=l(60038),C=l(45664),T=l(83812),w=l(35895),I=l(67239),S=l(68448),R=l(87621),A=l(30416),j=l(76633),D=l(21549),v=l(11860),F=l(86070);const E=s.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,D.r)(S.E,{}),a=(0,s.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),r=(0,s.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),n=(0,j.w)().filter((({columnType:e})=>f.gc.includes(e))).map((({columnType:e})=>e));return(0,F.jsxs)("div",{className:v.A.searchBoxContainer,children:[(0,F.jsx)(s.Suspense,{fallback:null,children:(0,F.jsx)(R.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:r})}),(0,F.jsx)(A.d,{columns:n})]})}));var P=l(97500),N=l.n(P),L=l(51872),M=l(16273),_=l(50486),O=l(24909),U=l(38501),B=l(26184),$=l(20784),z=l(99248),V=l(62021);const H="liked-songs-tags";function K(){const e=(0,i.NC)(U.cLA),[t,l]=(0,V.x)("liked-songs-current-tag-filter",null);return[e?t:null,l]}var q=l(33329);const X="q_yjkS1y6URH4Xm7gZfw",Z=e=>({id:e.filter,getName:()=>e.name,ubiId:e.name}),W=(0,s.memo)((({spec:e,nrTracks:t})=>{const{tags:l,currentTag:a,setCurrentTag:r}=function({nrTracks:e}){const t=(0,$.f)(),l=(0,M.jE)(),[a,r]=K(),[n,i]=(0,s.useState)([]),{data:o}=(0,_.I)({queryKey:[H],queryFn:()=>t?.getTracksFilterTags(),staleTime:0,gcTime:864e5,placeholderData:O.rX,refetchOnWindowFocus:!1});(0,s.useLayoutEffect)((()=>{const t=o?.find((e=>e.filter===a));if(!t&&a){if(e>0&&o?.length)return;r(null)}i(o??[])}),[a,r,e,o]);const c=(0,s.useCallback)((({data:{list:e}})=>{e===B.Ir.TRACKS&&l.invalidateQueries({queryKey:[H]})}),[l]);(0,z.l)(B.UV.UPDATE,c);const d=(0,s.useMemo)((()=>n.find((e=>e.filter===a))),[a,n]),u=(0,s.useCallback)((e=>{r(e?.filter??null)}),[r]);return{tags:a||e?n:[],currentTag:d,setCurrentTag:u}}({nrTracks:t}),n=(0,q.s)(),i=(0,s.useCallback)(((t,s,a)=>{let i;if(!t)return i=e.clearButtonFactory().hitClearFilter(),void n.logInteraction(i);const o=l.find((({filter:e})=>e===t));if(!o)return;const c=e.filterChipFactory({identifier:o.name,position:a});s?(i=c.hitClearFilter(),r(null)):(i=c.hitFilter(),o&&r(o)),n.logInteraction(i)}),[n,r,e,l]),o=a?[]:l.map(Z),c=a?[Z(a)]:[];return l.length?(0,F.jsx)(b.S,{children:(0,F.jsx)(L.s,{availableFilters:o,selectedFilters:c,toggleFilterId:()=>{},resetFilterIds:()=>r(null),onFilterClick:i,ariaLabel:d.Ru.get("web-player.liked-songs.liked-songs-filter-tags"),clearBtnAriaLabel:d.Ru.get("web-player.liked-songs.clear-filter"),className:N()(X),applyLightThemeControls:!0})}):null}));var Y=l(47972),G=l(89849),Q=l(29997),J=l(29368),ee=l(35035),te=l(34939),le=l(83327),se=l(43329);const ae="ivuDaTbfBpBewwr39aDQ",re=s.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:l,spec:a,logger:r,backgroundColor:n,canSort:o,canFilter:c}){const{uri:u,name:g,totalLength:m}=e,p=(0,s.useRef)(null),f=(0,s.useMemo)((()=>a.actionBarFactory()),[a]),y=(0,s.useMemo)((()=>f.shuffleButtonContainerFactory()),[f]),h=(0,s.useMemo)((()=>f.filtersFactory()),[f]),x=m>0,S=m>0,R=o&&c,A=(0,Q.X)(),j=(0,s.useCallback)(((e,t)=>{const l=f.downloadButtonFactory();t===ee.NV.ADD?r.logInteraction(l.hitDownload({itemToDownload:u})):t===ee.NV.REMOVE?r.logInteraction(l.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===ee.NV.NO_PERMISSION&&r.logInteraction(l.hitUiReveal())}),[f,r,u]),D=(0,J.j)(),v=(0,i.NC)(U.cLA);return(0,F.jsxs)(k.E,{backgroundColor:n,children:[(0,F.jsxs)(b.S,{children:[S?(0,F.jsx)(w.D,{onClick:t,isPlaying:l,size:D,uri:u,ariaPauseLabel:d.Ru.get("playlist.a11y.pause",g),ariaPlayLabel:d.Ru.get("playlist.a11y.play",g)}):null,A&&(0,F.jsx)(le.r,{spec:y,children:(0,F.jsx)(G.Y,{entityName:g,contextUri:u,activationPlacement:"bottomEnd",size:D})}),(0,F.jsx)(C.f,{uri:u,canDownload:x,isFollowing:!0,onFollow:()=>{},size:D,onClick:j,condensed:!0}),R?(0,F.jsx)(le.r,{spec:f,children:(0,F.jsx)(T.u,{property:U.IZ_,renderNewExperience:()=>(0,F.jsx)("div",{className:ae,children:(0,F.jsx)(Y.d,{sortOptions:[te.nw.TITLE,te.nw.ADDED_AT,te.nw.ARTIST,te.nw.ALBUM,te.nw.DURATION],defaultSortField:te.nw.ADDED_AT,filterPlaceholder:d.Ru.get("playlist.search_in_playlist"),enableViewModeMenu:!0})}),renderOldExperience:()=>(0,F.jsx)(E,{tracklistDomRef:p})})}):(0,F.jsx)("div",{className:ae,children:(0,F.jsx)(T.u,{property:se.mA,renderNewExperience:()=>(0,F.jsx)(I.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),v&&(0,F.jsx)(W,{spec:h,nrTracks:m})]})}));var ne=l(41457),ie=l(82610),oe=l(96614);var ce=l(79098),de=l(59964);var ue=l(91797),ge=l(72187),me=l(61147),pe=l(29074);const fe=({ariaLabel:e,columns:t,columnPersistenceKey:l,renderItem:a,defaultSortField:n})=>{const{playlist:i}=(0,ge.g)(),o=(0,pe.m)(),{canFetchAllTracks:c}=o.getCapabilities(),d=(0,ue.K)(),u=(0,s.useRef)(null),{isCompactMode:g}=(0,me.a)(),m="custom-order"===n;(e=>{const t=(0,r.wQ)(),l=(0,r.zy)(),a="POP"!==t?new URLSearchParams(l.search).get("uid"):null;(0,s.useLayoutEffect)((()=>{e.current&&a&&e.current.scrollToItem({uid:a})}),[a,e])})(u);const{trackListSortState:p,onSort:f}=((e,t)=>{const{sortState:l,setSortState:a}=(0,ce.k)(),r=(0,s.useMemo)((()=>(0,de.Ap)(e,l)),[e,l]),n=(0,s.useCallback)((e=>{a((0,de.hK)(e,r,t))}),[t,a,r]);return{trackListSortState:r,onSort:n}})(t,m),y=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),x=(0,s.useMemo)((()=>new Set((0,de.g6)(t))),[t]);return(0,F.jsx)(h.a,{columns:t,children:(0,F.jsx)(oe.g0,{ariaLabel:e,hasHeaderRow:!0,columns:t,sortableColumns:x,sortState:p,onSort:f,renderRow:a,resolveItem:y,itemsCache:d,canFetchAllTracks:c,isCompactMode:g,columnPersistenceKey:l,outerRef:u},i.metadata.uri+g)})};var ye=l(44672),he=l(43863),xe=l(63096);const ke=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],be=s.memo((function({usePlayContextItem:e}){const{isCompactMode:t}=(0,me.a)(),l=(({isCompactMode:e=!1})=>{const t=[...ke];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:t}),{playlist:{metadata:a}}=(0,ge.g)(),r=(0,s.useCallback)(((l,s)=>{if(!(0,he.Jy)(l))return(0,F.jsx)(F.Fragment,{});const r=(0,xe.g)(l.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,F.jsx)(ie.W,{index:s,contextUri:a.uri,uri:l.uri,isPlayable:l.isPlayable,duration_ms:l.duration.milliseconds,name:l.name,artists:l.artists,albumOrShow:l.album,isExplicit:l.isExplicit,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:l.isLocal,addedBy:[],dateAdded:l.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:l.is19PlusOnly,type:l.type,imgUrl:r?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:e,allowedDropTypes:[],isDisliked:!1,playlistName:d.Ru.get("sidebar.liked_songs"),isOwnedBySelf:!0,isCompactMode:t,hasAssociatedVideo:l.hasAssociatedVideo},s+l.uri)}),[a.uri,e,t]);return(0,F.jsx)(ye.pZ,{value:"liked-songs-tracklist",children:(0,F.jsx)(fe,{ariaLabel:d.Ru.get("sidebar.liked_songs"),columns:l,renderItem:r,columnPersistenceKey:"liked-songs-tracklist",defaultSortField:te.nw.ADDED_AT})})}));var Ce=l(12835),Te=l(84291),we=l(20829),Ie=l(28340),Se=l(44898);const Re=()=>{const{playlist:{metadata:e},contentsOptions:t}=(0,ge.g)(),l=(0,pe.m)(),{canSort:a,canFilter:r}=l.getCapabilities(),{uri:i,name:c,totalLength:m}=e,p=(0,Te.z)("#5038a0"),{spec:f,logger:h}=(0,D.r)(o.k,{data:{uri:i}}),x=s.useMemo((()=>f.headerFactory()),[f]),k=s.useMemo((()=>f.tracklistFactory()),[f]),{isPlaying:b,togglePlay:C,usePlayContextItem:T,isActive:w}=(0,Ie.P)((0,Se.A)(e.uri,t),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),I=()=>{const e=(0,we.$I)({isPlaying:b,isActive:w,spec:f.actionBarFactory().playButtonFactory(),logger:h,uri:i});C({loggingParams:e})},[S]=(0,y.z)();return(0,F.jsxs)("section",{role:"presentation",className:v.A.playlist,"data-testid":"playlist-page",children:[(0,F.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",c)}),(0,F.jsx)(Ce.x,{metadata:{...e,hasSpotifyTracks:!0},totalItems:S,isPlaying:b,togglePlay:I,backgroundColor:p,specLikedSongs:x}),(0,F.jsx)(re,{metadata:e,onClickTogglePlay:I,isPlaying:b,spec:f,logger:h,backgroundColor:p,canSort:a,canFilter:r}),(0,F.jsx)("div",{className:"contentSpacing",children:m>0?(0,F.jsx)(le.r,{spec:k,children:(0,F.jsx)(be,{usePlayContextItem:T})}):(0,F.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,F.jsx)(n.v,{"aria-hidden":"true"})})})]})};var Ae=l(47667),je=l(88308),De=l(60393),ve=l(83785);var Fe=l(61295),Ee=l(36061),Pe=l(93004),Ne=l(52610),Le=l(20164),Me=l(67291),_e=l(13719);function Oe(e,t,l){const s={uri:e};return(0,Ne.qq)(s,t),(0,Le.Pz)(s,l?.map((e=>(0,Me.HI)(e)??null)).filter(_e.P)),s}const Ue=[x.$.INDEX,x.$.TITLE_AND_ARTIST,x.$.ALBUM,x.$.ADDED_AT,x.$.DURATION],Be=({data:e,canFilter:t,canSort:l})=>{const{uri:a,name:i,totalLength:c}=e.metadata,k=(0,s.useRef)(null),b=(0,Te.z)("#5038a0"),[C]=K(),{filter:T}=(0,s.useContext)(p.g),{sortState:w,setSortState:I}=(0,s.useContext)(f.cL),{spec:S,logger:R}=(0,D.r)(o.k,{data:{uri:a}}),A=s.useMemo((()=>S.headerFactory()),[S]),j=s.useMemo((()=>S.tracklistFactory()),[S]);(0,s.useEffect)((()=>{null===w.column&&I({column:x.$.ADDED_AT,order:x.H.DESC})}),[w,I]);const E=(0,r.wQ)(),P=(0,r.zy)(),N="POP"!==E?new URLSearchParams(P.search).get("uri"):null,{isPlaying:L,togglePlay:M,usePlayContextItem:_,isActive:O}=(0,Ie.P)(Oe(a,(0,ne.c)(w),[T,C].filter(_e.P)),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),U=()=>{const e=(0,we.$I)({isPlaying:L,isActive:O,spec:S.actionBarFactory().playButtonFactory(),logger:R,uri:a});M({loggingParams:e})},[B]=(0,y.z)(),{isCompactMode:$}=(0,me.a)(),z=(({isCompactMode:e=!1})=>{const t=[...Ue];return e&&t.splice(t.indexOf(x.$.TITLE_AND_ARTIST),1,x.$.TITLE,x.$.ARTIST),t})({isCompactMode:$});return(0,F.jsx)(h.a,{columns:z,children:(0,F.jsxs)("section",{role:"presentation",className:v.A.playlist,"data-testid":"playlist-page",children:[(0,F.jsx)(u.Q,{children:d.Ru.get("playlist.page-title",i)}),(0,F.jsx)(Ce.x,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:B,isPlaying:L,togglePlay:U,backgroundColor:b,specLikedSongs:A}),(0,F.jsx)(re,{metadata:e.metadata,onClickTogglePlay:U,isPlaying:L,spec:S,logger:R,backgroundColor:b,canSort:l,canFilter:t}),(0,F.jsx)("div",{className:"contentSpacing",children:c>0?(0,F.jsx)(s.Suspense,{fallback:(0,F.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.request-collection-tracks-failure")}),children:(0,F.jsx)(le.r,{spec:j,children:(0,F.jsx)(Ae.b,{nrTracks:c,collectionUri:a,scrollToUri:N,usePlayContextItem:_,outerDomRef:k,spec:j,initialItems:e.contents.items,isCompactMode:$,tagFilter:C})})}):(0,F.jsx)(g.p,{message:d.Ru.get("collection.empty-page.songs-subtitle"),title:d.Ru.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:d.Ru.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,F.jsx)(n.v,{"aria-hidden":"true"})})})]})})},$e=s.memo((function({user:e,uri:t}){const{filter:l}=(0,s.useContext)(p.g),{sortState:a}=(0,s.useContext)(f.cL),[r]=K(),n=function(e,t,l){const a=(0,$.f)(),r=(0,M.jE)(),n=(0,je.U0)((()=>["useLikedSongs",e,l]),[e,l]),{data:i}=(0,_.I)({queryKey:n(),queryFn:()=>a.getTracks(l),gcTime:18e5,placeholderData:O.rX,refetchOnWindowFocus:!1}),o=(0,s.useCallback)((()=>{r.invalidateQueries({queryKey:n()})}),[r,n]);(0,z.l)(B.UV.UPDATE,o);const c=(0,De.$R)(t.id);return c&&i?{metadata:{uri:e,name:c.name,images:c.images,totalLength:i?.totalLength,unfilteredTotalLength:i.unfilteredTotalLength,owner:(0,ve.w)(t)},contents:i}:null}(t,e,{offset:0,limit:25,sort:(0,ne.c)(a),filters:[l,r].filter(_e.P)}),i=(0,$.f)().getCapabilities();return n?(0,F.jsx)(Be,{data:n,canFilter:i.canFilterTracksAndEpisodes&&n.metadata.unfilteredTotalLength>0,canSort:i.canSortTracksAndEpisodes&&n.metadata.unfilteredTotalLength>0}):(0,F.jsx)(m.LoadingPage,{hasError:!1,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})})),ze=()=>{const{user:e}=(0,a.d4)(Ee.Ht);if((0,i.NC)(U.IZ_,{loadingValue:!1}))return(0,F.jsx)(Fe.W,{uri:Pe.DK,children:(0,F.jsx)(Re,{})});if(null===e)return null;const t=(0,c.fHB)(e.id).toURI();return(0,F.jsx)(f.sn,{uri:t,children:(0,F.jsx)(p.s,{uri:t,children:(0,F.jsx)(y.S,{children:(0,F.jsx)($e,{uri:t,user:e})})})})}},622:(e,t,l)=>{l.d(t,{Z:()=>a});var s=l(30758);function a(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map