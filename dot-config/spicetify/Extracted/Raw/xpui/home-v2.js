"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9319],{6328:(e,t,r)=>{r.d(t,{y:()=>g});var a=r(30758),n=r(97500),s=r.n(n),i=r(10502),o=r(57478),l=r(76346);const c="zUf7jtv9GPOKC1jYO5TO",u="T8QLel3PoQTgJUpGYj7Q";var d=r(86070);const m=(0,a.memo)((({isLoading:e})=>{const t=(0,o.h)("shimmer");return(0,d.jsx)("div",{className:l.A.imageContainer,children:(0,d.jsx)("div",{ref:t,className:s()(l.A.imageWrapper,{[u]:e})})})})),p=(0,a.memo)((({isLoading:e})=>(0,d.jsx)("div",{className:s()(l.A.shortcut,c),"data-testid":"skeleton-shortcut",children:(0,d.jsxs)("div",{className:l.A.draggable,children:[(0,d.jsx)(m,{isLoading:e}),(0,d.jsx)("div",{className:s()(l.A.main,l.A.skeletonShortcut),children:(0,d.jsx)(i.Y,{as:"p",variant:"bodyMediumBold",className:l.A.name,isLoading:e})})]})}))),g=(0,a.memo)((({withTitle:e})=>(0,d.jsxs)("section",{className:l.A.shortcuts,children:[e&&(0,d.jsx)("div",{className:l.A.title,children:(0,d.jsx)(i.Y,{as:"h2",variant:"titleMedium",charCount:25,isLoading:!0})}),(0,d.jsx)("div",{className:s()(l.A.grid,{[l.A.gridOf4Columns]:true}),children:[...new Array(8).keys()].slice(0,8).map(((e,t)=>(0,d.jsx)(p,{isLoading:!0},t)))})]})))},2950:(e,t,r)=>{r.r(t),r.d(t,{SKELETON_CARDS_COUNT:()=>de,SKELETON_SHELVES_COUNT:()=>ue,default:()=>ge,getRequestIdForImpressions:()=>me});var a=r(30758),n=r(66108),s=r(97500),i=r.n(s),o=r(14343),l=r(67721),c=r(31417),u=r(15292),d=r(6328),m=r(92202),p=r(15273),g=r(74992),h=r(29195),f=r(67668),v=r(55926),y=r(32963),x=r(38501),C=r(95175);var b=r(62411),j=r(422),P=r(72184),I=r(93523),w=r(94303),L=r(91128),S=r(33329),N=r(21549);const k="iC5KPBY1LYMrQkGPnG8m";var R=r(86070);const A=()=>{const e=(0,b.wA)(),t=(0,S.s)(),{spec:r}=(0,N.r)(w.V,{}),n=(0,a.useCallback)((()=>{e(L.r8.actions.open()),t.logInteraction(r.learnMoreButtonFactory().hitUiReveal())}),[e,t,r]);return(0,R.jsxs)(j.E,{as:"p",semanticColor:"textBase",className:k,children:[(0,R.jsx)(P.p,{size:"small"}),c.Ru.get("home.dsa-message",(0,R.jsx)(I.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:n,children:c.Ru.get("home.dsa-message-link")}))]})};var E=r(58360),T=r(73301),_=r(49971),M=r(44481),D=r(34766),U=r(77567),O=r(98712),F=r(51354),B=r(34990);const H="oncgBAFkunsYPz4icLG7",W="bctyR0DdgoudSxC6j8nw",V="ZlJQ9zbhmUTk2MeTziP7",G="uOT2oirHdJA8NsGlsyA2",z="_0Zn5lYC3o0cU44PBPnvN",$="V2fn7ev3_1mroI9UxjL7",Y="iNxrs2Niil0QTvUYbTxf",K=({isMWP:e})=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:`${G} ${z}`,"aria-hidden":"true",children:[(0,R.jsx)("source",{src:(0,U.b)(`videos/Sw23-${e?"Mobile":"Desktop"}-Left.webm`),type:"video/webm; codecs=vp09.01.41.08"}),(0,R.jsx)("source",{src:(0,U.b)(`videos/Sw23-${e?"Mobile":"Desktop"}-Left.mp4`),type:"video/mp4"})]}),(0,R.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,disablePictureInPicture:!0,className:`${G} ${$}`,"aria-hidden":"true",children:[(0,R.jsx)("source",{src:(0,U.b)(`videos/Sw23-${e?"Mobile":"Desktop"}-Right.webm`),type:"video/webm; codecs=vp09.01.41.08"}),(0,R.jsx)("source",{src:(0,U.b)(`videos/Sw23-${e?"Mobile":"Desktop"}-Right.mp4`),type:"video/mp4"})]})]}),J=({isMWP:e})=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("picture",{children:[(0,R.jsx)("source",{srcSet:(0,U.b)(`images/Sw23-${e?"Mobile":"Desktop"}-Left.webp`),type:"image/webp"}),(0,R.jsx)("source",{srcSet:(0,U.b)(`images/Sw23-${e?"Mobile":"Desktop"}-Left.png`),type:"image/png"}),(0,R.jsx)("img",{className:`${G} ${z}`,src:"",alt:""})]}),(0,R.jsxs)("picture",{children:[(0,R.jsx)("source",{srcSet:(0,U.b)(`images/Sw23-${e?"Mobile":"Desktop"}-Right.webp`),type:"image/webp"}),(0,R.jsx)("source",{srcSet:(0,U.b)(`images/Sw23-${e?"Mobile":"Desktop"}-Right.png`),type:"image/png"}),(0,R.jsx)("img",{className:`${G} ${$}`,src:"",alt:""})]})]}),Q=(0,a.forwardRef)((({linkUri:e,loggedIn:t,isMWP:r,isStatic:a=!1,onClick:n},s)=>{const o=(0,F.y)(),l=(0,B.j)();return(0,R.jsx)("div",{className:H,ref:s,children:(0,R.jsxs)("div",{className:(0,T.Ju)("invertedLight",i()(W,{[V]:r})),children:[a||l?(0,R.jsx)(J,{isMWP:r}):(0,R.jsx)(K,{isMWP:r}),(0,R.jsx)(_.Z,{as:"h2",variant:"brio",semanticColor:"textBase",className:Y,children:t?c.Ru.get("shared.wrapped-banner.title"):c.Ru.get("shared.wrapped-banner.title-loggedout")}),(0,R.jsx)(_.Z,{as:"p",variant:o===O.E.SMALL||r?"mesto":"ballad",semanticColor:"textBase",children:t?c.Ru.get("shared.wrapped-banner.body"):c.Ru.get("shared.wrapped-banner.body-loggedout")}),(0,R.jsx)(M.$,{colorSet:"invertedDark",iconTrailing:D.H,href:e,target:"_blank",size:o===O.E.SMALL||r?"small":"medium",onClick:n,children:c.Ru.get("shared.wrapped-banner.button")})]})})}));var q=r(19329),Z=r(50671);const X=()=>{const e=(0,f.V)(),t=(0,o.NC)(x.ATM),{openURLWithSessionTransfer:r}=(0,q.L)(),{spec:n,logger:s}=(0,N.r)(E.S,{data:{identifier:"wrapped",uri:"spotify:2023wrapped"}}),i=(0,a.useMemo)((()=>n.campaignFactory({identifier:"wrapped",uri:"spotify:2023wrapped"}).bannerFactory({identifier:"home_wrapped_banner",uri:"desktop_banner"})),[n]),l=(0,Z.t)(i),c="https://spotify.com/wrapped",u=(0,a.useCallback)((e=>{s.logInteraction(i.hitUiNavigate({destination:c})),r(c),e.preventDefault()}),[s,r,i]);return(0,R.jsx)(Q,{linkUri:c,loggedIn:!e,onClick:u,ref:l,isStatic:t})};var ee=r(76018),te=r(60836),re=r(72700),ae=r(37410),ne=r(6102),se=r(57666),ie=r(35163),oe=r(56970),le=r(83327),ce=r(5062);const ue=6,de=6,me=e=>{const t="object"==typeof e?.responseIds?e?.responseIds:void 0;return t?.["/home"]?.continuum},pe=(0,a.memo)((({shelfCount:e,cardCount:t})=>(0,R.jsxs)("div",{className:i()(ce.A.homepageContent,"contentSpacing"),children:[(0,R.jsx)(d.y,{withTitle:!1}),[...new Array(e).keys()].map(((e,r)=>(0,R.jsx)(te.f,{withTitle:!0,cardCount:t},r)))]}))),ge=(0,n.mc)((()=>{(0,se.m)("home");const e=(0,o.NC)(x.MX4),t=(0,ae.W)({type:"locale",uri:"home"}),r=(0,o.NC)(x.q4i),{data:n,error:s,loading:d,extensions:b}=(0,re.f)(),j=(0,o.NC)(x.Y_Z),P=(0,o.NC)(x.ATM),I=j||P,w=!(0,ne.p)(),{spec:L}=(0,N.r)(l.Y,{data:{identifier:"home",uri:"spotify:home",reason:me(b)??""}});(()=>{const e=(0,o.NC)(x.ojr),t=(0,h.vh)(),r=(0,v.c)(),n=(0,f.V)();(0,a.useEffect)((()=>{const a={category:"unauth_home_exposures",action:"unauth_home_page_visit",variant:e,label:"dwp",os:(0,y.f)(),sp_t:(0,C.v8)("sp_t")};r&&n&&t.send((0,g.r)(a))}),[e,r,t,n])})();const S=(0,a.useRef)(null);if((0,p.b)(S),d)return(0,R.jsx)("section",{className:i()(ce.A.home,e?ce.A.homepageWithCarousels:ce.A.homepage),"data-testid":"home-page",children:(0,R.jsx)(pe,{shelfCount:ue,cardCount:de})});if(null!==s)return(0,R.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")});const k=n?.home;return"HomeResponsePayload"!==k?.__typename?(0,R.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")}):0===k.sectionContainer.sections.totalCount||0===k.sectionContainer.sections.items.length?((0,ie.Jy)(new Error("Empty response from pathfinder"),"Home"),(0,R.jsx)(m.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error.generic")})):(0,R.jsxs)(le.r,{spec:L,children:[(0,R.jsx)(u.Q,{children:(0,oe.pr)({i18n:c.Ru,shouldLocalize:t})}),(0,R.jsx)("section",{className:i()(ce.A.home,e?ce.A.homepageWithCarousels:ce.A.homepage),"data-testid":"home-page",children:(0,R.jsxs)("div",{className:i()(ce.A.homepageContent,"contentSpacing"),ref:S,children:[I&&(0,R.jsx)(X,{}),w&&(0,R.jsx)(A,{}),(0,R.jsx)(ee.g,{spec:L,greeting:k.greeting?.transformedLabel??null,container:k.sectionContainer,enableFeedBaseline:r})]})})]})}),{name:"Home"})},68461:(e,t,r)=>{r.d(t,{Q:()=>mt});var a=r(14343),n=r(96216),s=r(90124),i=r(66108),o=r(97500),l=r.n(o),c=r(33945),u=r(22726),d=r(31417),m=r(73043),p=r(31026),g=r(30758),h=r(85387),f=r(18716),v=r(61118),y=(r(99270),r(38157)),x=r(75830),C=r(10994),b=r(12864),j=r(95264),P=r(81162),I=r(90694),w=r(5765),L=r(97106),S=r(25910),N=r(80752),k=r(16157);const R=e=>{switch(e){case k.r7.Album:return P.I;case k.r7.Artist:return I.r;case k.r7.Playlist:return w.e;case k.r7.Track:return L.v;case k.r7.Video:return S.B;default:return N.d}},A=e=>{const t=(0,u.o_h)(e);if(t)return{href:t.toURLPath(),isExternalTarget:!1};return URL.canParse(e)&&new URL(e).host.includes("open.spotify.com")?{href:e,isExternalTarget:!0}:{href:e,isExternalTarget:!1}};var E=r(72671),T=r(98822),_=r(62021),M=r(86070);const D=(0,g.createContext)({onSetDisliked:()=>{},isDislikedInLocalStorage:!1}),U=({children:e,promotionUri:t})=>{const[r,a]=(0,_.x)(`home-promotion-disliked:${t}`,!1);return r?null:(0,M.jsx)(D.Provider,{value:{onSetDisliked:()=>a(!0),isDislikedInLocalStorage:r},children:e})};var O=r(20829),F=r(6837),B=r(46186),H=r(24533),W=r(28340),V=r(33329);const G="vM8M5NM7DIyeDgnEvDwt",z="nMEsN3cKwfOWwnhr6ORE",$="vvyeNsGyrEOq4WPTy_7i",Y=()=>{},K=e=>"PromotionResponseWrapper"===e.content?.__typename&&"PromotionDefaultNative"===e.content.data.__typename,J=({promotionSectionItem:e,spec:t})=>{const r=(0,V.s)(),a=(0,h.Zp)(),n=e.content.data,s=t.promotionItemFactory({identifier:"default_native",uri:n.target}),{copyUri:i,iconActions:o,libraryUri:l,playUri:c,notInterestedUri:u}=(0,g.useMemo)((()=>(e=>{let t,r,a,n;const s=[];return e.forEach((e=>{e.type!==k.j3.Navigate&&e.target&&e.type&&(e.type===k.j3.Play&&(t=e.target),e.type===k.j3.AddToLibrary&&(r=e.target),e.type===k.j3.Share&&(a=e.target),e.type===k.j3.NotInterested&&(n=e.target),s.push({target:e.target,type:e.type}))})),{iconActions:s,notInterestedUri:n,copyUri:a,libraryUri:r,playUri:t}})(n.actions)),[n.actions]),[m,p]=(0,H.A)(l??""),{setState:P,Icon:I}=(0,B.Q)(m?j.t.CURATED:j.t.UNCURATED,j.A),{isPlaying:w,togglePlay:L,isActive:S}=(0,W.P)({uri:c??""},{featureIdentifier:"home_promotion"}),N=c?()=>{const e=(0,O.$I)({isPlaying:w,isActive:S,spec:s.playButtonFactory({uri:c}),logger:r,uri:c});L({loggingParams:e})}:Y,{onCopyLink:_}=(0,F.L)({sharingInfo:null,uri:i??"",interactionData:{intent:"share",type:"click"}}),{href:U,isExternalTarget:G}=A(n.target),{onNotInterested:K}=(e=>{const{onSetDisliked:t,isDislikedInLocalStorage:r}=(0,g.useContext)(D),a=(0,T.A)(),[n,s]=(0,g.useState)(r?"INIT":"SUCCESS");return{isMarkedNotInterested:r||"SUCCESS"===n,onNotInterested:(0,g.useCallback)((async()=>{if(s("PENDING"),e)try{await a.build().withHost(E.L1).withMethod("POST").withPath(`feedback/v1/feedback/home-promotion/dislike?uri=${encodeURIComponent(e)}&reason=local`).withEndpointIdentifier("feedback/v1/feedback/home-promotion/dislike").withoutMarket().send(),t(!0)}catch(e){s("ERROR")}}),[e,a,t])}})(u),J=(0,g.useCallback)((()=>{l&&(P(m?j.t.UNCURATED:j.t.CURATED),m?r.logInteraction(s.saveButtonFactory({uri:l}).hitRemoveLike({itemNoLongerLiked:l})):r.logInteraction(s.saveButtonFactory({uri:l}).hitLike({itemToBeLiked:l})),p(!m))}),[m,l,r,s,P,p]),Q=(0,g.useCallback)(((e,t)=>{r.logInteraction(s.hitUiNavigate({destination:n.target})),G||(t.preventDefault(),a(U))}),[s,r,n.target,U,G,a]),q=(0,g.useCallback)((()=>{i&&(r.logInteraction(s.shareButtonFactory({uri:i}).hitCopyToClipboard()),_())}),[s,r,_,i]),Z=(0,g.useCallback)((()=>{u&&(r.logInteraction(s.notInterestedButtonFactory({uri:u}).hitDislike({itemToBeDisliked:u})),K())}),[s,r,K,u]),X=(e=>{if(!e||!("__typename"in e)||"ImageV2"!==e.__typename)return;const t=[];return e.sources.forEach((e=>{t.push(`${e.url} ${e.maxWidth}w`)})),{src:e.imageId,srcSet:t.length>0?t.join(", "):void 0}})(n.mediaSlot?.image?.data);return(0,M.jsx)(v.M,{actions:o,addToLibraryButtonLabel:d.Ru.get("save_to_your_library"),addToLibraryIcon:I,body:n.bodyTranslation?.transformedLabel,className:z,contextMenu:u?(0,M.jsx)(x.b,{menu:(0,M.jsx)(C.W,{children:(0,M.jsx)(b.D,{role:"menuitem",leadingIcon:(0,M.jsx)(f.r,{semanticColor:"textSubdued",size:"small"}),onClick:Z,children:d.Ru.get("promotions.context-menu.not-interested")})}),children:(0,M.jsx)(y.e,{size:y.M.xs,label:d.Ru.get("show_more"),className:$})}):null,href:U,isExternalLinkTargetFn:()=>G,isInLibrary:m,isPlaying:w,mediaSlotImageFallbackIcon:R(n.mediaSlot?.fallbackIcon),mediaSlotImageSrc:X?.src,onAddToLibrary:J,onNavigate:Q,onPlay:N,onShare:q,pauseButtonLabel:d.Ru.get("playlist.a11y.pause",n.titleTranslation?.transformedLabel||""),playButtonLabel:d.Ru.get("playlist.a11y.play",n.titleTranslation?.transformedLabel||""),pretitle:n.pretitleTranslation?.transformedLabel,pretitleSemanticColor:(e=>{switch(e){case k.cf.TextAnnouncement:return"textAnnouncement";case k.cf.TextBrightAccent:return"textBrightAccent";case k.cf.TextNegative:return"textNegative";case k.cf.TextPositive:return"textPositive";case k.cf.TextSubdued:return"textSubdued";case k.cf.TextWarning:return"textWarning";default:return"textBase"}})(n.pretitleSemanticColor),removeFromLibraryButtonLabel:d.Ru.get("remove_from_your_library"),shareButtonLabel:d.Ru.get("mwp.list.item.share"),subtitle:n.subtitleTranslation?.transformedLabel,title:n.titleTranslation?.transformedLabel})};var Q=r(83327),q=r(50671),Z=r(21549),X=r(5062);const ee=(0,i.mc)((({spec:e,section:t,index:r})=>{const a=t.sectionItems.items.find(K),n=e.shelvesFactory(),{spec:s}=(0,Z.r)(c.b,{data:{uri:t.uri,position:r,reason:""},parentAbsoluteLocation:n.getAbsoluteLocation()}),i=s.promotionFactory({uri:a?.uri}),o=a?.content.data.target,g=i.promotionItemFactory({identifier:"default_native",uri:(0,u.o_h)(o)?o:a?.content.data.uri}),h=(0,q.t)(g);if(!a)return null;const f=(0,p.wA)(t.data.headerEntity,t.data.title??{transformedLabel:d.Ru.get("promotions.default-section-title")},null);return(0,M.jsx)(U,{promotionUri:a.content.data.uri,children:(0,M.jsx)(Q.r,{spec:s,children:(0,M.jsxs)("section",{ref:h,className:l()(G,X.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,M.jsx)(m.k,{...f}),(0,M.jsx)(J,{promotionSectionItem:a,spec:i})]})})})}),{name:"HomePromotionShelf"});var te=r(93523),re=r(85961),ae=r(47186),ne=r(95884),se=r(99701),ie=r(81035),oe=r(65462),le=r(78516);const ce="JYoTSXH6KEr_MIwisdZi",ue=({title:e,pretitle:t,body:r,uri:a,images:n,spec:s})=>{const i=(0,V.s)(),o=(0,h.Zp)(),[l,c]=(0,H.A)(a||""),{isPlaying:u,togglePlay:m,isActive:p}=(0,W.P)({uri:a},{featureIdentifier:"album"}),{onCopyLink:f}=(0,F.L)({sharingInfo:null,uri:a,interactionData:{intent:"share",type:"click",itemIdSuffix:"album/share"}}),y=(0,g.useCallback)((()=>{const e=(0,O.$I)({isPlaying:u,isActive:p,spec:s.playButtonFactory(),logger:i,uri:a});m({loggingParams:e})}),[s,p,u,i,m,a]),{href:x,isExternalTarget:C}=A(a),b=(0,g.useCallback)(((e,t)=>{i.logInteraction(s.hitUiNavigate({destination:a})),C||(t.preventDefault(),o(x))}),[s,i,a,x,C,o]),{setState:P,Icon:I}=(0,B.Q)(l?j.t.CURATED:j.t.UNCURATED,j.A),w=(0,g.useCallback)((()=>{P(l?j.t.UNCURATED:j.t.CURATED),i.logInteraction(l?s.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:a}):s.saveButtonFactory().hitLike({itemToBeLiked:a})),c(!l)}),[P,l,i,s,a,c]),L=(0,g.useCallback)((()=>{i.logInteraction(s.shareButtonFactory().hitCopyToClipboard()),f()}),[s,i,f]),S=(0,q.t)(s);return(0,M.jsx)("div",{ref:S,children:(0,M.jsx)(v.M,{title:e,href:x,pretitle:t,body:r,isExternalLinkTargetFn:()=>!1,actions:[{target:a,type:"PLAY"},{target:a,type:"ADD_TO_LIBRARY"},{target:a,type:"SHARE"}],onPlay:y,onAddToLibrary:w,onShare:L,isPlaying:u,isInLibrary:l,onNavigate:b,mediaSlotImageSrc:n[0]?.url,playButtonLabel:d.Ru.get("playlist.a11y.play",e),pauseButtonLabel:d.Ru.get("playlist.a11y.pause",e),addToLibraryButtonLabel:d.Ru.get("save_to_your_library"),removeFromLibraryButtonLabel:d.Ru.get("remove_from_your_library"),shareButtonLabel:d.Ru.get("mwp.list.item.share"),className:ce,addToLibraryIcon:I})})};var de=r(13155);const me=({name:e,uri:t,images:r,artists:a,spec:n,type:s})=>(0,M.jsx)(oe.h,{menu:(0,M.jsx)(le.h,{uri:t,artistUri:a?.[0]?.uri}),children:(0,M.jsx)(ue,{title:e,pretitle:`${(0,de.C)(s)} • ${a.map((e=>e.name)).join(d.Ru.getSeparator())}`,uri:t,images:r,spec:n})});var pe=r(40675);const ge=({name:e,uri:t,images:r,description:a,spec:n})=>(0,M.jsx)(oe.h,{menu:(0,M.jsx)(pe.W,{uri:t}),children:(0,M.jsx)(ue,{title:e,pretitle:d.Ru.get("playlist"),body:a,uri:t,images:r,spec:n})});var he=r(63775),fe=r(85907);const ve="ixncPYxvXKu9liUB7s4j",ye="Qhy0EgG4oltMwIF_10L6",xe=(0,i.mc)((({spec:e,section:t})=>{const r=e.shelvesFactory(),{spec:a,logger:n}=(0,Z.r)(ne.j,{data:{identifier:t.uri,uri:t.uri},parentAbsoluteLocation:r.getAbsoluteLocation()}),s=(0,p.wA)(t.data.headerEntity,t.data.title,t.data.subtitle),i=t.sectionItems.items.map(((e,t)=>((e,t)=>{if((0,ie.vd)(e.content)){const r=e.content.data,a=(0,p.f0)(r);switch(r.__typename){case"Album":return(0,M.jsx)(me,{uri:r.uri,name:r.name,images:a,artists:(0,he.K)(r.artists),type:r.albumType,spec:t});case"Playlist":return(0,M.jsx)(ge,{uri:r.uri,name:r.name,images:a,spec:t});case"GenericError":case"NotFound":case"Artist":case"DiscoveryFeed":case"RestrictedContent":case"Audiobook":case"Chapter":case"Episode":case"Podcast":case"Track":case"User":return null;default:return(0,fe.k)(r),null}}return null})(e,a.spotlightCardFactory({position:t,uri:e.uri})))).filter((e=>!!e)),[o,c]=(0,g.useState)(i[0]),[u,h]=(0,g.useState)(0),f=(0,g.useCallback)((()=>{h(u+1),c(i[u+1]),n.logInteraction(a.nextButtonFactory().hitUiReveal())}),[u,n,i,a]),v=(0,g.useCallback)((()=>{h(u-1),c(i[u-1]),n.logInteraction(a.previousButtonFactory().hitUiReveal())}),[u,n,i,a]),y=i.length>1?(0,M.jsxs)("div",{className:ye,children:[(0,M.jsx)(se.Zp,{label:d.Ru.get("carousel.left"),children:(0,M.jsx)(te.H,{size:"small",iconOnly:re.g,"aria-label":d.Ru.get("carousel.left"),disabled:0===u,onClick:v})}),(0,M.jsx)(se.Zp,{label:d.Ru.get("carousel.right"),children:(0,M.jsx)(te.H,{size:"small",iconOnly:ae.V,"aria-label":d.Ru.get("carousel.right"),disabled:u===i.length-1,onClick:f})})]}):null;return i.length<1?null:(0,M.jsx)(Q.r,{spec:r,children:(0,M.jsxs)("section",{className:l()(ve,X.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,M.jsx)(m.k,{...s,trailing:y,onClickTitle:()=>{s.titleUri&&n.logInteraction(a.shelfHeaderFactory().hitUiNavigate({destination:s.titleUri}))}}),o]})})}),{name:"HomeV2SpotlightShelf"});var Ce=r(65324),be=r(33712),je=r(38501),Pe=r(20489),Ie=r(42795),we=r(43329);const Le=(0,i.mc)((({spec:e,section:t,index:r})=>{const n=(0,a.NC)(je.MX4),s=(0,a.NC)(we.BC),i=(0,p.wA)(t.data.headerEntity,t.data.title,"HomeGenericSectionData"===t.data.__typename?t.data.subtitle:null),o=(0,g.useMemo)((()=>t.sectionItems.items.map(((e,t)=>(0,ie.e0)(e,t,s))).filter((e=>null!==e))),[s,t.sectionItems.items]);return o.length?n?(0,M.jsx)(Q.r,{spec:e.shelvesFactory(),children:(0,M.jsx)(Ce.R,{seeAllUri:t.uri,id:t.uri,className:X.A.homeRegularDensityCarouselShelf,index:r,...i,children:o})}):(0,M.jsx)(Q.r,{spec:e.shelvesFactory(),children:(0,M.jsx)(Pe.x,{config:(0,Ie.s1)(Ie.yV.HOME_REGULAR_DENSITY),children:(0,M.jsx)(be.p,{total:t.sectionItems.totalCount,seeAllUri:t.uri,id:t.uri,index:r,...i,children:o})})}):null}),{name:"HomeV2GenericShelf"});var Se=r(80368),Ne=r(25408);const ke=(0,i.mc)((e=>{const t=(0,a.NC)(je.MX4),{section:r,index:n,spec:s}=e,i=(0,g.useMemo)((()=>e.section.sectionItems.items.map(((e,t)=>{if("TrackResponseWrapper"!==e.content.__typename||"Track"!==e.content.data.__typename)return null;const r=e.content.data;return(0,M.jsx)(Ne.O,{title:r.name,trackUri:r.uri,artists:r.artists.items,album:r.albumOfTrack,contentRating:r.contentRating,referrerIdentifier:"home",index:t},r.uri)})).filter((e=>null!==e))),[e.section.sectionItems.items]);return t?(0,M.jsx)(Q.r,{spec:s.shelvesFactory(),children:(0,M.jsx)(Ce.R,{index:n,title:r.data.title?.transformedLabel??"",seeAllUri:r.uri,id:r.uri,className:X.A.homeMusicVideosCarouselShelf,children:i})}):(0,M.jsx)(Pe.x,{config:(0,Ie.s1)(Ie.yV.MUSIC_VIDEOS),children:(0,M.jsx)(Q.r,{spec:s.shelvesFactory(),children:(0,M.jsx)(be.p,{index:n,title:r.data.title?.transformedLabel??"",seeAllUri:r.uri,id:r.uri,total:r.sectionItems.totalCount,children:i})})})}),{name:"HomeV2MusicVideosShelf"});var Re=r(12099);const Ae=(0,i.mc)((({spec:e,section:t,index:r})=>{const n=(0,a.NC)(je.MX4),s=t.data.title?.transformedLabel??d.Ru.get("view.recently-played");return n?(0,M.jsx)(Q.r,{spec:e.shelvesFactory(),children:(0,M.jsx)(Re.RecentlyPlayedHomeCarouselShelf,{title:s,index:r,id:t.uri,className:X.A.homeHighDensityCarouselShelf})}):(0,M.jsx)(Q.r,{spec:e.shelvesFactory(),children:(0,M.jsx)(Re.RecentlyPlayedHomeGridShelf,{title:s,index:r,id:t.uri})})}),{name:"HomeV2RecentlyPlayedShelf"});var Ee=r(80337),Te=r(73203),_e=r(68049),Me=r(26448),De=r(44859),Ue=r(25009),Oe=r(39745),Fe=r(22984),Be=r(34990),He=r(63096);const We="mwc_1Zp_E6v9sr0fTnL1",Ve="sbehppetBlPlPp7TSib7",Ge="Zg_jTjYYhVRuKwqeO4s3",ze="X3QSU3mxBfBtfhpubU5I",$e="vMptgdkEGfu4daB_6D7U",Ye="ZMRUy3XCzjoj3U3v8zNb",Ke="Fj9nUGnQyCPsnhDKLx7n",Je="knJzYlLp6ylpADL42ohP";function Qe(e){return!!(e&&e.fileId&&e.uri)}const qe=({canvas:e,canvasContainerClass:t,onCardLoaded:r})=>Qe(e)?(0,M.jsx)(De.Gg,{className:Ke,fileId:e.fileId,canvasUrl:e.url,overridePlatformId:Oe.Z,playerContainerClass:t,canvasUri:e.uri,playbackType:De.RT.LoopOnHover,useContainerMouseOverEvents:!0,onLoaded:r}):null,Ze=({canvas:e,onCardLoaded:t,className:r})=>{const a=(0,He.g)(e?.thumbnail?.sources,{desiredSize:300,desiredLabel:"standard"});return(0,M.jsx)(Fe._,{className:l()(Ye,r),src:a?.url,loading:"lazy",testid:"card-image",fadeIn:!0,onLoad:t,children:(0,M.jsx)(w.e,{size:"xxlarge"})})};var Xe=function(e){return e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(Xe||{});const et=({uri:e,index:t,canvas:r,sectionUri:a,discoveryFeedUri:n,uri:s,canvasContainerClass:i,title:o,requestId:c})=>{const{open:u}=(0,Ue.P)(),{spec:d,logger:m}=(0,Z.r)(Me.y,{data:{position:t,uri:e,reason:c??""}}),p=(0,q.t)(d),h=(0,Be.j)(),[f,v]=(0,g.useState)(!1),[y,x]=(0,g.useState)(Xe.NOT_LOADED),C=()=>{const e=d.hitUiReveal();m.logInteraction(e),u(a,n,s)},b=(0,g.useRef)(null);(0,g.useEffect)((()=>{const e=b.current;if(h)return;if(!Qe(r))return;const t=()=>{x(Xe.LOADING)};return e?.addEventListener("pointerenter",t,{once:!0}),()=>{e?.removeEventListener("pointerenter",t)}}),[r,h]);const j=(0,g.useCallback)((()=>{v(!0)}),[]),P=(0,g.useCallback)((()=>{x(Xe.LOADED)}),[]),I=!f,w=y!==Xe.LOADED,L=y===Xe.LOADING||y===Xe.LOADED;return(0,M.jsxs)("div",{className:We,tabIndex:0,role:"button",onClick:C,ref:b,onKeyDown:e=>{"Enter"===e.key&&C()},children:[(0,M.jsxs)("div",{className:l()(ze,{[$e]:y===Xe.LOADING}),ref:p,children:[I&&(0,M.jsx)("div",{className:Ge}),L&&(0,M.jsx)(qe,{canvas:r,canvasContainerClass:i,onCardLoaded:P}),w&&(0,M.jsx)(Ze,{canvas:r,onCardLoaded:j})]}),(0,M.jsx)("div",{className:Je,children:(0,M.jsx)(Te.Z,{variant:"ballad",lineClamp:2,title:o,dir:"auto",children:o})}),(0,M.jsx)(_e.A,{semanticColor:"textBase",size:"medium",className:Ve})]})};var tt=r(4414),rt=r(99644);const at="a_zIjVculIT6AAmqITi3",nt="Flfusx_bjoqsdTvLD3n9";const st=({spec:e,children:t,section:r,index:a})=>{const n=(0,g.useRef)(null),s=(0,g.useRef)(null),{spec:i}=(0,Z.r)(tt.f,{data:{position:a,identifier:r.uri,uri:r.uri},parentAbsoluteLocation:e.shelvesFactory().getAbsoluteLocation()});return(0,rt.w)({refOrElement:n,observeOnly:"width",observeOnMount:!0,onResize:()=>{const e=s.current;if(!e)return;const t=e.children[0];if(!t)return;const r=t.getBoundingClientRect().top;for(const t of e.children)t.nodeType===Node.ELEMENT_NODE&&(t.getBoundingClientRect().top>r?t.style.display="none":t.style.display="flex")}}),(0,M.jsx)(Q.r,{spec:i,children:(0,M.jsxs)("section",{className:at,ref:n,children:[(0,M.jsx)(m.k,{title:r.data.title?.transformedLabel??"",pageId:r.uri}),(0,M.jsx)("div",{className:nt,ref:s,children:t})]})})},it=({spec:e,children:t,index:r,section:a})=>(0,M.jsx)(Q.r,{spec:e.shelvesFactory(),children:(0,M.jsx)(Ce.R,{id:a.uri,title:a.data.title?.transformedLabel??"",className:X.A.homeWatchFeedCarouselShelf,index:r,withEncoreCards:!0,seeAllUri:a.uri,children:t})}),ot=(0,i.mc)((e=>{const t=(0,a.NC)(je.MX4),r=(0,g.useMemo)((()=>e.section.sectionItems.items.map(((t,r)=>{if("DiscoveryFeedResponseWrapper"===t.content.__typename&&"DiscoveryFeed"===t.content.data.__typename){const a=((e,t,r,a)=>{if("TrackResponseWrapper"!==e.firstItem?.__typename||"Track"!==e.firstItem.data.__typename)return null;const n=e.firstItem.data;return(0,M.jsx)(et,{index:r,uri:n.uri,sectionUri:"spotify:section:0JQ5DABRtFWApcy61XJEvU",discoveryFeedUri:t,canvas:n.canvas,title:e.title??"",canvasContainerClass:`Home_WatchFeed_Canvas_${a}_${r}`},`${n.uri}-${r}`)})(t.content.data,t.uri,r,e.index);if(a)return a}return null})).filter((e=>null!==e))),[e.section.sectionItems.items,e.index]);return r.length?t?(0,M.jsx)(it,{...e,children:r}):(0,M.jsx)(st,{...e,children:r}):null}),{name:"HomeV2WatchFeedShelf"});var lt=r(28450);const ct="DbwXO2cO6bYBhrHpU__Q",ut=(0,i.mc)((({uri:e,shelfTitle:t,title:r,description:a})=>(0,M.jsxs)("section",{className:l()(ct,X.A.fixedShelf),"data-shelf-collapsable":!0,children:[(0,M.jsx)(m.k,{title:t}),(0,M.jsx)(lt.n,{uri:e,title:r,description:a})]})),{name:"HomeYourDJShelf"});var dt=r(15011);const mt=({spec:e,greeting:t,section:r,index:i})=>{const o=function(){const e=(0,dt._)();return function(t,r){if(!e)return!1;const a=(0,s.M)(t,r).sectionItems.items[0];return"PlaylistResponseWrapper"===a.content.__typename&&"Playlist"===a.content.data.__typename}}(),l=(0,a.NC)(je.BYw),c=(0,a.NC)(je.hWV),u=(0,a.NC)(je.k6b);switch(r.data?.__typename){case"HomeGenericSectionData":return(0,M.jsx)(Le,{spec:e,section:(0,s.M)(r,r.data),index:i});case"HomeShortsSectionData":return(0,M.jsx)(Ee.$,{spec:e,greeting:t,section:(0,s.M)(r,r.data),index:i});case"HomeRecentlyPlayedSectionData":return(0,M.jsx)(Ae,{spec:e,section:(0,s.M)(r,r.data),index:i});case"HomeGridSectionData":return c?(0,M.jsx)(Se.A,{spec:e,index:i,section:(0,s.M)(r,r.data)}):(0,M.jsx)(Le,{spec:e,section:(0,s.M)(r,r.data),index:i});case"HomePromotionSectionData":return(0,M.jsx)(ee,{section:(0,s.M)(r,r.data),spec:e,index:i});case"HomeSpotlightSectionData":return u?(0,M.jsx)(xe,{spec:e,section:(0,s.M)(r,r.data)}):null;case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":{const e=(0,s.M)(r,r.data),{data:t,sectionItems:a}=e,n=a.items[0];if(o(r,r.data)&&"PlaylistResponseWrapper"===n.content.__typename&&"Playlist"===n.content.data.__typename){const{data:e}=n.content;return(0,M.jsx)(ut,{uri:e.uri,shelfTitle:t.title?.transformedLabel??"",title:e.name,description:e.description??""})}return null}case"HomeWatchFeedSectionData":if(l){const t=(0,s.M)(r,r.data);return(0,M.jsx)(ot,{spec:e,index:i,section:t})}return null;case"HomeFeatureActivationSectionDataV2":return(0,M.jsx)(n.G,{sectionItems:r.sectionItems.items,uri:r.uri,localStorageKey:r.data.localStorageKey});case"HomeMusicVideosSectionData":return(0,M.jsx)(ke,{spec:e,section:(0,s.M)(r,r.data),index:i});case"HomeFeedBaselineSectionData":case"HomeFeatureActivationSectionData":case null:case void 0:return null;default:return(0,fe.k)(r.data),null}}},76018:(e,t,r)=>{r.d(t,{g:()=>Xt});var a=r(30758),n=r(62411),s=r(422),i=r(17918),o=r(188),l=r(52395),c=r(7145),u=r(79110),d=r(81799),m=r(81162),p=r(9931),g=r(42770),h=r(22670),f=r(29051),v=r(84287),y=r(14343),x=r(31417),C=r(98293),b=r(97500),j=r.n(b),P=r(85387),I=r(34901),w=r(43182),L=r(22726),S=r(93523),N=r(77567);const k={screenLg:"1200px",homeRegularDensityMinWidth:"210px",homeRegularDensityMinWidthSmallScreens:"160px",homeFeedBaselineMinWidth:"380px",homeFeedBaselineMaxWidth:"480px",homeFeedBaselineHalfWidth:"430px",gridContainer:"DgRp3EC01YPhzdK9Imn5",withFiniteRowCount:"ihWXb2VdDvsS3bvPrpJF",uniformRowHeight:"frDxJ3jhWuIFWag59N0Q",card:"Q36ugVAb7krhThyRTmJ_",overlayForCenteredImage:"ky4dHMtg46D0NG1znEYF",overlayForCenteredImageGradient:"kI0KOHhAWcqJTU3NyxGg",overlayForCenteredImageDynamicColors:"qF9rZunA5zsqZCAJ8pKq",overlayTop:"QSkuUiKpZ4MHrdOB83XV",withFooterOverlay:"pobLn0CELRvb4TjnNApn",overlayBottom:"AqLt2Nk3rygv3mAt_6gi",hasFooter:"FuL5IvTt_AoeX2tB_U_Q",header:"XKQRNQAUOAjRwwjuUnRU",headerImage:"EHmWppnjgBNjT9yPUXpw",withHeaderImage:"KwklVh4oNn_BXeDMDHcS",headerContainer:"ZhCb7WHaVm5AdY29Cvaq",titleClamp:"auugTSHlDcy58VCqeLjc",titleLink:"YSflHyCWx4tGL7LrqtLE",justClamp:"aILTnh3w8NMsYZOpNJEQ",carousel:"t8hK7HwEUiIjAwheYDse",carouselScrollContent:"bXQccTSllyjV42080L0j",carouselScroller:"fTzLARQ0EPCvPmol3wtF",carouselChevrons:"VSAtCKDeRfQH7O1t2eff",fillSpaceAbsolute:"IriswrXFrjhQwRTmrgIf",backgroundInCarousel:"RWVDgIkhym_nHPfxrxEO",canvasInCarousel:"hpHKwaBDciLDmKsUx6A6",currentlyPlayingStatus:"uw7snqn4j_j7v0S1Fpmi",footerPlayContainer:"PHgLQg31p9qeCUcSicCg",audioPreviewContainer:"EBU7aYrd4J_LgPaKmyJA",footerPlayContainerLeft:"lGxecOZ8oBfh2DzjoP0p",footerPlayContainerRight:"Hf9Q0qSpT2RXgmYT6bNE",footer:"OGu88AVNWY3IM3QlZjG0",footerDescription:"bdiJ1G8TQ1rV0_rYDjws",footerDescriptionContent:"FUyKOZGo4cLlF8PSnINm",expandFooterButton:"ZZqy7vcJrfQy4lXxCTB6",playButtonContainer:"qWtIAYA_A_mOQIlxBb02",isPlayingContext:"BdPspy97AcLd4WhT_L2N",isListeningToPreview:"R6fpPFFvUR3y3foJIDHD",audioWave:"hDiIlhxofBNpk5iFSYik",videoPreview:"mEYwOgcSR3UWyvz0OSVE",artworkImage:"IpLgaK4Oik13ltWcX5FA",transcriptForAudio:"Z_ouIT4D_IDAEK9NFivF",isExpandedFooter:"Icn8TjyVe6vIEWpxmYhl",centeredContainer:"TLbWzWrBDxGsZRv8m6lg",parentArtworkImage:"P0gaJ5S6AlrdulY7vERi",hasParentImages:"YPytKH2UYbqp5pJtcUqf",previewHasCompleted:"nlj9PLnUOp6p9CpfeJr3",transcript:"gSDmqCUB7gyRLyDhNVfF",pulsateText:"dPKkgM2ctEg7P_MAUwjA",playing:"je5WMu3WPFt5JRsMVZb_",loading:"fl8QTa21ubkcNPWPywc9",pulsateLoading:"yQiJ5xD8GjZPS_kJYdgf",transcriptForVideo:"Xl2pUStmWsam79qkFAe7",transcriptText:"S1JkAKIjGrjk74I1YEyb",spoken:"CJoYZ3wN9vIyNxjiMs6q",unspoken:"LF44BrY9AtFsXZOTo2WQ",subtitle:"yb0K_tfQMa762cHBS2LJ",previewHasCompletedContainer:"kraOhQgefWTb4HdrEa2y"};var R=r(86070);const A=e=>{const{isExpandedFooter:t,setIsExpandedFooter:r,children:n}=e,i=(0,a.useRef)(null),[o,l]=(0,a.useState)(!1),c=t?x.Ru.get("show_less"):x.Ru.get("show_more"),u=(0,a.useCallback)((e=>{e.stopPropagation(),r((e=>!e))}),[r]);(0,a.useEffect)((()=>{requestAnimationFrame((()=>{i.current&&l(i.current.scrollHeight>i.current.clientHeight)}))}),[]);const d={"--mask-image":`url(${(0,N.b)("images/mask.png")})`,"--mask-image-rtl":`url(${(0,N.b)("images/mask-rtl.png")})`,"--mask-image-expanded":`url(${(0,N.b)("images/expanded-mask.png")})`,"--mask-image-expanded-rtl":`url(${(0,N.b)("images/expanded-mask-rtl.png")})`};return(0,R.jsxs)("div",{className:k.footerDescription,style:d,children:[(0,R.jsx)(s.E,{variant:"bodySmall",className:k.footerDescriptionContent,ref:i,children:n}),(o||t)&&(0,R.jsx)(S.H,{onClick:u,className:k.expandFooterButton,size:"small",condensedAll:!0,semanticColor:"textBase",tabIndex:0,children:c})]})};var E=r(83352),T=r(68204),_=r(31650),M=r(24533);const D=({uri:e,size:t})=>{const[r,a]=(0,M.A)(e);return(0,R.jsx)(E.M,{size:t,isAdded:r,onClick:()=>{a(!r)},condensed:!0})},U=({uri:e,size:t})=>(0,_.v)(e)?(0,R.jsx)(T.g,{uri:e,size:t}):(0,R.jsx)(D,{uri:e,size:t});var O=r(38157),F=r(70026),B=r(56515),H=r(32394),W=r(79126),V=r(10044),G=r(82935);const z=({uri:e,name:t,togglePreview:r,isListeningToPreview:n,userHasCompletedPreview:i,overture:o,durationMs:l})=>{const c=(0,L.gHQ)(e),[u,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null);u&&n&&d(!1);const g=(0,a.useCallback)((r=>{if(c&&(n||u)){const e=l&&r?(0,G.f)(l-r):(0,G.f)(NaN);return x.Ru.get("preview.remaining-time",{time:e})}const a=t??x.Ru.get("playing"),s=n&&!u;return(0,L.gHQ)(e)?s?a:x.Ru.get("preview.episode"):(0,L._Tv)(e)?s?a:x.Ru.get("preview.album"):(0,L.nuB)(e)?s?a:x.Ru.get("preview.playlist"):s?a:x.Ru.get("preview")}),[c,n,l,u,t,e]),h=(0,a.useCallback)((()=>n?(0,R.jsx)(V.J,{animated:!0}):(0,R.jsx)(F.X,{size:"small"})),[n]);return(0,a.useEffect)((()=>{if(!c)return;if(!o)return;const e=e=>{p(e.data.position)};return o.addListener(W.LW.PROGRESS,e),()=>{o.removeListener(W.LW.PROGRESS,e)}}),[o,c]),i?(0,R.jsx)(B.n,{className:k.audioPreviewContainer,iconOnly:()=>(0,R.jsx)(H.r,{size:"small"}),onClick:e=>{e.stopPropagation(),r()},size:"small"}):(0,R.jsx)(B.n,{className:j()(k.audioPreviewContainer,u?k.loading:null,n?k.playing:null),disabled:u,iconLeading:h,onClick:e=>{e.stopPropagation(),n||d(!0),r()},size:"small",children:(0,R.jsx)(s.E,{variant:"bodySmall",className:k.justClamp,children:g(m)})})},$=e=>{const{isPlayingContext:t}=e;return!t&&e.uri&&e.isPreviewAvailable?(0,R.jsx)(z,{...e}):t?(0,R.jsxs)("div",{className:k.currentlyPlayingStatus,children:[(0,R.jsx)(V.J,{animated:!0}),(0,R.jsx)(s.E,{variant:"bodySmall",semanticColor:"textPositive",children:x.Ru.get("playing")})]}):null};var Y=r(75830),K=r(34733);const J=e=>{const{uri:t,overture:r,isPlayingContext:a,isPreviewAvailable:n,isListeningToPreview:s,togglePreview:i,durationMs:o,currentPreviewItem:l,isAddable:c,isPlayable:u,ariaPlayLabel:d,ariaPauseLabel:m,menu:p,onMoreButtonClick:g,handlePlayButtonClick:h,userHasCompletedPreview:f}=e;return(0,R.jsxs)("div",{className:k.footerPlayContainer,children:[(0,R.jsx)("div",{className:k.footerPlayContainerLeft,children:(0,R.jsx)($,{isPreviewAvailable:n,isPlayingContext:a,isListeningToPreview:s,uri:l?.uri??null,name:l?.name??null,overture:r,durationMs:o,togglePreview:i,userHasCompletedPreview:f})}),(0,R.jsxs)("div",{className:k.footerPlayContainerRight,onClick:e=>{e.stopPropagation()},children:[(0,R.jsx)(Y.b,{menu:p,children:(0,R.jsx)(O.e,{size:"large",label:x.Ru.get("more"),onClick:g})}),c&&(0,R.jsx)(U,{size:"large",uri:t}),u&&(0,R.jsx)("div",{className:k.playButtonContainer,children:(0,R.jsx)(K.R,{isPlaying:a,onClick:h,ariaPlayLabel:d,ariaPauseLabel:m,version:a?K.H.primary:K.H.secondary})})]})]})};var Q=r(43743),q=r(99701),Z=r(21082),X=r(26122),ee=r(95683),te=r(42795),re=r(99644);const ae=Number(k.homeFeedBaselineHalfWidth.replace("px",""))||430,ne=({uri:e,text:t,images:r,imageColor:n,renderSubtitle:i,cardRef:o})=>{const l=(0,a.useRef)(null),c=(0,X.K)({ref:l}),[u,d]=(0,a.useState)(32),m=(0,a.useCallback)((()=>{const e=o.current?.clientWidth??te.Pm,r=2*(l.current?.clientWidth??te.Pm),a=e<ae?24:32,n=(0,ee.L)(t,a,700);d(n>r?24:32)}),[o,t]);(0,a.useEffect)((()=>{m()}),[m]),(0,re.w)({refOrElement:o,onResize:m,observeOnly:"width",observeOnMount:!1});const p={"--title-line-clamp":2,"--title-font-size":`${u}px`,"--title-font-size-small":(32===u?24:20)+"px"};return(0,R.jsxs)("header",{className:k.header,style:p,children:[(0,R.jsx)("div",{className:k.headerImage,children:(0,R.jsx)(Q.M,{images:r,color:n,is1DCardHeader:!0})}),(0,R.jsxs)("div",{className:k.headerContainer,children:[(0,R.jsx)(Z.N,{to:e,className:k.titleLink,children:(0,R.jsx)(q.Zp,{label:t,disabled:!c,children:(0,R.jsx)(s.E,{as:"span",variant:"titleSmall",semanticColor:"textBase",ref:l,className:k.titleClamp,children:t})})}),i?(0,R.jsx)(s.E,{as:"span",variant:"bodySmall",semanticColor:"textSubdued",className:j()(k.subtitle),children:i()}):null]})]})};var se=r(36475),ie=r(33449),oe=r(43329);const le=e=>{const{carouselLayout:t,withFooterOverlay:r}=e,a=(0,y.NC)(oe.HO),{dynamicColors:n}=(0,ie.q)(),s={"--background-base-high-contrast":n?.highContrast.backgroundBase.toCSS(se.a.RGBA)||"","--higher-contrast-text-base-color":n?.higherContrast.textBase.toCSS(se.a.RGBA)||""};return t?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:k.overlayTop}),(0,R.jsx)("div",{className:j()({[k.withFooterOverlay]:r,[k.overlayBottom]:!r})})]}):(0,R.jsx)("div",{style:s,className:j()(k.overlayForCenteredImage,{[k.overlayForCenteredImageGradient]:!a,[k.overlayForCenteredImageDynamicColors]:a})})};var ce=r(21743),ue=r(30147),de=r(14636);const me=[0,1e4];let pe=!1;const ge=({analyser:e,forceAlwaysInView:t,playing:r})=>{const n=(0,a.useRef)(null),s=(0,a.useRef)(null),i=(0,ue.v7)(),{ref:o,inView:l}=(0,ce.Wx)({root:i.current,initialInView:!1}),c=(0,a.useRef)(new Uint8Array(e.frequencyBinCount)),[u,d]=(0,a.useState)(r);(0,a.useEffect)((()=>{if(!r){const e=setTimeout((()=>d(!1)),500);return()=>clearTimeout(e)}return d(!0),()=>{}}),[r]);const m=u&&(l||t),p=(0,a.useCallback)((()=>{if(!n.current)return;const t=n.current?.getContext("2d");if(!n.current||!t)return;const r=n.current.width/window.devicePixelRatio,a=n.current.height/window.devicePixelRatio,s=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(s),function(e,t,r,a,n){const s=a.length,i=Math.floor(s*me[0]/2e4),o=Math.floor(s*me[1]/2e4),l=Math.floor((o+i)/2),c=l-16,u=l+16;(c<0||u>s)&&!pe&&(pe=!0,console.warn("Invalid bounds for drawing audio wave, increase fftSize or reduce lineCount",{lowerBound:c,upperBound:u,size:s}));const d=t/2,m=r/2;e.clearRect(0,0,t,r),e.fillStyle="rgba(255, 255, 255, 35%)";for(let t=0;t<32;t++){const r=a[t+c]||0;n[t]=.9*n[t]+.1*r;const s=n[t]*(m/255),i=d+-256+16*t-2;e.beginPath(),e.roundRect(i,m-s,4,2*s,2),e.fill()}}(t,r,a,s,c.current)}),[e]),g=(0,a.useCallback)((()=>{if(!n.current?.parentElement)return;const{offsetWidth:e,offsetHeight:t}=n.current.parentElement,r=window.devicePixelRatio||1;n.current.width=e*r,n.current.height=t*r,n.current.style.width=`${e}px`,n.current.style.height=`${t}px`;const a=n.current.getContext("2d");a?.scale(r,r)}),[]);return(0,re.w)({onResize:(0,de.s)(g)(200),refOrElement:s}),(0,a.useEffect)((()=>{if(!m)return()=>{};let e,t=null;const r=a=>{(null===t||(t?a-t:0)>=1e3/60)&&(p(),t=a),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}}),[p,m]),(0,R.jsx)("div",{ref:s,style:{width:"100%",height:"100%"},children:(0,R.jsx)("canvas",{style:{width:"100%",height:"100%"},ref:e=>{o(e),n.current=e,g()}})})};var he=r(44481);const fe=({onClick:e})=>(0,R.jsx)("div",{className:k.previewHasCompletedContainer,children:(0,R.jsx)(he.$,{size:"large",onClick:t=>{t.stopPropagation(),t.preventDefault(),e()},colorSet:"invertedLight",children:x.Ru.get("preview.continue-playing")})});var ve=r(50486),ye=r(1599);const xe=e=>{const{data:t={words:[]},error:r}=(0,ve.I)({queryKey:["transcript",e],queryFn:async()=>(await(async e=>ye.n.getInstance().build().fromURL(e).withoutMarket().withoutAuthorization().send())(e)).body});return{data:t,error:r}},Ce=1500,be=e=>1e3*parseFloat(e.replace("s","")),je=({line:e,positionMs:t,playing:r})=>{const[n,i]=(0,a.useState)(0);(0,a.useEffect)((()=>{i(0)}),[t]);const o=r;(0,a.useEffect)((()=>{let e;return()=>{e&&cancelAnimationFrame(e)}}),[o]);const l=t+n;return(0,R.jsx)("div",{className:k.transcriptText,children:e.map((({word:e,start:t},r)=>(0,R.jsx)(s.E,{variant:"bodyMediumBold",className:l>=t?k.spoken:k.unspoken,children:e},r)))})},Pe=({transcriptUrl:e,overture:t,shiftTranscriptByOffsetFromURL:r})=>{const{data:n,error:s}=xe(e),[i,o]=(0,a.useState)(0),[l,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)(!1),m=(0,a.useMemo)((()=>(e=>{const t=new URL(e).searchParams.get("offsets.start");return t?be(t):0})(e)),[e]);(0,a.useEffect)((()=>{if(!t)return;const e=e=>{const t=e.data.position+(r?m:0);o(t)},a=()=>{c(!0),u||d(!0)},n=()=>{c(!1)};return t.on(W.LW.PROGRESS,e),t.on(W.LW.PLAYING,a),t.on(W.LW.PAUSED,n),()=>{t.removeListener(W.LW.PROGRESS,e),t.removeListener(W.LW.PLAYING,a),t.removeListener(W.LW.PAUSED,n)}}),[r,m,t,u]);const p=((e,t)=>{const r=(0,a.useMemo)((()=>Math.floor(t/Ce)*Ce),[t]);return(0,a.useMemo)((()=>{const t=[];for(let a=0;a<e.length;a++){const n=e[a],s=be(n.offsets.start);if(s>=r&&s<r+Ce){const e=be(n.offsets.end);t.push({word:`${n.word} `,start:s,end:e})}if(s>=r+Ce)break}return t}),[e,r])})(n.words,i);return s?null:u&&p.length?(0,R.jsx)(je,{line:p,positionMs:i,playing:l}):null};var Ie=r(38501);const we=e=>{const{analyser:t,userHasCompletedPreview:r,handleContinuePlayingButtonClick:a,overture:n,previewState:s,parentImages:i,images:o,imageColor:l,handleCardClick:c,entityUrl:u,transcriptUrl:d,shiftTranscriptByOffsetFromURL:m}=e,p=(0,y.NC)(Ie.eSY),g=i&&i.length>0&&o?.[0]?.url!==i?.[0]?.url;return(0,R.jsxs)(Z.N,{onClick:c,to:u,className:k.centeredContainer,children:[t?(0,R.jsx)("div",{className:k.audioWave,children:(0,R.jsx)(ge,{analyser:t,playing:s.playing})}):null,(0,R.jsxs)("div",{className:j()(k.artworkImage,{[k.previewHasCompleted]:r,[k.hasParentImages]:g}),children:[(0,R.jsx)(Q.M,{images:o,color:l,desiredSize:180*window.devicePixelRatio}),g&&(0,R.jsx)("div",{className:k.parentArtworkImage,children:(0,R.jsx)(Q.M,{images:i,color:l,desiredSize:80*window.devicePixelRatio})})]}),p&&d&&(0,R.jsx)("div",{className:j()(k.transcript,k.transcriptForAudio),children:(0,R.jsx)(Pe,{transcriptUrl:d,overture:n,shiftTranscriptByOffsetFromURL:m})}),r?(0,R.jsx)(fe,{onClick:a}):null]})};var Le=r(44859),Se=r(34990);const Ne=({item:e,cardRef:t,playerContainerClass:r,isListening:a,overridePlatformId:n})=>{const s=(0,Se.j)();return!e?.canvas?.fileId||s?(0,R.jsx)("div",{className:k.backgroundInCarousel,style:{backgroundColor:e.background?.color??"transparent"},children:e.background?.imageUrl&&(0,R.jsx)("img",{alt:"",src:e.background.imageUrl})}):(0,R.jsx)(Le.Gg,{className:k.canvasInCarousel,fileId:e.canvas.fileId,canvasType:e.canvas.type,canvasUri:e.canvas.uri,canvasUrl:e.canvas.url,canvasThumbnailUrl:e.canvas.thumbnailUrl,playbackType:a?Le.RT.Loop:Le.RT.LoopOnHover,playerContainerClass:`${r}_${e.canvas.fileId}`,mouseHoverRef:t,overridePlatformId:n,loadingStrategy:"lazy"})};var ke=r(17287);const Re=e=>{const{previewItems:t,currentPreviewItemIndex:r,setCurrentPreviewItemIndex:n,playPreview:s,isListeningToPreview:i,playerContainerClass:o,cardRef:l}=e,c=(0,a.useCallback)((e=>{if(!t)return;if(r===e)return;const a=t[e];a&&(n(e),i&&s(a))}),[r,i,s,t,n]);return(0,R.jsx)(ke.FN,{wheelScrollEnabled:!1,scrollingMethod:ke.Hv.SNAP,scrollSnapAlign:"center",className:j()(k.carousel,k.fillSpaceAbsolute),scrollContentClassName:k.carouselScrollContent,scrollerClassName:k.carouselScroller,chevronsClassName:k.carouselChevrons,dragToScroll:!1,showButtons:ke.C_.ON_HOVER,edgeGradients:ke.TB.NONE,onScroll:c,children:t.map(((e,t)=>(0,R.jsx)(Ne,{item:e,playerContainerClass:o,cardRef:l,isListening:i,overridePlatformId:"desktop-home-1d-card-canvas"},`${e.uri}_${t}`)))})};var Ae=r(78294),Ee=r(97040),Te=r(99859);const _e=({uri:e,fileId:t,poster:r,overridePlatformId:n,playerContainerClass:s,className:i,startOffsetMs:o,endOffsetMs:l,children:c})=>{const{registerURI:u,unregisterURI:d}=(0,Ae.J)(),m=(0,a.useMemo)((()=>({videoPlayerContainer:`.${s}`})),[s]),p=(0,Ee.H)(m,void 0,void 0,void 0,n);(0,a.useEffect)((()=>(u(e,{uri:e,overture:p}),()=>{d(e)})),[e,u,d,p]);const g=(0,a.useRef)(null);return(0,a.useEffect)((()=>{t&&p.playTracks([(0,W.a2)({mediaType:"video",format:"MANIFEST_ID",fileId:t,uri:e,poster:r??"",options:{position:o},logData:{playbackId:(0,Te.E)()}})],{paused:!0,loop:!1,muted:!0})}),[e,p,t,r,o,l]),(0,R.jsxs)("div",{ref:g,className:j()(s,i),children:[r&&(0,R.jsx)("img",{"data-poster":!0,src:r,alt:""}),c]})},Me=e=>{const{userHasCompletedPreview:t,handleContinuePlayingButtonClick:r,overture:a,transcriptUrl:n,uri:s,playerContainerClass:i,handleCardClick:o,entityUrl:l,startOffsetMs:c,endOffsetMs:u,fileId:d,poster:m,shiftTranscriptByOffsetFromURL:p}=e,g=(0,y.NC)(Ie.eSY);return(0,R.jsxs)(Z.N,{onClick:o,to:l,className:k.centeredContainer,children:[(0,R.jsx)(_e,{uri:s,fileId:d,startOffsetMs:c??0,endOffsetMs:u??0,className:k.videoPreview,playerContainerClass:`${i}_Video`,overridePlatformId:"desktop-home-1d-card-video",poster:m,children:g&&n&&(0,R.jsx)("div",{className:j()(k.transcript,k.transcriptForVideo),children:(0,R.jsx)(Pe,{transcriptUrl:n,overture:a,shiftTranscriptByOffsetFromURL:p})})}),t?(0,R.jsx)(fe,{onClick:r}):null]})};var De=r(52061),Ue=r(28340);const Oe=({currentPreviewItem:e,uri:t,hasAudioWave:r,playerContainerClass:n,loop:s})=>{const[i,o]=(0,a.useState)({playing:!1,muted:!0,completed:!1,duration:0}),l={uri:t,currentPreviewItem:e,previewState:i,setPreviewState:o,hasAudioWave:r,playerContainerClass:n,loop:s,enabled:!0},c=(({uri:e,currentPreviewItem:t,setPreviewState:r,previewState:n,enabled:s})=>{const{isPlaying:i}=(0,Ue.P)({uri:e},{featureIdentifier:"home"}),o=(0,De.c)(),l=(0,Ae.J)(),c=l.getStateForURI(e)?.overture??null,u=t?.video,d=(0,y.NC)(Ie.x8),m=Boolean(u?.fileId),p=s&&d&&m,[g,h]=(0,a.useState)(null),f=p&&null===g,v=u?.startOffsetMs??0,x=u?.endOffsetMs??0,C=u?.transcriptUrl??null,b=Boolean(n&&n.playing&&!n.muted),j=Boolean(n&&n.completed&&!i),P=(0,a.useCallback)((async()=>{c&&((await c.getState()).playbackState.playing?c.setMuted(!n.muted):(c.setVolume(o.currentPlayerVolume),c.setMuted(!1),c.resume()))}),[c,n.muted,o.currentPlayerVolume]),I=(0,a.useCallback)((()=>{}),[]),w=(0,a.useCallback)((async()=>{f&&c&&(b||j||(c.setMuted(!0),c.resume()))}),[f,c,b,j]),L=(0,a.useCallback)((()=>{f&&c&&(b||j||c.pause().catch((()=>{})))}),[f,c,b,j]);return(0,a.useEffect)((()=>{if(!p)return;if(!c)return;const e=e=>{h(e.data.error)};return c.addListener(W.LW.ERROR,e),()=>{c.removeListener(W.LW.ERROR,e)}})),(0,a.useEffect)((()=>{if(!f)return;if(!c)return;const e=e=>{e.data.position>=x&&(c.seek(v),c.pause(),r((e=>({...e,completed:!0}))))};return c.addListener(W.LW.PROGRESS,e),()=>{c.removeListener(W.LW.PROGRESS,e)}}),[f,c,r,x,v]),{durationMs:x,isListeningToPreview:b,isPreviewAvailable:f,togglePreview:P,userHasCompletedPreview:j,playPreview:I,overture:c,transcriptUrl:C,shiftTranscriptByOffsetFromURL:!1,onPointerEnter:w,onPointerLeave:L,analyser:null}})(l),u=(({uri:e,currentPreviewItem:t,previewState:r,hasAudioWave:n,playerContainerClass:s,loop:i,enabled:o})=>{const{isPlaying:l}=(0,Ue.P)({uri:e},{featureIdentifier:"home"}),c=(0,De.c)(),u=Boolean(t?.audio?.url),d=(0,y.NC)(Ie.o5i),m=(0,y.NC)(Ie.i24),p=o&&d&&u,g=t?.audio?.transcriptUrl??null,h=(0,a.useMemo)((()=>{if(!m)return null;if(!n)return null;const e=new AudioContext,t=e.createAnalyser();t.fftSize=256;const r=e.createGain();return{context:e,analyser:t,gainNode:r}}),[n,m]);(0,a.useEffect)((()=>()=>{h&&h.context.close()}),[h]);const f=(0,a.useMemo)((()=>({audioPlayerContainer:`.${s}_Audio`,audioProcessorOptions:{disable:!0},preinitMediaElement:!1,disallowProtectedTracks:!0,enableWithoutEME:!0,createPlayer:()=>{const e=document.createElement("audio");if(h){const{context:t,analyser:r,gainNode:a}=h;e.crossOrigin="anonymous";const n=t.createMediaElementSource(e);n.connect(r),n.connect(a),a.connect(t.destination)}return e}})),[h,s]),[v,x]=(0,a.useState)(!1),C=Boolean(r&&r.playing&&v),b=Boolean(r&&r.completed&&!l),j=(0,a.useCallback)(((e,t)=>{h?(h.gainNode.gain.value=t*t*t,e.setVolume(1)):e.setVolume(t)}),[h]),P=(0,a.useCallback)(((e,t)=>t.playbackState.playing&&v),[v]),I=(0,a.useCallback)((e=>{x(!1),e.pause().catch((()=>{}))}),[x]),w=(0,Ee.H)(f,I,P,j,"desktop-home-1d-card-audio"),L=(0,a.useCallback)(((e,t)=>{x(t),j(w,e)}),[w,x,j]),S=(0,a.useCallback)((t=>{const r=t.audio?.url;r&&w.playTracks([(0,W.a2)({noAuth:!0,format:"GENERIC_MEDIA",mediaType:"audio",uri:e,url:r,logData:{playbackId:(0,Te.E)()}})],{loop:i,paused:!1,muted:!1})}),[w,e,i]),N=(0,a.useCallback)((async()=>{if(!p)return;if(!t)return;const e=await w.getCurrentState();e.track?.url===t.audio?.url?e.playbackState.playing?v?L(0,!1):L(c.currentPlayerVolume,!0):(L(c.currentPlayerVolume,!0),w.resume()):(L(c.currentPlayerVolume,!0),S(t))}),[p,t,w,L,c.currentPlayerVolume,v,S]),k=(0,a.useCallback)((async()=>{if(!p)return;if(!t)return;if(!n)return;if(C||b)return;const e=await w.getCurrentState();L(0,!1),e.track?.url===t?.audio?.url?w.resume():S(t)}),[p,t,n,C,b,w,L,S]),R=(0,a.useCallback)((()=>{p&&n&&(C||b||w.pause().catch((()=>{})))}),[p,n,C,b,w]);return{durationMs:r.duration??0,isPreviewAvailable:p,isListeningToPreview:C,togglePreview:N,playPreview:S,overture:w,userHasCompletedPreview:b,transcriptUrl:g,shiftTranscriptByOffsetFromURL:!0,onPointerEnter:k,onPointerLeave:R,analyser:h?.analyser??null}})({...l,enabled:!c.isPreviewAvailable}),d=c.isPreviewAvailable?"video":"audio",m="video"===d?c:u,{isPreviewAvailable:p,overture:g}=m;return(0,a.useEffect)((()=>{if(!p)return;if(!g)return;const e=e=>{o((t=>({...t,duration:e.data.duration})))},t=e=>{o((t=>({...t,muted:e.data.muted})))},r=()=>{o((e=>({...e,playing:!0,completed:!1})))},a=()=>{o((e=>({...e,playing:!1})))},n=()=>{o((e=>({...e,playing:!1,completed:!0})))};return g.on(W.LW.DURATION_CHANGED,e),g.on(W.LW.MUTED_CHANGED,t),g.on(W.LW.PLAYING,r),g.on(W.LW.PAUSED,a),g.on(W.LW.TRACK_ENDED,n),()=>{g.removeListener(W.LW.DURATION_CHANGED,e),g.removeListener(W.LW.MUTED_CHANGED,t),g.removeListener(W.LW.PLAYING,r),g.removeListener(W.LW.PAUSED,a),g.removeListener(W.LW.TRACK_ENDED,n)}}),[g,p]),{...m,type:d,previewState:i}};var Fe=r(57776),Be=r(59147);const He=new Fe.l("feedBaselineLookup","query","a950fb7c4ecdcaf2aad2f3ca9ee9c3aa4b9c43c97e1d07d05148c4d355bea7fc",null),We=(e,t)=>(0,Be.I)(He,e,t);var Ve=r(90124),Ge=r(6683),ze=r(81035),$e=r(63096);const Ye=(0,a.createContext)(new Map);function Ke(e,t){const r=new Map;for(const t of e)r.set(t,null);return t&&t.lookup.forEach((e=>{if("AlbumResponseWrapper"===e.__typename||"PlaylistResponseWrapper"===e.__typename||"EpisodeOrChapterResponseWrapper"===e.__typename)switch(e.data.__typename){case"Album":case"Playlist":{const t=(e.data.previewItems?.items||[]).reduce(((e,t)=>{if("TrackResponseWrapper"!==t.__typename)return e;if("Track"!==t.data.__typename)return e;const r=(0,$e.g)(t.data.albumOfTrack?.coverArt?.sources||[])?.url||null,a=t.data.albumOfTrack?.coverArt?.extractedColors?.colorDark?.hex||null,n=t.data.previews?.audioPreviews.items?.[0];return e.push({name:t.data.name,uri:t.data.uri,canvas:t.data.canvas?{uri:t.data.canvas.uri,type:t.data.canvas.type,fileId:t.data.canvas.fileId,url:t.data.canvas.url,thumbnailUrl:(0,$e.g)(t.data.canvas.thumbnail?.sources)?.url}:null,background:{color:a,imageUrl:r},audio:n?{url:n.url,startOffsetMs:0,endOffsetMs:0,transcriptUrl:null}:null,video:null}),e}),[]);r.set(e._uri,t);break}case"Episode":{const{audioPreview:t,videoPreview:a}=e.data.previewPlayback??{};r.set(e._uri,[{name:e.data.name,uri:e.data.uri,canvas:null,background:null,audio:t?.cdnUrl?{url:t.cdnUrl,startOffsetMs:t.offset?.startTime?.totalMilliseconds??0,endOffsetMs:t.offset?.endTime?.totalMilliseconds??0,transcriptUrl:t.transcriptUrl}:null,video:a?{fileId:a.fileId,thumbnailUrl:"ImageV2"===a.placeholderImage?.data.__typename?(0,$e.g)(a.placeholderImage?.data.sources)?.url??null:null,startOffsetMs:a.offset?.startTime?.totalMilliseconds??0,endOffsetMs:a.offset?.endTime?.totalMilliseconds??0,transcriptUrl:a.transcriptUrl}:null}]);break}}})),r}var Je=r(18113),Qe=r(27012),qe=r(37410),Ze=r(82846),Xe=r(50671),et=r(21549),tt=r(66387);let rt=function(e){return e.VideoEpisode="VideoEpisode",e.Carousel="Carousel",e.AudioEpisode="AudioEpisode",e}({});const at=({layout:e,onClick:t=(()=>{}),onPlay:r=(()=>{}),onContextMenu:n=(()=>{}),uri:s,headerText:i,renderFooter:o,isPlayable:l,isAddable:c,renderSubtitle:u,className:d,testId:m,ariaPlayLabel:p,ariaPauseLabel:g,index:h,requestId:f,images:v,parentImages:x,color:C,dragMimeType:b,onMoreButtonClick:S,menu:N,audioPreviewInLoop:E,logCardImpressions:T})=>{const{previewItems:_,currentPreviewItemIndex:M,setCurrentPreviewItemIndex:D,currentPreviewItem:U}=(e=>{const t=(0,y.NC)(Ie.o5i),[r,n]=(0,a.useState)(0),s=(0,a.useContext)(Ye),i=!s.has(e),{data:o}=We({uris:[e]},{enabled:i}),l=(0,a.useMemo)((()=>{let r=[];return r=s.has(e)?s.get(e)??[]:Ke([e],o).get(e)??[],t?r:r.slice(0,1)}),[o,t,s,e]);return{previewItems:l,currentPreviewItem:l[r]??null,currentPreviewItemIndex:r,setCurrentPreviewItemIndex:n}})(s),{dynamicColors:O}=(0,ie.q)(),F=O?.higherContrast.backgroundBase.toCSS(se.a.RGBA)??C,B=`BigCard_${s.replace("spotify:","").replace(/:/g,"_")}`,{isPlaying:H,isActive:W,togglePlay:V}=(0,Ue.P)({uri:s},{featureIdentifier:"home"}),{durationMs:G,isListeningToPreview:z,togglePreview:$,overture:Y,userHasCompletedPreview:K,previewState:Q,isPreviewAvailable:q,playPreview:Z,transcriptUrl:X,shiftTranscriptByOffsetFromURL:ee,onPointerEnter:te,onPointerLeave:re,analyser:ae}=Oe({uri:s,currentPreviewItem:U,hasAudioWave:e===rt.AudioEpisode,loop:E,playerContainerClass:B}),oe=(0,P.Zp)(),ce=(0,qe.W)({type:"link",uri:s}),{spec:ue,logger:de,UBIFragment:me}=(0,et.r)(w.y,{data:{uri:s,position:h,reason:f??""}}),pe=(0,Xe.t)(ue),{draggable:ge,onDragStart:he}=(0,Qe.P)({itemUris:[s],itemMimeTypes:b?[b]:[],dragLabelText:i}),fe=(0,a.useCallback)((()=>{let e=ue.cardPlayButtonFactory().hitPause({itemToBePaused:s});H||(e=W?ue.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):ue.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=de.logInteraction(e);r(s,t)?.preventDefault||V({loggingParams:t})}),[W,H,de,r,ue,V,s]),ve=(0,a.useCallback)((()=>{let e=ue.cardPlayButtonFactory().hitPause({itemToBePaused:s});H||(e=W?ue.cardPlayButtonFactory().hitResume({itemToBeResumed:s}):ue.cardPlayButtonFactory().hitPlay({itemToBePlayed:s}));const t=de.logInteraction(e);r(s,t),V({loggingParams:t})}),[W,H,de,r,ue,V,s]),ye=(0,a.useCallback)((()=>{const e=ue.hitUiNavigate({destination:s});de.logInteraction(e)}),[de,ue,s]),xe=(0,a.useCallback)((()=>{t(s),ye()}),[t,s,ye]),Ce=(0,L.o_h)(s)?.toURLPath(!0)??"",be=ce?(0,tt.hF)(Ce):Ce,je=(0,a.useRef)(null),[Pe,Le]=(0,a.useState)(!1),Se=e===rt.VideoEpisode||e===rt.Carousel,Ne={...(0,Ze.w)({contrast:"higherContrast"}),"--background-color":F||"","--background-base-high-contrast":O?.highContrast.backgroundBase.toCSS(se.a.RGBA)||"","--higher-contrast-text-base-color":O?.higherContrast.textSubdued.toCSS(se.a.RGBA)||""};return(0,R.jsx)(me,{spec:ue,children:(0,R.jsx)(Je.E,{uri:s,trigger:Je.l.OnMouseDown,children:(0,R.jsxs)(I.a,{variant:"naked",onClick:()=>{xe(),oe(be)},ref:je,className:j()(k.card,d,"encore-medium-devices-theme",{[k.isPlayingContext]:H,[k.isListeningToPreview]:z,[k.isExpandedFooter]:Pe,[k.withHeaderImage]:Se}),style:Ne,"data-testid":m,draggable:ge,onDragStart:he,onContextMenu:n,onPointerEnter:te,onPointerLeave:re,children:[(0,R.jsx)("div",{"data-uri":s,className:k.fillSpaceAbsolute,ref:T?pe:null}),e===rt.Carousel?(0,R.jsx)(Re,{cardRef:je,isListeningToPreview:z,playPreview:Z,playerContainerClass:B,previewItems:_,setCurrentPreviewItemIndex:D,currentPreviewItemIndex:M}):null,(0,R.jsx)(le,{carouselLayout:e===rt.Carousel,withFooterOverlay:Boolean(o)}),(0,R.jsx)(ne,{uri:s,text:i,images:v,imageColor:F,renderSubtitle:u,cardRef:je}),e===rt.VideoEpisode&&U?.video?(0,R.jsx)(Me,{userHasCompletedPreview:K,handleContinuePlayingButtonClick:ve,overture:Y,transcriptUrl:X,shiftTranscriptByOffsetFromURL:ee,uri:s,playerContainerClass:B,handleCardClick:xe,entityUrl:be,fileId:U.video.fileId,poster:U.video.thumbnailUrl,startOffsetMs:U.video.startOffsetMs,endOffsetMs:U.video.endOffsetMs}):null,e===rt.AudioEpisode?(0,R.jsx)(we,{analyser:ae,userHasCompletedPreview:K,handleContinuePlayingButtonClick:ve,overture:Y,playerContainerClass:B,transcriptUrl:X,shiftTranscriptByOffsetFromURL:ee,uri:s,previewState:Q,parentImages:x,images:v,imageColor:F,handleCardClick:xe,entityUrl:be}):null,(0,R.jsxs)("footer",{className:k.footer,children:[(0,R.jsx)(A,{isExpandedFooter:Pe,setIsExpandedFooter:Le,children:o?.()}),(0,R.jsx)(J,{uri:s,overture:Y,isPreviewAvailable:q,isPlayingContext:H,isListeningToPreview:z,durationMs:G,togglePreview:$,userHasCompletedPreview:K,currentPreviewItem:U,isAddable:c,isPlayable:l,ariaPlayLabel:p,ariaPauseLabel:g,onMoreButtonClick:S,handlePlayButtonClick:fe,menu:N})]})]})})})};var nt=r(81288),st=r(65462),it=r(78516),ot=r(47863),lt=r(91676),ct=r(40675),ut=r(33712),dt=r(33593),mt=r(31026),pt=r(67668),gt=r(99041),ht=r(20489),ft=r(41661),vt=r(50866),yt=r(99958),xt=r(61714),Ct=r(83327),bt=r(16157),jt=r(63775),Pt=r(53149),It=r(75049),wt=r(72051),Lt=r(13719),St=r(85907),Nt=r(79225);const kt="SsbbQFeJun2Ts_EIktpr",Rt="c9BGAQRNNsdwX3UTMr6I",At="uywGjRMxNHg8g1bYlRCw",Et="lx7nfGbsUkI_2pC6caw9",Tt="xrnpBm515hmJJbcxfudp",_t="zEXW4c9SPtH2KBs6ziag",Mt="bAtY2R6yehmYQinDdUo8",Dt="kKlHj6lIKU67CC1irRYP",Ut="dwXI_X_KOCLVx2Ki1h9R",Ot="vK47ZfLVzR4LfUvpNy5z",Ft="CZnhsxKzhvTg17LEWR7Y";function Bt({data:e,index:t,shelfIndex:r}){const a=t,o=(0,mt.f0)(e),l=(0,mt.o8)(e),c=(0,mt.Uk)(e)??null,u=(0,y.NC)(oe.BC),d=(0,n.wA)(),m=(0,pt.V)(),p=(0,y.NC)(Ie.x8);let g;switch(e.__typename){case"Album":g=(0,R.jsx)(it.h,{uri:e.uri});break;case"Audiobook":g=(0,R.jsx)(ot.p,{uri:e.uri});break;case"Episode":g=(0,R.jsx)(lt.b,{uri:e.uri});break;case"Playlist":g=(0,R.jsx)(ct.W,{uri:e.uri});break;default:return(0,St.k)(e),null}switch(e.__typename){case"Album":return(0,R.jsx)(st.h,{menu:g,children:(0,R.jsx)(at,{index:t,shelfIndex:r,headerText:e.name,uri:e.uri,images:o,color:c,isPlayable:!0,isAddable:!0,audioPreviewInLoop:!0,layout:rt.Carousel,renderFooter:()=>null,renderSubtitle:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(nt.t,{children:e.albumType===bt._m.Single?x.Ru.get("single"):x.Ru.get("card.tag.album")}),(0,R.jsx)("div",{className:Ft,children:(0,jt.K)(e.artists).map(((e,t)=>[t>0&&x.Ru.getSeparator(),(0,R.jsx)(Z.N,{to:e.uri,stopPropagation:!0,children:(0,R.jsx)(s.E,{variant:"bodySmall",className:Dt,children:e.name})},e.uri)]))})]}),menu:g,logCardImpressions:u})},a);case"Audiobook":{const n=(0,mt.Dx)(e),l=n&&!m?()=>(d((0,C._3)(n)),{preventDefault:!0}):void 0;return(0,R.jsx)(ie.d,{dynamicColors:(0,yt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,R.jsx)(st.h,{menu:g,children:(0,R.jsx)(at,{index:t,shelfIndex:r,headerText:e.name,uri:e.uri,images:o,color:c,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:rt.AudioEpisode,onPlay:l,renderFooter:()=>{const t=e.rating?.averageRating,r=e.accessInfo?.signifier?.text,a=(e.description||"").replace(/<[^>]*>?/gm,""),n=(0,It.JO)(e.publishDate),o=n?new Date(n):void 0;return(0,R.jsxs)(R.Fragment,{children:[r&&(0,R.jsx)(s.E,{variant:"bodySmall",as:"div",semanticColor:"textBrightAccent",children:r}),o&&!isNaN(o.getTime())&&(0,R.jsx)(nt.t,{semanticColor:"textBase",className:Ot,children:(0,Nt.gD)(o)}),e.audiobookDuration&&!isNaN(e.audiobookDuration.totalMilliseconds)&&(0,R.jsx)(nt.t,{semanticColor:"textBase",className:Ot,children:(0,R.jsx)(vt.d,{durationMs:e.audiobookDuration.totalMilliseconds})}),!0===t?.showAverage&&void 0!==t.average&&(0,R.jsxs)(nt.t,{semanticColor:"textBase",className:Ot,children:[(0,R.jsx)(i.j,{size:"xsmall"})," ",x.Ru.formatNumber(t.average,{maximumFractionDigits:1})]}),(0,R.jsx)("span",{children:(0,R.jsx)(ft.N,{source:a??"",LinkComponent:Z.N})})]})},renderSubtitle:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(nt.t,{children:x.Ru.get("card.tag.audiobook")}),(0,R.jsx)("span",{children:e.authors?.[0]?.name})]}),menu:g,logCardImpressions:u})},a)})}case"Episode":{const n=e.mediaTypes?.includes(wt.C.Video),i=n&&p;return(0,R.jsx)(ie.d,{dynamicColors:(0,yt.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet),children:(0,R.jsx)(st.h,{menu:g,children:(0,R.jsx)(at,{index:t,shelfIndex:r,headerText:e.name,uri:e.uri,images:o,parentImages:l,color:c,isAddable:!0,isPlayable:!0,audioPreviewInLoop:!1,layout:i?rt.VideoEpisode:rt.AudioEpisode,renderSubtitle:()=>(0,R.jsxs)(R.Fragment,{children:[(0,Pt.V)(e.contentRating)&&(0,R.jsx)(gt.U,{}),n?(0,R.jsx)(dt.T,{className:Ut}):(0,R.jsx)(nt.t,{children:x.Ru.get("card.tag.episode")}),(0,R.jsx)("div",{className:Ft,children:"Podcast"===e.podcastV2.data.__typename?(0,R.jsx)(Z.N,{to:e.podcastV2.data.uri,stopPropagation:!0,children:(0,R.jsx)(s.E,{variant:"bodySmall",className:Mt,children:e.podcastV2.data.name})}):""})]}),renderFooter:()=>{const t=(0,It.JO)(e.releaseDate),r=t?new Date(t):void 0;return(0,R.jsxs)(R.Fragment,{children:[r&&!isNaN(r.getTime())&&(0,R.jsx)(nt.t,{semanticColor:"textBase",className:Ot,children:(0,Nt.gD)(r)}),!isNaN(e.duration.totalMilliseconds)&&(0,R.jsx)(nt.t,{semanticColor:"textBase",className:Ot,children:(0,R.jsx)(vt.d,{durationMs:e.duration.totalMilliseconds})}),(0,R.jsx)("span",{children:(0,R.jsx)(ft.N,{source:e.description??"",LinkComponent:Z.N})})]})},menu:g,logCardImpressions:u})},a)})}case"Playlist":return(0,R.jsx)(st.h,{menu:g,children:(0,R.jsx)(at,{index:t,shelfIndex:r,headerText:e.name,uri:e.uri,images:o,color:c,isAddable:!0,audioPreviewInLoop:!0,layout:rt.Carousel,isPlayable:!(0,xt.p)(e?.attributes),renderSubtitle:()=>(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(nt.t,{children:x.Ru.get("card.tag.playlist")}),"User"===e.ownerV2.data.__typename&&(0,R.jsx)("div",{className:Ft,children:e.ownerV2.data.name})]}),renderFooter:()=>(0,R.jsx)(ft.N,{source:e.description??"",LinkComponent:Z.N,onLinkClick:e=>{e.stopPropagation()}}),menu:g,logCardImpressions:u})},a);default:return(0,St.k)(e),null}}const Ht=({icon:e})=>{switch(e){case"trending":return(0,R.jsx)(o.L,{size:"small"});case"briefcase":return(0,R.jsx)(l.o,{size:"small"});case"enhance":return(0,R.jsx)(c.M,{size:"small"});case"headphones":return(0,R.jsx)(u.r,{size:"small"});case"add-to-playlist":return(0,R.jsx)(d.u,{size:"small"});case"album":return(0,R.jsx)(m.I,{size:"small"});case"edit":return(0,R.jsx)(p.G,{size:"small"});case"lab":return(0,R.jsx)(g.X,{size:"small"});case"light-bulb":return(0,R.jsx)(h.N,{size:"small"});case"preview":return(0,R.jsx)(f.W,{size:"small"});case"star":return(0,R.jsx)(v.a,{size:"small"});default:return null}},Wt=({title:e,icon:t})=>(0,R.jsxs)("header",{className:Tt,children:[e&&t&&(0,R.jsx)(Ht,{icon:t}),e&&(0,R.jsx)(s.E,{variant:"bodySmall",semanticColor:"textSubdued",className:_t,children:e})]});const Vt=({spec:e,section:t,index:r})=>{const a=t.items.map(((e,t)=>(({item:e,index:t,shelfIndex:r})=>(0,ze.vd)(e.content)&&function(e){switch(e.__typename){case"Album":case"Audiobook":case"Episode":case"Playlist":return!0;default:return!1}}(e.content.data)?(0,R.jsx)("div",{className:Rt,children:(0,R.jsx)("div",{className:At,children:(0,R.jsxs)("div",{className:Et,children:[(0,R.jsx)(Wt,{icon:e.recsplanation?.iconName,title:e.recsplanation.title?.transformedLabel}),(0,R.jsx)(Bt,{data:e.content.data,index:t,shelfIndex:r})]})})},t):null)({item:e,index:t,shelfIndex:r}))).filter(Lt.P);return 0===a.length?null:(0,R.jsx)(ht.x,{config:(0,te.s1)(te.yV.HOME_FEED_BASELINE),children:(0,R.jsx)(Ct.r,{spec:e.shelvesFactory(),children:(0,R.jsx)(ut.p,{id:t.uri,className:kt,index:r,total:a.length,rowTruncationMethod:"floor",children:a})})})};var Gt=r(68461),zt=r(68355),$t=r(92255),Yt=r(78505),Kt=r(32810);var Jt=r(24281);var Qt=r(90224),qt=r(72750);const Zt=()=>{const e=(0,y.NC)(Ie.qKB),t=(r=(0,Qt.J)(),!(0,Jt.w)(navigator.userAgent)&&(1===r.length||1===window.navigation?.entries().length));var r;const n=e&&t,[s,i]=(0,a.useState)(n?(()=>{try{const e=window.innerHeight-Yt.uC-Yt.fO;return Math.ceil(e/$t.Y)}catch(e){return e instanceof Error&&(0,Kt.fE)({metric_type:zt.MetricTypes.COUNTER,tags:{message:e.message,source:"deriveLimit"},what:"dwp-lazy-shelves-error",value:1}),null}})():null),o=(e=>(0,a.useCallback)((()=>{try{e()}catch(e){e instanceof Error&&(0,Kt.fE)({metric_type:zt.MetricTypes.COUNTER,tags:{message:e.message,source:"useHandleTrigger"},what:"dwp-lazy-shelves-error",value:1})}}),[e]))((0,a.useCallback)((()=>{s&&i(null)}),[s,i]));return((e,t)=>{(0,qt.g)((()=>t("scroll")),{disabled:null===e})})(s,o),((e,t)=>{(0,a.useEffect)((()=>{if(null===e)return;const r=setTimeout((()=>t("timeout")),3e3);return()=>{clearTimeout(r)}}),[e,t])})(s,o),s};const Xt=({spec:e,greeting:t,container:r,enableFeedBaseline:n})=>{const s=(0,a.useMemo)((()=>((e,t)=>{const r=[];let a=[],n=null;const s=e.sections.items.reduce(((e,r)=>{switch(r.data?.__typename){case"HomeFeedBaselineSectionData":if(!t)break;null===n&&(n={uri:`spotify:home:feed-baseline-unified-shelf:${e.length}`,items:[]},e.push({localOverrideTypename:"HomeFeedBaselineUnifiedShelf",localItem:n})),r.sectionItems.items.forEach((e=>{n&&n.items.push({uri:e.uri,content:e.content,recsplanation:r.data})}));break;default:n=null,e.push({localOverrideTypename:!1,item:r})}return e}),[]);return a=function(e){const t=e.sections.items;return t.length>0&&"HomeShortsSectionData"===t[0].data?.__typename}(e)?[s[0],...r,...s.slice(1)]:[...r,...s],a})(r,n)),[r,n]),i=Zt(),o=i?s.slice(0,i):s,l=function(e,t){const r=(0,a.useMemo)((()=>t?e.sections.items.reduce(((e,t)=>("HomeFeedBaselineSectionData"===t.data?.__typename&&(0,Ve.M)(t,t.data).sectionItems.items.forEach((t=>{const{content:r}=t;if((0,ze.vd)(r)){const{data:t}=r;"GenericError"!==t.__typename&&"NotFound"!==t.__typename&&"RestrictedContent"!==t.__typename&&"DiscoveryFeed"!==t.__typename&&e.push(t.uri)}})),e)),[]):[]),[e,t]),{data:n}=We({uris:r},{enabled:r.length>0,gcTime:Ge.gO,staleTime:Ge.jl});return(0,a.useMemo)((()=>Ke(r,n)),[n,r])}(r,n);return(0,R.jsx)(R.Fragment,{children:(0,R.jsx)(Ye.Provider,{value:l,children:o.map(((r,a)=>"HomeFeedBaselineUnifiedShelf"===r.localOverrideTypename?(0,R.jsx)(Vt,{spec:e,section:r.localItem,index:a},`${a}-${r.localItem.uri}`):(0,R.jsx)(Gt.Q,{spec:e,greeting:t,section:r.item,index:a},`${a}-${r.item.uri}`)))})})}},60836:(e,t,r)=>{r.d(t,{f:()=>o});var a=r(30758),n=r(89737),s=r(99435),i=r(86070);const o=(0,a.memo)((({cardCount:e,showAll:t,withTitle:r})=>(0,i.jsx)(s._,{isLoading:!0,withTitle:r,showAll:t??!1,children:[...new Array(e).keys()].map(((e,t)=>(0,i.jsx)(n.u,{isLoading:!0},t)))})))},20829:(e,t,r)=>{r.d(t,{$I:()=>i,Qv:()=>s,R2:()=>n});var a=r(35035);const n=(e,t)=>{const r=e.contextMenuButtonFactory().hitUiReveal();t.logInteraction(r)},s=(e,t,r,n)=>{let s;e===a.NV.ADD?s=t.hitDownload({itemToDownload:n}):e===a.NV.REMOVE?s=t.hitRemoveDownload({itemToRemoveFromDownloads:n}):e===a.NV.NO_PERMISSION&&(s=t.hitUiReveal?.()),s&&r.logInteraction(s)},i=({isPlaying:e,isActive:t,spec:r,logger:a,uri:n})=>{let s;return s=e?r.hitPause({itemToBePaused:n}):t?r.hitResume({itemToBeResumed:n}):r.hitPlay({itemToBePlayed:n}),a.logInteraction(s)}},15273:(e,t,r)=>{r.d(t,{b:()=>i});var a=r(41526),n=r(37178),s=r(99644);const i=e=>{const t=(0,n.W)();(0,s.w)({refOrElement:e,observeOnly:"width",observeOnMount:!0,onResize:()=>{const r=e.current?.querySelectorAll(":scope > [data-shelf='carousel']");if(r?.length)for(const e of r)if(e instanceof HTMLElement){(0,a.X)(e,t)?e.removeAttribute("data-shelf-notatedge"):e.setAttribute("data-shelf-notatedge","true")}}})}},95320:(e,t,r)=>{r.d(t,{v:()=>i});var a=r(7069),n=r(45627),s=r(5805);function i(e){if("string"==typeof e)return(0,a.g)(e);const t=e;return(0,s.v)(t)||(0,n.p)(t)}},68204:(e,t,r)=>{r.d(t,{g:()=>a.g});var a=r(88882)},31650:(e,t,r)=>{r.d(t,{v:()=>a.v});var a=r(95320)},44859:(e,t,r)=>{r.d(t,{RT:()=>x,Gg:()=>I,Eg:()=>j});var a=r(30758),n=r(18254),s=r(97500),i=r.n(s),o=r(21743),l=r(88308),c=r(79126),u=r(22726),d=r(97040),m=r(59390),p=r(99859),g=r(2679),h=r(16157);const f="huMHH_FySIW5UhSrJfy8",v="mmpwfbCOORaWT_xuMBIx";var y=r(86070);let x=function(e){return e.Loop="loop",e.LoopOnHover="loopOnHover",e.LoopOnPlayback="loopOnPlayback",e}({});function C(e){return!!e&&(0,u.bpK)(e)}function b(e){return!!e}function j(e,t){return C(t)&&b(e)}function P(e,t,r,a,n){if(!C(r))return null;if(!b(e))return null;const s={};return n&&(s.position=Math.trunc(8e3*Math.random())),(0,c.a2)({fileId:e,uri:r,url:t??void 0,poster:a??void 0,mediaType:"video",format:{}.DEBUG_OVERTURE_WITHOUT_EME?"GENERIC_MEDIA":"MANIFEST_ID",options:s,logData:{playbackId:(0,p.E)()}})}const I=({canvasUri:e,fileId:t,canvasUrl:r,canvasType:s,canvasThumbnailUrl:u,overridePlatformId:p,playerContainerClass:C,children:b,className:j,playbackType:I=x.LoopOnHover,onError:w=(()=>{}),mouseHoverRef:L=null,useContainerMouseOverEvents:S=!1,allowAspectRatioFix:N=!1,onLoaded:k=(()=>{}),loadingStrategy:R="lazy"})=>{const A=(0,a.useRef)(null),{ref:E,inView:T}=(0,o.Wx)({triggerOnce:!0}),_=(0,m.S)([A,E]),M=(0,a.useMemo)((()=>({disallowProtectedTracks:!0,enableWithoutEME:!0,videoPlayerContainer:`.${C}`,audioPlayerContainer:`.${C}`})),[C]),D=(0,a.useCallback)((()=>!1),[]),U=(0,d.H)(M,D,D,D,p),[O,F]=(0,a.useState)(!1),[B,H]=(0,a.useState)(!1),[W,V]=(0,a.useState)(!1),{isPlaying:G}=(0,g.GK)();(0,l.Ij)((()=>{if(!T&&"lazy"===R)return;const a=P(t,r,e,u,s===h.PJ.VideoLoopingRandom);return a?(U.playTracks([a],{paused:I===x.LoopOnHover||I===x.LoopOnPlayback&&!G,muted:!0,loop:!0}),U.on(c.LW.TRACK_LOADED,(()=>{const e=document.getElementsByClassName(C),t=e[0]?.querySelector("video");if(t&&A.current){if(A.current.appendChild(t),N){t.videoWidth/t.videoHeight>9/16&&H(!0)}t.autoplay=I===x.LoopOnPlayback&&G||I===x.Loop}F(!0),k()})),U.on(c.LW.ERROR,(e=>{w(e.data.error),V(!1),(0,n.Cp)(e.data.error)})),U.on(c.LW.PLAYING,(()=>{V(!0)})),U.on(c.LW.PAUSED,(()=>{V(!1)})),U.on(c.LW.STOPPED,(()=>{V(!1)})),()=>{F(!1),U.stop(),U.removeAllListeners()}):void 0}),[t,e,T,R]);const z=(0,a.useRef)(null),$=(0,a.useRef)(!1),Y=(0,a.useCallback)((()=>{$.current=!0,z.current&&clearTimeout(z.current),O&&U.resume()}),[O,U]),K=(0,a.useCallback)((()=>{$.current=!1,z.current&&clearTimeout(z.current),z.current=setTimeout((()=>{O&&U.pause()}),300)}),[O,U]);return(0,a.useEffect)((()=>{const e=L?.current;if(e&&I===x.LoopOnHover)return e.addEventListener("mouseenter",Y),e.addEventListener("mouseleave",K),e.addEventListener("mousemove",Y,{once:!0}),()=>{e.removeEventListener("mouseenter",Y),e.removeEventListener("mousemove",Y),e.removeEventListener("mouseleave",K)}}),[I,Y,K,G,L]),(0,a.useEffect)((()=>{I===x.LoopOnHover&&!$.current&&W&&U.pause()}),[L,U,I,O,W]),(0,a.useEffect)((()=>{I===x.LoopOnPlayback&&O&&(G?U.resume():U.pause())}),[G,O,U,I]),(0,y.jsx)("div",{className:i()(C,j,f,{[v]:B}),onMouseEnter:()=>{S?Y():$.current=!0},onMouseLeave:()=>{S?K():$.current=!1},ref:_,children:b})}},72700:(e,t,r)=>{r.d(t,{f:()=>c});var a=r(14343),n=r(11472),s=r(6683),i=r(26921),o=r(38501),l=r(95175);const c=()=>{const e=(0,i.f)(),t=(0,a.NC)(o.MX4),r=(0,a.NC)(o.HO),c=t?s.SF:s.J3,u={timeZone:(0,s.Ff)(),sp_t:(0,l.v8)("sp_t")??"",facet:e,sectionItemsLimit:c,enableDynamicColors:r},d={gcTime:s.gO,staleTime:s.jl};return(0,n.B8)(u,d)}},12099:(e,t,r)=>{r.r(t),r.d(t,{RecentlyPlayedHomeCarouselShelf:()=>T,RecentlyPlayedHomeGridShelf:()=>E,default:()=>_});var a=r(30758),n=r(97500),s=r.n(n),i=r(6772),o=r(14343),l=r(31417),c=r(90139),u=r(10831),d=r(89519),m=r(75134),p=r(80809),g=r(30343),h=r(84779),f=r(65324),v=r(33712),y=r(77773),x=r(17385),C=r(59724),b=r(38501),j=r(20489),P=r(42795),I=r(61714),w=r(34223),L=r(35008),S=r(85907);const N="wu4hGzXkWRNdY0UX1MJa";var k=r(86070);function R(e){const t=new Set;return e.filter((e=>{if(e.type===L.d2.LIKED_SONGS){if(t.has(e.type))return!1;t.add(e.type)}return!0}))}const A=(e,t,r,a=!1)=>{const n=e.uri;switch(e.type){case L.d2.LIKED_SONGS:return(0,k.jsx)(y.o,{index:t,variant:r},n);case L.d2.YOUR_EPISODES:return(0,k.jsx)(C.e,{index:t,variant:r},n);case L.d2.ALBUM:return(0,k.jsx)(c.a,{index:t,name:e.name,uri:e.uri,images:e.images,artists:e.artists,sharingInfo:null,variant:r,logCardImpressions:a},n);case L.d2.ARTIST:return(0,k.jsx)(u.a,{index:t,name:e.name,uri:e.uri,images:e.images,variant:r,logCardImpressions:a},n);case L.d2.PLAYLIST:return(0,k.jsx)(p.B,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner.displayName,authorUri:e.owner.uri,isPlayable:!(0,I.p)(e.attributes),variant:r,logCardImpressions:a,leaveTitleVisible:!0},n);case L.d2.SHOW:return(0,k.jsx)(g.o,{index:t,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null,variant:r,logCardImpressions:a},n);case L.d2.AUDIOBOOK:return(0,k.jsx)(d.M,{index:t,name:e.name,uri:e.uri,images:e.images,authorName:e.authors?.[0]??"",signifierText:e.signifierText,variant:r,logCardImpressions:a},n);case L.d2.TRACK:return(0,k.jsx)(h.w,{index:t,name:e.name,uri:e.uri,images:e.images,is19PlusOnly:e.isMOGEFRestricted,artists:e.artists,album:null,isExplicit:e.isExplicit,sharingInfo:null,variant:r,logCardImpressions:a},n);default:return(0,S.k)(e),null}},E=({title:e,index:t,id:r})=>{const n=(0,w.F)(!0),s=(0,o.NC)(b.BCG),i=(0,o.NC)(b.WAq),l=(0,a.useMemo)((()=>{if(!n)return[];return R(n).map(((e,t)=>A(e,t,i?m._.Compact:m._.Default,s)))}),[n,i,s]);return 0===l.length?null:(0,k.jsx)(j.x,{config:(0,P.s1)(i?P.yV.HOME_HIGH_DENSITY:P.yV.HOME_REGULAR_DENSITY),children:(0,k.jsx)(v.p,{id:r,index:t,total:l.length,seeAllUri:`/genre/${x.r}`,title:e,children:l})})},T=({title:e,className:t,index:r,id:n})=>{const s=(0,w.F)(!0),i=(0,o.NC)(b.BCG),l=(0,a.useMemo)((()=>{if(!s)return[];return R(s).map(((e,t)=>A(e,t,m._.Compact,i)))}),[s,i]);return 0===l.length?null:(0,k.jsx)(f.R,{index:r,id:n,title:e,seeAllUri:`/genre/${x.r}`,className:t,children:l})},_=()=>{const e=(0,w.F)(!0);if(!e)return[];const t=R(e);return null===e?null:(0,k.jsx)("section",{className:s()("contentSpacing",N),children:(0,k.jsx)(v.p,{id:"recently-played",title:l.Ru.get("view.recently-played"),showAll:!0,index:0,rowGap:i.lT,fullPage:!0,children:t.map(((e,t)=>A(e,t,m._.Default)))})})}},39745:(e,t,r)=>{r.d(t,{R:()=>n,Z:()=>a});const a="desktop-home-watch-feed",n="desktop-watch-feed"},15011:(e,t,r)=>{r.d(t,{_:()=>s});var a=r(14343),n=r(38501);const s=()=>(0,a.NC)(n.p5T,{loadingValue:!1})},52061:(e,t,r)=>{r.d(t,{c:()=>s});var a=r(12032),n=r(30157);function s(){return(0,n.N)(a.W)}},97040:(e,t,r)=>{r.d(t,{H:()=>i});var a=r(30758),n=r(29195),s=r(52061);const i=(e,t,r,i,o)=>{const l=(0,s.c)(),c=(0,n.mv)(),u=(0,a.useRef)(r);u.current=r;const d=(0,a.useRef)(t);d.current=t;const m=(0,a.useRef)(i);m.current=i;const p=(0,a.useMemo)((()=>{const t=u.current?(...e)=>!!u.current&&u.current(...e):void 0,r=d.current?(...e)=>{d.current&&d.current(...e)}:void 0,a=m.current?(...e)=>{m.current&&m.current(...e)}:void 0;return l.createOvertureInstance(e,r,t,a,o,c.version)}),[l,e,c.version,o]);return(0,a.useEffect)((()=>()=>{l.deleteOvertureInstance(p),p.removeAllListeners(),p.stop()}),[p,l]),p}},34223:(e,t,r)=>{r.d(t,{F:()=>i});var a=r(30758),n=r(35008),s=r(30157);function i(e=!0){const t=(0,s.N)(n.X6),[r,i]=(0,a.useState)((()=>t.getContexts()));return(0,a.useEffect)((()=>{if(!e)return;return t.getEvents().addListener(n.m5.UPDATE,(({data:e})=>{i(e)}))}),[t,e]),r}},56970:(e,t,r)=>{r.d(t,{L$:()=>l,Q2:()=>c,hV:()=>o,j2:()=>i,pr:()=>d,qc:()=>s,rO:()=>u});var a=r(16157),n=r(13155);const s=({albumArtists:e,albumName:t,albumType:r,shouldLocalize:s,i18n:i})=>{if(!r||!t||!e)return"";const o=r!==a._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(r):r,l=(0,n.C)(r),c=`${t} - ${o} by ${e} | Spotify`,u=i.get("i18n.meta.album.title",t,l,e);return s?u:c},i=({artistName:e})=>e?`${e} | Spotify`:"",o=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",l=({episodeOrChapterName:e,showOrAudiobookName:t,type:r})=>e&&t?`${e} - ${t} | ${r} on Spotify`:"",c=({playlistName:e,userName:t,isSpotifyOwned:r=!1})=>{if(!e||!t)return"";return`${e}${r?"":` - playlist by ${t}`} | ${r?"Spotify Playlist":"Spotify"}`},u=({i18n:e,trackArtistsList:t,trackName:r,shouldLocalize:a,disabled:n=!1})=>{if(!t||!r)return"";let s=`${r} - song and lyrics by ${t} | Spotify`,i=e.get("i18n.meta.track-lyrics.title",r,t);return n&&(s=`${r} - song by ${t} | Spotify`,i=e.get("i18n.meta.track.title",r,t)),a?i:s},d=({i18n:e,shouldLocalize:t})=>{const r=e.get("i18n.meta.home.title");return t?r:"Spotify - Web Player: Music for everyone"}}}]);
//# sourceMappingURL=home-v2.js.map