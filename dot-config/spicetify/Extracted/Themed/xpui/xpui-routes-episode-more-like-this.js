"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[399],{75040:(e,t,i)=>{i.d(t,{k:()=>c});var n=i(30758),a=i(31417),r=i(57239),s=i(89402),o=i(36025),l=i(7971),d=i(86070);const c=({id:e,children:t,targetURI:i,fadeOut:c=!1})=>{const u=(0,n.useCallback)((()=>{window.open((0,o.rw)(i).href)}),[i]),p={getTitle:()=>a.Ru.get("action-trigger.available-in-app-only"),getDescription:()=>a.Ru.get("action-trigger.listen-mixed-media-episode"),primaryButtonText:()=>a.Ru.get("action-trigger.button.get-app"),secondaryButtonText:()=>a.Ru.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,s.W)(),shouldHideOnScroll:!0,fadeOut:c};return(0,d.jsx)(r.U,{className:l.A.container,id:e,onPrimaryButtonClick:u,options:p,children:t})}},58110:(e,t,i)=>{i.d(t,{b:()=>l});var n=i(30758),a=i(83352),r=i(89402),s=i(24533),o=i(86070);const l=n.memo((function({uri:e,className:t,onClick:i,size:l=a.t.xs,condensed:d}){const[c,u]=(0,s.A)(e),p=(0,r.W)(),g=(0,n.useCallback)((t=>{t.preventDefault(),p({targetUri:e,intent:c?"remove-from-library":"add-to-library",type:"click"}),i&&i(!c),u(!c)}),[p,e,c,i,u]);return(0,o.jsx)(a.M,{className:t,size:l,onClick:g,isAdded:!!c,isEpisode:!0,condensed:d})}))},7135:(e,t,i)=>{i.d(t,{W:()=>L});var n=i(97500),a=i.n(n),r=i(22726),s=i(31417),o=i(78464),l=i(57776),d=i(59147);const c=new l.l("internalLinkRecommenderEpisode","query","7961c70ee317dc56ff7deda89bcbe37e205d1070edc56bae713c86ce716e5bf9",null);var u=i(71056),p=i(30758),g=i(62411),m=i(99921),h=i(75040),y=i(65462),f=i(91676),b=i(33934),_=i(57239),w=i(23798),v=i(27012),x=i(67668),k=i(44825),P=i(99041),I=i(54003),A=i(18663),S=i(44672),C=i(51354),E=i(28340),T=i(86931),R=i(16157),j=i(15838),N=i(86070);const U=e=>`activation-trigger-mme-${e}`,M=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:n,contentRatingLabel:a,description:s,mediaTypes:o,releaseDate:l,name:d,playable:c,playedState:u,podcastSubscription:M,sharingInfo:D,showName:V,showTrailer:$,showTypes:F,showUri:O,status:W,totalMilliseconds:B,type:G,uri:L}){const z=u.playPositionMilliseconds,q=(0,p.useRef)(null),[Y,H]=(0,p.useState)(u.state===R._w.Completed),{draggable:Q,onDragStart:Z}=(0,v.P)(),X=(0,x.V)(),J=(0,C.y)(),K=(0,g.wA)(),{isActive:ee,isPlaying:te,togglePlay:ie}=(0,E.P)({uri:L},{featureIdentifier:"episode"}),[ne]=(0,T.S)(1e4,(e=>e?.item?.uri===L));(0,p.useEffect)((()=>{te&&(q.current=ne)}),[te,ne]),(0,p.useEffect)((()=>{!te&&q.current&&B<=q.current&&H(!0)}),[te,B]);const ae=(0,p.useCallback)((e=>{e||(q.current=0),H(e)}),[]),re={uri:O,name:V,trailer:$,showTypes:F},se=(0,k.C)({audio:t,name:d,uri:L,mediaTypes:o,coverArt:{sources:n}},re),oe=(0,p.useCallback)((()=>{G!==R.I_.Episode?X?se():ie():_.h.set((()=>({triggerId:U(L),triggerAction:null})))}),[G,X,L,se,ie]),le=M?.isPaywalled??!1,de=M?.isUserSubscribed??!1,ce=le&&!de,ue=le&&X,{badges:pe}=(0,j.b)({contentRating:a,isPaywalled:le}),ge=(0,p.useCallback)((()=>K((0,m.Tf)(O))),[O,K]),me=(0,p.useCallback)((e=>{let t=e;return(ce||ue)&&(t=(0,N.jsx)(w.N,{enabled:!0,showUri:O,children:t})),!c&&pe.nineteen&&(t=(0,N.jsx)("div",{onClick:e=>{e.stopPropagation(),ge()},children:e})),t=(0,N.jsx)(h.k,{id:U(L),targetURI:(0,r.o_h)(L),children:t}),t}),[ce,ue,c,pe.nineteen,L,O,ge]);return(0,N.jsx)(S.pZ,{value:"row",index:e,children:(0,N.jsx)(y.h,{menu:(0,N.jsx)(f.b,{uri:L,showUri:O,sharingInfo:D,isPlayed:Y,onMarkAsPlayed:ae}),children:(0,N.jsx)(b.k,{requestId:void 0,index:e,uri:L,size:J,images:n||[],name:d,showName:V,description:s,isPlayable:c||ce,fullyPlayed:Y,durationMs:B,releaseDate:l,resumePositionMs:q.current??z,draggable:Q,handleDragStart:e=>{if(e.target!==e.currentTarget)return;Z(e,{itemUris:[L],dragLabelText:`${d} â€¢ ${V}`,contextUri:O})},handlePlaybackClick:oe,isCurrentlyPlaying:ee,isPaywalled:le,isUserSubscribed:de,isPlaying:te,position:te?ne:void 0,episodeSharingInfo:D,onMarkAsPlayed:ae,contentInformation:i,showUri:O,mediaTypes:o??void 0,badges:(0,N.jsxs)(N.Fragment,{children:[pe.explicit&&(0,N.jsx)(P.U,{}),pe.paid&&(0,N.jsx)(I.y,{}),pe.nineteen&&(0,N.jsx)(A.q,{size:16})]}),playButtonWrapper:me,status:W})})})}));var D=i(7307);var V=i(73043),$=i(34647);const F="GgMHVmfXNzteIydSWMIA",O="GcupflQsYyy0IMOsCeD1",W="A4FqrLbXeENogU0IRaPn",B="YCYs0Gv5B5ctDN0f5Zby",G=({uri:e,isFullPage:t=!1})=>{const{data:i}=(n={uri:e},(0,d.I)(c,n,o));var n,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),g=t?p:p.slice(0,5);if(0===l)return null;const m=(0,r.o_h)(e)?.id,h=`spotify:app:episode:${m}:more-like-this`;return(0,N.jsxs)("section",{className:a()(F,{[O]:!t}),"data-testid":"episode-list",children:[(0,N.jsx)(V.k,{title:s.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:h}),g.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,N.jsxs)("div",{className:B,children:[(0,N.jsx)("hr",{className:W,"aria-hidden":!0}),(0,N.jsx)(M,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,$.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(n=i.trailerV2?.data,n&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(n)?{type:D.c.EPISODE,uri:n.uri,name:n.name,coverArt:n.coverArt?.sources||[],audio:n.audio,audioPreview:n.audioPreview,sharingInfo:n.sharingInfo,duration:{milliseconds:n.duration.totalMilliseconds},contentRating:n.contentRating,mediaTypes:n.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var n}))]})},L=e=>{const t=(0,u.D)({entityType:D.c.EPISODE,componentType:"list",uri:e.uri});return(0,N.jsx)(o.s,{onError:t,children:(0,N.jsx)(G,{...e})})}},99092:(e,t,i)=>{i.d(t,{EpisodeMoreLikeThis:()=>d});var n=i(30758),a=i(85387),r=i(31417),s=i(15292),o=i(7135),l=i(86070);const d=n.memo((function(){const{episodeId:e=""}=(0,a.g)(),t=(e=>`spotify:episode:${e}`)(e);return(0,l.jsxs)("div",{className:"contentSpacing",children:[(0,l.jsx)(s.Q,{children:r.Ru.get("internal-link-recommender.more-episodes-like-this")}),(0,l.jsx)(o.W,{uri:t,isFullPage:!0})]})}))},95320:(e,t,i)=>{i.d(t,{v:()=>s});var n=i(7069),a=i(45627),r=i(5805);function s(e){if("string"==typeof e)return(0,n.g)(e);const t=e;return(0,r.v)(t)||(0,a.p)(t)}},44825:(e,t,i)=>{i.d(t,{C:()=>h});var n=i(30758),a=i(14343),r=i(89402),s=i(38501);const o=e=>e<=64?"small":e>640?"xlarge":e>300?"large":"standard";function l(e,t){return e.filter((e=>e.label?e.label===t:e.width?o(e.width)===t:!!e.height&&o(e.height)===t))[0]}var d=i(43798);var c=i(41031);function u(e){const t=l(e,"standard"),i=l(e,"large"),n=l(e,"small"),a=l(e,"xlarge");return{image_url:t?.url,image_height:t?.height?.toString(),image_width:t?.width?.toString(),image_url_large:i?.url,image_height_large:i?.height?.toString(),image_width_large:i?.width?.toString(),image_url_small:n?.url,image_height_small:n?.height?.toString(),image_width_small:n?.width?.toString(),image_url_xlarge:a?.url,image_height_xlarge:a?.height?.toString(),image_width_xlarge:a?.width?.toString()}}var p=i(87182),g=i(2679),m=i(7307);function h(e,t){const i=(0,r.W)(),o=(0,p.z)(),{isPlaying:l,isActive:h}=(0,g.te)(e?.uri||""),{isActive:y}=(0,g.l_)(t?.uri||""),f=(0,a.NC)(s.pZ0);return(0,n.useCallback)((n=>{if(!t||!e)return;const a=function(e,t,i=!1){const n=(e.coverArt?.sources||[]).sort(((e,t)=>(t.width||0)-(e.width||0))),a=(0,d.QH)(e,t),r=(0,d.gf)(t)||a,s=e.mediaTypes&&e.mediaTypes.includes(c.Cx.Video)?"video":"audio";return{uri:e.uri,title:e.name,subtitle:t.name,type:"episode",album_uri:t.uri,album_title:t.name,artist_uri:t.uri,artist_name:t.name,...u(n),media_type:i?s:"audio",isTrailer:a,anonymousPlaybackAllowed:r}}(e,t,f);y&&!l&&h&&!n?o.resume():y&&l&&!n?(i({type:"click",intent:"pause",targetUri:e.uri}),o.pause()):(i({type:"click",intent:"play",targetUri:e.uri}),o.play({uri:t.uri,pages:[{items:[{type:m.c.EPISODE,uri:e.uri,uid:null,metadata:a,provider:null}]}]},{referrerIdentifier:o.getReferrer(),featureIdentifier:"episode"},n))}),[t,e,f,y,l,h,o,i])}},15838:(e,t,i)=>{i.d(t,{b:()=>r});var n=i(16157),a=i(35035);const r=({downloadAvailability:e,isExplicit:t,isMOGEFRestricted:i,contentRating:r,isPaywalled:s,isEnhanced:o,hasAssociatedVideo:l})=>{let d=0;const c={download:!1,explicit:!1,nineteen:!1,paid:!1,enhanced:!1,hasAssociatedVideo:!1};return e===a.kw.YES&&(c.download=!0,d++),(t&&!i||r===n.x7.Explicit)&&(c.explicit=!0,d++),(i||r===n.x7.NineteenPlus)&&(c.nineteen=!0,d++),s&&(c.paid=!0,d++),o&&(c.enhanced=!0,d++),l&&(c.hasAssociatedVideo=!0,d++),{badges:c,hasBadges:d>0}}}}]);
//# sourceMappingURL=xpui-routes-episode-more-like-this.js.map