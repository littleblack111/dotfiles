"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4084],{2668:(e,t,i)=>{i.d(t,{e:()=>d});var a=i(30758),s=i(45664),n=i(89402),l=i(24533),r=i(86070);const o=a.memo((function({uri:e,size:t=s.M.md,className:i,onClick:o,showUpsell:d,canDownload:c,condensed:u}){const[m,p]=(0,l.A)(e),h=(0,n.W)(),x=(0,a.useCallback)((()=>{h({targetUri:e,intent:m?"remove-from-library":"add-to-library",type:"click"}),p(!m)}),[h,e,m,p]);return(0,r.jsx)(s.f,{className:i,isFollowing:m,onFollow:x,onClick:o,uri:e,size:t,showUpsell:d,canDownload:c,condensed:u})})),d=a.memo((function(e){return(0,r.jsx)(o,{...e})}))},58110:(e,t,i)=>{i.d(t,{b:()=>o});var a=i(30758),s=i(83352),n=i(89402),l=i(24533),r=i(86070);const o=a.memo((function({uri:e,className:t,onClick:i,size:o=s.t.xs,condensed:d}){const[c,u]=(0,l.A)(e),m=(0,n.W)(),p=(0,a.useCallback)((t=>{t.preventDefault(),m({targetUri:e,intent:c?"remove-from-library":"add-to-library",type:"click"}),i&&i(!c),u(!c)}),[m,e,c,i,u]);return(0,r.jsx)(s.M,{className:t,size:o,onClick:p,isAdded:!!c,isEpisode:!0,condensed:d})}))},13464:(e,t,i)=>{i.d(t,{b:()=>d});var a=i(30758),s=i(83352),n=i(28389),l=i(89402),r=i(24533),o=i(86070);const d=a.memo((function({uri:e,className:t,onClick:i,size:d=s.t.xs,placement:c,isMiniPlayer:u,showDelayOnHover:m}){const p=(0,n.i)(e),[h,x]=(0,r.A)(p),g=(0,l.W)(),y=(0,a.useCallback)((e=>{e.preventDefault(),g({targetUri:p,intent:h?"remove-from-library":"add-to-library",type:"click"}),i&&i(!h),x(!h)}),[h,g,p,i,x]);return(0,o.jsx)(s.M,{className:t,size:d,onClick:y,isAdded:h,placement:c,condensed:!0,isMiniPlayer:u,showDelayOnHover:m})}))},58757:(e,t,i)=>{i.d(t,{p:()=>C});var a=i(30758),s=i(97500),n=i.n(s),l=i(422),r=i(44481),o=i(17866),d=i(19830);const c="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",x="(min-width: 1024px) and (max-width: 1279px)",g="(min-width: 1280px)",y="(min-width: 1280px) and (max-width: 1919px)",w="(min-width: 1920px)",b="FvfvGU3jvHRskUU9v9_8",v="Q9AlbZn2EGzy3MTWXa8X",f="mxmxS0y8LiwSs5nueKPT",k="GXxVAveNFStY3pBI_NO4",N="eHcXC2s97InYP7rMNT0H";var j=i(86070);const C=(0,a.memo)((function(e){const{children:t,message:i,title:a,linkTitle:s,linkTo:C,onClick:E,renderInline:I=!1}=e,{isXSOnly:F,isSMOnly:R}={isXS:(0,d.U)(c),isXSOnly:(0,d.U)(u),isSM:(0,d.U)(m),isSMOnly:(0,d.U)(p),isMD:(0,d.U)(h),isMDOnly:(0,d.U)(x),isLG:(0,d.U)(g),isLGOnly:(0,d.U)(y),isXL:(0,d.U)(w)},S=F||R;return(0,j.jsxs)("section",{className:n()(b,{[v]:I}),children:[t,(0,j.jsx)(l.E,{as:"h1",variant:S?"titleSmall":"titleMedium",className:k,children:a}),(0,j.jsx)(l.E,{variant:S?"bodySmall":"bodyMedium",className:N,children:i}),s&&(C||E)&&(0,j.jsx)(r.$,{colorSet:"invertedLight",className:f,href:C,onClick:E,component:o.v,children:s})]})}))},51872:(e,t,i)=>{i.d(t,{s:()=>x});var a=i(30758),s=i(97500),n=i.n(s),l=i(3520),r=i(54925),o=i(17287),d=i(22949);const c="IVnoxrO3iL_tz5ULI8g_";var u=i(86070);const m={marginBlockEnd:0,willChange:"transform, opacity"},p=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:i,resetFilterIds:s,toggleFilterId:r,className:o,innerRef:d,onFilterClick:p,index:h=0,...x})=>{const g=x.selected,y=(0,a.useCallback)((()=>{if(!e)return s(),void p(null,!1,h);p(e,!!g,h),r(e)}),[e,s,r,p,g,h]),w=(0,a.useCallback)((e=>{e.detail>1||i||y()}),[i,y]);return(0,u.jsx)(l.v,{...x,className:n()(o,{[c]:i}),onClick:w,selectedColorSet:"invertedLight",secondary:g&&!t,style:m,ref:d,tabIndex:-1})},h=({filterId:e=null,isPlaceholder:t,resetFilterIds:i,toggleFilterId:s,className:l,innerRef:o,onFilterClick:d,index:p=0,...h})=>{const x=h.selected,g=(0,a.useCallback)((()=>{if(!e)return i(),void d(null,!1,p);d(e,!!x,p),s(e)}),[e,i,s,d,x,p]),y=(0,a.useCallback)((e=>{e.detail>1||t||g()}),[t,g]);return(0,u.jsx)(r.m,{...h,"aria-label":h["aria-label"],className:n()(l,{[c]:t}),onClick:y,style:m,ref:o,tabIndex:-1})},x=(0,a.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:i,toggleFilterId:s,resetFilterIds:n,onFilterClick:l,ariaLabel:r,clearBtnAriaLabel:c,className:m,applyLightThemeControls:x=!1}){const g=!(i||t),y=g?e:[...i??[],...t??[]],w=(0,a.useRef)(null),b=(0,a.useCallback)((()=>{(0,d.MS)(w.current,w.current?.nextElementSibling instanceof HTMLElement?w.current?.nextElementSibling:null),n()}),[n]);return 0===y.length?null:(0,u.jsxs)(o.FN,{className:m,ariaLabel:r,applyLightThemeControls:x,children:[!!i?.length&&(0,u.jsx)(h,{resetFilterIds:b,toggleFilterId:s,onFilterClick:l,"aria-label":c??r,innerRef:w}),y.map(((e,t)=>{const a=i?.includes(e),r=0===t;return(0,u.jsx)(p,{filterId:e.id,isPrimaryFilter:r,isPlaceholder:g,onFilterClick:l,resetFilterIds:n,toggleFilterId:s,selected:a,index:t,children:e.getName()},e.id)}))]})}))},10502:(e,t,i)=>{i.d(t,{Y:()=>c});var a=i(97500),s=i.n(a),n=i(422),l=i(57478);const r="dxnMpEuxRQ5Ml60ftDcz",o="jFPYamKaGvZv7JA45KCu";var d=i(86070);const c=({as:e,variant:t,className:i,charCount:a,isLoading:c})=>{const u=(0,l.h)("shimmer");return(0,d.jsx)(n.E,{ref:u,as:e,variant:t,className:s()(r,i,{[o]:c}),style:{width:a?`${a}ch`:void 0},tabIndex:-1,"aria-hidden":!0})}},14409:(e,t,i)=>{i.d(t,{x:()=>r});var a=i(99701),s=i(64281);const n="BO7X8b8_SQhDyCjS0EOv";var l=i(86070);const r=({gatedEntityRelations:e})=>{if(!e)return!1;const t=e?.entitiesWithValueProps?.at(0),i=t?.valueProps.at(0)?.displayText,r=t?.summary?.forUserWithoutAccess;if(!i||!t)return null;const o=(0,l.jsx)(s.E,{text:i,className:n});return r?(0,l.jsx)(a.Zp,{label:r||i,children:o}):o}},99730:(e,t,i)=>{i.d(t,{P:()=>m});var a=i(14343),s=i(14409),n=i(45807),l=i(38501),r=i(99041),o=i(54003),d=i(18663),c=i(15838),u=i(86070);const m=({episode:e})=>{const t=(0,a.NC)(l.MCN,{loadingValue:!1}),{badges:i}=(0,c.b)((e=>"contentRating"in e)(e)?{contentRating:e?.contentRating?.label,isPaywalled:e.podcastSubscription?.isPaywalled}:{isExplicit:e?.isExplicit,isMOGEFRestricted:e?.is19PlusOnly,isPaywalled:e.podcastSubscription?.isPaywalled}),m=e.gatedEntityRelations&&e.gatedEntityRelations.entitiesWithValueProps.at(0),p=t&&(0,n.B)(m,e);return(0,u.jsxs)(u.Fragment,{children:[i.explicit&&(0,u.jsx)(r.U,{}),p?(0,u.jsx)(s.x,{gatedEntityRelations:e.gatedEntityRelations}):i.paid&&(0,u.jsx)(o.y,{}),i.nineteen&&(0,u.jsx)(d.q,{size:16})]})}},13565:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(99730)},16847:(e,t,i)=>{i.d(t,{WhatsNewFeed:()=>Ye});var a=i(30758),s=i(16273),n=i(97500),l=i.n(n),r=i(422),o=i(56515),d=i(14343),c=i(41540),u=i(31417),m=i(58757),p=i(29195),h=i(81138),x=i(51872),g=i(33329);const y="q5riNmaoksSuEEvQAurA";var w=i(86070);const b=[{id:"ALBUM",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music"},{id:"EPISODE",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows"},{id:"WHATS_NEW_FEED_NOTIFICATION",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.notifications"),ubiId:"Merch & Events"}],v=(0,a.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:i,resetFilterIds:s,className:n,spec:l}){const r=u.Ru.get("web-player.whats-new-feed.filters.options"),o=(0,g.s)(),d=(0,a.useMemo)((()=>{const t=new Map;return(e||[]).forEach((e=>{t.set(e.id,e)})),t}),[e]),c=(0,a.useCallback)(((e,t,i)=>{let a;if(!e)return a=l.clearFiltersFactory().hitClearFilter(),void o.logInteraction(a);const s=d.get(e);if(!s)return;const n=l.filterChipFactory({identifier:s.ubiId,position:i});a=t?n.hitClearFilter():n.hitFilter(),o.logInteraction(a)}),[l,o,d]);return(0,w.jsx)("div",{className:y,children:(0,w.jsx)(x.s,{placeholderFilters:b,availableFilters:e,selectedFilters:t,toggleFilterId:i,onFilterClick:c,resetFilterIds:s,ariaLabel:r,className:n})})}));var f=i(68933),k=i(97548),N=i(86563),j=i(40935),C=i(83352),E=i(45664),I=i(53187),F=i(13464),R=i(75830),S=i(65462),A=i(78516),P=i(7520);const B="UzbVbHOHQ3xdlESl06nb",L=({dateAdded:e,prefix:t})=>{let i=e.getTime()>0&&u.Ru.formatRelativeDate(e,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"});return i&&t&&(i=`${t} ${i}`),(0,w.jsx)(r.E,{variant:"bodySmall",className:B,children:i})};var D=i(21082),M=i(69624),O=i(98712);const U=e=>{switch(e){case O.E.LARGE:return M.Qe.SIZE_112;case O.E.MEDIUM:default:return M.Qe.SIZE_64}};var T=i(34733),_=i(27012),z=i(47698),V=i(70736),W=i(32255),G=i(51354),H=i(24533),Y=i(19546),X=i(85346),q=i(35035),K=i(28340),J=i(83327),Z=i(7307),Q=i(13155);const $={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",row:"SjhDNg4bQRQmIJAba47Z",actions:"eYvk_xcxVNMwCBkfY3O0",visibleAction:"TtoLzgGMAU9nkxMbixq9",playButton:"Rw7qIj58PeAz8p6dejOP",content:"K3oY37O4n1fElTqkmnd8",description:"AkSMHdbIxX7Fj7e_8APi",subtitleLink:"uzhTSuCH_4ojaqifMJRB",imageWrapper:"q82J4Wio82IYN9poOJfd",imageContainer:"D71yL9GnHIYg7PheYlz8",showImage:"KKRyrr7NUJy1VBWydHHH",largeImage:"kAYwHqwZ7agHEAGbYN3v",explicitIcon:"HjDtVqhmfzWlsvg4dliB",timeAgo:"H4ODi0SPeEXBawCgANeX",footer:"XaingSntLq8c8wEfqf81",episodeBody:"sbM0nIPBghB_k5Tb5a8y",fallbackIcon:"SCFHE5DLXwCFJz8oVFMs",dateAndTime:"FDm94lE0xkDYtA1Bk7Jc",medium:"jYce7J2dSeD3e9qvWO7N",seperator:"tDRI4dCXFmqKzB1b6K3u",seperatorAlbum:"TPNGFuTvzNVNHisumnhg"};function ee({album:e,onLike:t,onMoreButtonClick:i,onDownloadClick:s,spec:n}){const o=(0,a.useRef)(null);(0,V.p)(o);const d=(0,G.y)(),c=d===O.E.LARGE,{draggable:m,onDragStart:p}=(0,_.P)({itemUris:[e.uri],dragLabelText:e.name});let h;e.date&&(h=(0,w.jsx)(L,{dateAdded:new Date(e.date.isoString)}));const[x,y]=(0,H.A)(e.uri),b=e.artists?.items.map((e=>e.profile.name)).join(u.Ru.getSeparator())||"",v=(0,g.s)(),B=(0,a.useCallback)((async()=>{try{await y(!x)}catch{}}),[x,y]),{togglePlay:M,isPlaying:ee,isActive:te}=(0,K.P)({uri:e.uri},{featureIdentifier:"whats_new_panel",referrerIdentifier:"whats_new_panel"}),ie=(0,a.useCallback)((t=>{let i;t.preventDefault(),te&&!ee&&(i=n.playButtonFactory().hitResume({itemToBeResumed:e.uri})),ee||te||(i=n.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),ee&&(i=n.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&v.logInteraction(i),M()}),[M,te,ee,v,n,e.uri]),ae=(0,z.V)(e.uri),se=(0,X.T)(e.uri),ne=(0,a.useCallback)((()=>{const t=n.hitUiNavigate({destination:e.uri});v.logInteraction(t),ae()}),[e.uri,n,v,ae]),le=(0,a.useCallback)((i=>{const a=n.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),s=n.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});v.logInteraction(i?a:s),t?.(i)}),[n,v,e.uri,t]),re=(0,a.useCallback)(((t,i)=>{let a;i===q.NV.ADD?a=n.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===q.NV.REMOVE&&(a=n.downloadButtonFactory().hitUiReveal()),a&&v.logInteraction(a),s?.(t,i)}),[e.uri,v,n,s]),oe=(0,a.useCallback)((e=>{i?.(e)}),[i]),de=(0,a.useCallback)((()=>{const t=n.titleFactory().hitUiNavigate({destination:e.uri});v.logInteraction(t)}),[e.uri,v,n]),ce=u.Ru.get("tracklist.a11y.play",e.name,b),ue=u.Ru.get("tracklist.a11y.pause",e.name,b),me=(0,w.jsx)(f.d,{lineClamp:1,children:(0,w.jsx)(D.N,{to:e.uri,onClick:de,children:e.name})}),pe=e.artists?e.artists.items.map(((e,t,i)=>{return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(S.h,{menu:(0,w.jsx)(P.t,{uri:e.uri}),children:(0,w.jsx)(D.N,{to:e.uri,className:$.subtitleLink,onClick:(s=e.uri,()=>{const e=n.subtitleFactory().hitUiNavigate({destination:s});v.logInteraction(e)}),children:e.profile.name})}),t<i.length-1&&u.Ru.getSeparator()]},t);var s})):"",he=(0,w.jsx)("div",{className:$.imageContainer,children:(0,w.jsx)(W.b,{className:l()($.showImage,{[$.largeImage]:c}),type:Z.c.ALBUM,size:U(d),title:e.name,images:e.coverArt?.sources})}),xe=(0,w.jsxs)(r.E,{className:$.dateAndTime,children:[(0,Q.C)(e.albumType),(0,w.jsx)("span",{className:$.seperatorAlbum,children:h})]}),ge=c?C.t.sm:C.t.xs,ye=(0,w.jsxs)("div",{className:$.footer,children:[(0,w.jsxs)("div",{className:$.actions,children:[(0,w.jsx)(F.b,{onClick:le,uri:e.uri,size:ge,className:$.visibleAction}),(0,w.jsx)(E.f,{onClick:re,className:l()({[$.visibleAction]:(0,Y.X)(se)}),uri:e.uri,isFollowing:x,onFollow:B,size:ge,condensed:!0}),(0,w.jsx)(J.r,{spec:n,children:(0,w.jsx)(R.b,{menu:(0,w.jsx)(A.h,{uri:e.uri}),children:(0,w.jsx)(I.e,{onClick:oe,size:ge})})})]}),(0,w.jsx)("div",{className:$.playButton,children:(0,w.jsx)(T.R,{size:"small",onClick:ie,isPlaying:ee,ariaPlayLabel:ce,ariaPauseLabel:ue,version:T.H.secondary})})]});return(0,w.jsx)(S.h,{menu:(0,w.jsx)(A.h,{uri:e.uri}),children:(0,w.jsx)("div",{draggable:m,onDragStart:p,children:(0,w.jsx)(k.v,{size:"xxl",ref:o,className:$.row,media:he,title:me,subtitle:(0,w.jsx)(N.j,{lineClamp:1,children:pe}),id:e.uri,variant:"naked",body:xe,footer:ye,onClick:ne,hoverBackgroundColor:"backgroundHighlight",layout:c?"wide":"regular",horizontalGap:c?j.lT:j.CJ,verticalGap:j.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var te=i(61093),ie=i(2668),ae=i(38157),se=i(58110),ne=i(91676),le=i(29454),re=i(13565),oe=i(86931),de=i(55769);const ce={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",episodeBody:"N3zMh5FMdbBKUvz4uDfe",progressBar:"h0YQcDKdGmWssZyuIcvq",seperator:"lMQrLkJVNqZAzT95gQnA"},ue=1e4;function me({episode:e,isPlaying:t,isActive:i,isFullyPlayed:s,setIsFullyPlayed:n}){let l;e.release.isoString&&(l=(0,w.jsx)(L,{dateAdded:new Date(e.release.isoString)}));const o=(0,a.useRef)(null),[d]=(0,oe.S)(ue,(t=>t?.item?.uri===e.uri));(0,a.useEffect)((()=>{t&&(o.current=d)}),[t,d]),(0,a.useEffect)((()=>{!t&&o.current&&e.duration.milliseconds<=o.current&&n(!0)}),[t,e.duration.milliseconds,n]);const c=(0,a.useRef)(e.duration.milliseconds-e.playedState.timeLeft.milliseconds),m=(0,w.jsx)(de.j,{isPlaying:t,fullyPlayed:s,durationMs:e.duration.milliseconds,resumePositionMs:o.current||c.current,position:i?d:void 0,className:ce.progressBar});return(0,w.jsxs)("div",{className:ce.episodeBody,children:[(0,w.jsx)(re.P,{episode:e}),(0,w.jsx)(r.E,{variant:"bodySmall",children:u.Ru.get("card.tag.episode")}),(0,w.jsx)("span",{className:ce.seperator}),l,(0,w.jsx)("span",{className:ce.seperator}),m]})}var pe=i(72051);const he={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",row:"IEDOUN3mwwZhHVziC03a",actions:"Olh4d9g46wryDMTzRRmw",visibleAction:"zyDT2CX7tvGjKxxUnO7D",playButton:"TKntS5R19vVI3J9xxwDL",content:"h0EpgyZTOC5U8KOQL4A6",description:"IoTOUob09_0_3kC8ORbu",subtitleLink:"aKVUno8YrkyvGsg7iS59",imageWrapper:"O3nnn9_DD_2DzYEa64jv",imageContainer:"iF91evq0EtvlgCxIRI_6",showImage:"VzSICihKBYcgMsSFv8SH",largeImage:"iOxe1erWkyDFY3p4NG8x",explicitIcon:"iseqhC6eLcxmoGPk6JIE",timeAgo:"kUzqUQECoj43gCthqXdD",footer:"_72TrTBKZHea2vJ2I2BJX",episodeBody:"Bqh5LKZCXF5xkKJcEx7a",fallbackIcon:"OdJvEiRzLWN66tky0bvM",dateAndTime:"Y1f7yukeZPBc6n1uu1pi",medium:"uHM5B97d0hwAYDvOOmY8",seperator:"Oe5t36YEWzbJKH5LBNYD",seperatorAlbum:"dJMAGpC7b6bMSWNEfk6r"};function xe({episode:e,podcastName:t,podcastUri:i,onLike:s,onMoreButtonClick:n,onDownloadClick:o,spec:d,featureIdentifier:c,referrerIdentifier:m,size:p="xxl"}){const h=(0,a.useRef)(null);(0,V.p)(h);const x=(0,G.y)(),y=(0,X.T)(e.uri),b=x===O.E.LARGE,{draggable:v,onDragStart:C}=(0,_.P)({itemUris:[e.uri],dragLabelText:`${e.name} • ${t}`}),E=(0,g.s)(),{togglePlay:I,isPlaying:F,isActive:A}=(0,K.P)({uri:e.uri},{featureIdentifier:c,referrerIdentifier:m}),[P,B]=(0,a.useState)(e.playedState.state===pe.M.Completed),L=(0,z.V)(e.uri),M=u.Ru.get("tracklist.a11y.play",e.name,t),H=u.Ru.get("tracklist.a11y.pause",e.name,t),Q=(0,a.useCallback)((()=>{const t=d.hitUiNavigate({destination:e.uri});E.logInteraction(t),L()}),[L,E,d,e.uri]),$=(0,a.useCallback)((t=>{const i=d.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),a=d.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});E.logInteraction(t?i:a),s?.(t)}),[d,E,e.uri,s]),ee=(0,a.useCallback)(((t,i)=>{let a;i===q.NV.ADD?a=d.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===q.NV.REMOVE&&(a=d.downloadButtonFactory().hitUiReveal()),a&&E.logInteraction(a),o?.(t,i)}),[E,d,e.uri,o]),re=(0,a.useCallback)((()=>{const t=d.titleFactory().hitUiNavigate({destination:e.uri});E.logInteraction(t)}),[E,d,e.uri]),oe=(0,a.useCallback)((t=>{let i;t.preventDefault(),A&&!F&&(i=d.playButtonFactory().hitResume({itemToBeResumed:e.uri})),F||A||(i=d.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),F&&(i=d.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&E.logInteraction(i),I()}),[I,E,d,e.uri,F,A]),de=(0,a.useCallback)((e=>{n?.(e)}),[n]),ce=(0,w.jsx)(f.d,{lineClamp:2,children:(0,w.jsx)(D.N,{to:e.uri,onClick:re,children:e.name})}),ue=(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(N.j,{lineClamp:1,paddingBottom:b?"8px":void 0,children:(0,w.jsx)(S.h,{menu:(0,w.jsx)(le.H,{uri:i}),children:(0,w.jsx)(D.N,{to:i,className:he.subtitleLink,onClick:(xe=i,()=>{const e=d.subtitleFactory().hitUiNavigate({destination:xe});E.logInteraction(e)}),children:(0,w.jsx)(r.E,{as:"span",variant:"bodySmall",children:t})})})})});var xe;const ge=(0,w.jsx)("div",{className:he.imageContainer,children:(0,w.jsx)(W.b,{className:l()(he.showImage,{[he.largeImage]:b}),type:Z.c.EPISODE,size:U(x),title:e.name,images:e.images})}),ye=b?"medium":"small",we=e.podcastSubscription,be=we.isPaywalled&&!we.isUserSubscribed,ve=!be,fe=(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(me,{episode:e,isPlaying:F,isActive:A,isFullyPlayed:P,setIsFullyPlayed:B}),(0,w.jsxs)("div",{className:he.footer,children:[(0,w.jsxs)("div",{className:he.actions,children:[(0,w.jsx)(se.b,{onClick:$,uri:e.uri,size:ye,className:he.visibleAction,condensed:!0}),(0,w.jsx)(ie.e,{className:l()({[he.visibleAction]:(0,Y.X)(y)}),onClick:ee,uri:e.uri,size:ye,canDownload:ve,condensed:!0}),(0,w.jsx)(J.r,{spec:d,children:(0,w.jsx)(R.b,{menu:(0,w.jsx)(ne.b,{uri:e.uri,onMarkAsPlayed:B,isPlayed:P}),children:(0,w.jsx)(ae.e,{onClick:de,size:ye})})})]}),(0,w.jsx)("div",{className:he.playButton,children:(0,w.jsx)(T.R,{"aria-label":"whats-new-feed-play-button",size:"small",onClick:oe,isPlaying:F,ariaPlayLabel:M,ariaPauseLabel:H,version:T.H.secondary,disabled:!e.isPlayable,locked:be})})]})]}),ke=(0,w.jsx)(te.v,{lineClamp:2,paddingBottom:b?"4px":void 0,className:he.description,children:(0,w.jsx)(r.E,{as:"span",variant:"bodySmall",children:e.description})});return(0,w.jsx)(S.h,{menu:(0,w.jsx)(ne.b,{uri:e.uri,onMarkAsPlayed:B,isPlayed:P}),children:(0,w.jsx)("div",{draggable:v,onDragStart:C,children:(0,w.jsx)(k.v,{size:p,ref:h,className:he.row,media:ge,title:ce,subtitle:ue,id:e.uri,variant:"naked",body:ke,footer:fe,onClick:Q,hoverBackgroundColor:"backgroundHighlight",layout:b?"wide":"regular",horizontalGap:b?j.lT:j.CJ,verticalGap:j.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var ge=i(35529),ye=i(16157),we=i(75049),be=i(34647),ve=i(95651);function fe({item:e,spec:t}){if("AlbumResponseWrapper"===e.content.__typename){const i=e.content.data;if("Album"===i.__typename)return(0,w.jsx)(ee,{album:i,spec:t})}if("EpisodeOrChapterResponseWrapper"===e.content.__typename){const a=e.content.data;if("Chapter"===a.__typename)return(0,w.jsx)(w.Fragment,{});if("Episode"===a.__typename){let e="",s="";return"Podcast"===a.podcastV2.data.__typename&&(e=a.podcastV2.data.name,s=a.podcastV2.data.uri),(0,w.jsx)(xe,{episode:(i=a,{type:Z.c.EPISODE,uri:i.uri,name:i.name,description:i.description??"",duration:{milliseconds:i.duration.totalMilliseconds},playedState:(0,be.fS)(i.duration,i.playedState),images:i.coverArt?.sources.map(ve.m)??[],languages:i.language?[i.language.code]:[],release:(0,we.mp)(i.releaseDate),show:"Podcast"===i.podcastV2.data.__typename?(0,be.jM)(i.podcastV2.data):null,podcastSubscription:(0,be.Wx)(i.restrictions,i.playability),gatedEntityRelations:"gatedEntityRelations"in i?(0,ge.Gv)(i.gatedEntityRelations):void 0,isPlayable:i.playability.playable,isExplicit:i.contentRating?.label===ye.x7.Explicit,is19PlusOnly:i.contentRating?.label===ye.x7.NineteenPlus}),podcastName:e,podcastUri:s,spec:t,referrerIdentifier:"whats_new_panel",featureIdentifier:"whats_new_panel"})}}var i;return(0,w.jsx)(w.Fragment,{})}var ke=i(10502);const Ne="PNAsPBOgLLv9EX8LZ6xL",je="UjEEhwY497frsytmeR9u",Ce="VQ0BLAewv7Aw5H3hV0YK",Ee="pxV6pRWzmVb2_leuWtEG",Ie="G97bWDW7Mp3aZEL19Umr",Fe="p6l0_RUXhei0P7rrQaeg",Re="erd9k4EG_HWK3UzsLhht",Se="ap9brNzQxEcx9SV2FksM",Ae="pVVteJIfAdehWU3vX7JR",Pe="J_VZoZ53jBtkdyxrt2My",Be="VOGWdrCvz59_A_wAZv58",Le="m8V0BPcmce3GusmXkFhM",De=a.memo((()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ke.Y,{as:"h3",variant:"titleSmall",className:Pe,charCount:4,isLoading:!0}),(0,w.jsx)("div",{className:Se,children:[20,50,25].map(((e,t)=>(0,w.jsx)(ke.Y,{as:"div",variant:"bodySmall",className:Pe,charCount:e,isLoading:!0},`${e}-${t}`)))})]})));var Me=i(38501),Oe=i(6444),Ue=i(66583),Te=i(59147),_e=i(21549);const ze={offset:0,limit:50,onlyUnPlayedItems:!1};const Ve={[ye.tv.Album]:{id:"ALBUM",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music",active:!1},[ye.tv.Episode]:{id:"EPISODE",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows",active:!1}};function We(e){switch(e){case ye.tv.Album:return ye.tv.Album;case ye.tv.Episode:return ye.tv.Episode;case ye.tv.WhatsNewFeedNotification:return ye.tv.WhatsNewFeedNotification;case ye.tv.Unknown:default:return ye.tv.Unknown}}const Ge=({spec:e,items:t})=>{const[i,s]=(0,a.useState)([]),n=e=>{const t=e.state.state;if(!e.state.timestamp?.isoString&&t===ye.GN.New)return!0;if(e.state.timestamp?.isoString){const t=new Date(e.state.timestamp.isoString).getTime();return Date.now()-t<=36e5}return!1},l=t.findIndex((e=>!n(e))),o=(0,a.useCallback)(((t,i)=>{const a=n(t)&&i<l,s=a&&0===i;return(0,w.jsxs)("div",{className:Le,children:[s&&(0,w.jsx)(r.E,{as:"h3",variant:"titleSmall",className:Ce,semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.new-section-title")}),!a&&i===l&&(0,w.jsx)(r.E,{as:"h3",variant:"titleSmall",className:Ce,semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.earlier-section-title")}),(0,w.jsx)("hr",{className:Be,"aria-hidden":!0}),(0,w.jsx)(fe,{item:t,spec:e.notificationItemFactory({identifier:t.id,position:i})},t.id)]},t.id)}),[l,e]),d=(0,a.useRef)(0),c=(0,a.useCallback)((()=>{const e=t.slice(d.current,d.current+10);s((t=>(d.current=d.current+10,[...t,...e])))}),[t]),{ref:m,breakpoint:p}=(0,Ue.x)({[O.E.MEDIUM]:0,[O.E.LARGE]:600});return(0,w.jsx)(G.o.Provider,{value:p,children:(0,w.jsx)("div",{className:Re,role:"list",ref:m,children:(0,w.jsx)(Oe._,{onReachBottom:c,triggerOnInitialLoad:!0,children:i.map(o)})})})},He=({includedContentTypes:e,data:t,handleRetry:i,error:a,spec:s,loading:n})=>{if(n)return(0,w.jsxs)("div",{className:Ee,role:"list",children:[(0,w.jsx)(De,{}),(0,w.jsx)(De,{})]});if(a)return(0,w.jsxs)("div",{className:Ie,dir:"auto",children:[(0,w.jsx)(r.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:u.Ru.get("error.generic")}),(0,w.jsx)(r.E,{as:"p",variant:"bodyMedium",children:u.Ru.get("web-player.whats-new-feed.panel.error")}),(0,w.jsx)(o.n,{className:Fe,onClick:i,size:"small",children:(0,w.jsx)(r.E,{as:"span",variant:"bodyMediumBold",semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.panel.error.button")})})]});const l=t?.whatsNewFeedItems?.items;if(!l||0===l?.length){const{title:t,message:i}=function(e=[]){return e.includes(ye.tv.Episode)?{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.message")}:e.includes(ye.tv.Album)?{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-music.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-music.message")}:{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-all.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-all.message")}}(e);return(0,w.jsx)(m.p,{title:t,message:i,renderInline:!0})}return(0,w.jsx)(Ge,{items:l,spec:s},e.join(" "))},Ye=()=>{const e=(0,s.jE)(),{spec:t,logger:i}=(0,_e.r)(c.q,{}),n=(0,a.useCallback)((()=>{const{name:e}=h.lo;return[e]}),[]),o=(0,a.useCallback)((()=>{e.invalidateQueries({queryKey:n()})}),[e,n]);(0,a.useEffect)((()=>{i.logImpression(t.impression())}),[i,t]);const[m,x]=(0,a.useState)(Ve),g=Object.values(m),y=g.filter((e=>e.active)),b=y.length>0?[]:g,f=y.map((e=>e.id)),k=(0,d.NC)(Me.MCN,{loadingValue:!1}),N=(0,a.useCallback)((e=>{const t=We(e),i={id:m[t]?.id||ye.tv.Unknown,getName:()=>m[t]?.getName()||"",ubiId:m[t]?.ubiId||"",active:!m[t]?.active},a={...Ve,...m,[i.id||"UNKNOWN"]:i};x(a)}),[m,x]),j=(0,a.useCallback)((()=>{x(Ve)}),[x]),{data:C,error:E,loading:I}=(0,Te.I)(k?h.nD:h.lo,{...ze,includedContentTypes:f.map(We)??[]},{gcTime:30*Te.i}),{getGraphQLLoader:F}=(0,p.mv)(),R=F();return(0,a.useEffect)((()=>{if(!C?.whatsNewFeedItems?.items)return;const e=C?.whatsNewFeedItems?.items.filter((e=>e.state.state===ye.GN.New)).map((e=>({id:e.id,state:ye.GN.Seen})));e.length>0&&async function(e,t){await e(h.BP,{items:t})}(R,{items:e})}),[C?.whatsNewFeedItems?.items,R]),(0,w.jsxs)("section",{className:l()(Ae,"contentSpacing"),children:[(0,w.jsxs)("div",{className:Ne,children:[(0,w.jsx)(r.E,{as:"h1",semanticColor:"textBase",variant:"titleMedium",className:je,children:u.Ru.get("web-player.whats-new-feed.panel.title")}),(0,w.jsx)(r.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:u.Ru.get("web-player.whats-new-feed.panel.subtitle")})]}),!E&&(0,w.jsx)(v,{availableFilters:b,toggleFilterId:N,selectedFilters:y,resetFilterIds:j,spec:t.filterChipsFactory()}),(0,w.jsx)(He,{includedContentTypes:f.map(We),data:C,loading:I,error:E??null,spec:t,handleRetry:o})]})}},54003:(e,t,i)=>{i.d(t,{y:()=>l});var a=i(31417),s=i(64281),n=i(86070);const l=()=>(0,n.jsx)(s.E,{ariaLabel:a.Ru.get("paid"),text:a.Ru.get("paid")})},6444:(e,t,i)=>{i.d(t,{_:()=>c});var a=i(30758),s=i(21743),n=i(97500),l=i.n(n);const r="eqw9lvuoZHrkWMTdyTpY",o="lb08f71wES9AQnKx6e0R";var d=i(86070);const c=(0,a.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:i,showScrollbar:n=!0,horizontalScroll:c=!1,className:u}=e,{ref:m,inView:p}=(0,s.Wx)({initialInView:t});return(0,a.useLayoutEffect)((()=>{p&&i&&i()}),[p,i]),(0,d.jsxs)("div",{className:l()({[o]:!n,[r]:c},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,d.jsx)("div",{ref:m})]})}))},45807:(e,t,i)=>{i.d(t,{B:()=>a,v:()=>s});const a=(e,t)=>!!e&&e.uri===t.uri,s=(e,t)=>!!e&&e.entitiesWithValueProps.at(0)?.uri===t},47698:(e,t,i)=>{i.d(t,{V:()=>l});var a=i(30758),s=i(85387),n=i(22726);function l(e){const t=(0,n.o_h)(e);let i="";return t&&(i=t.toURLPath(!0)),function(e){const t=(0,s.Zp)();return(0,a.useCallback)((()=>{""!==e&&t(e)}),[e,t])}(i)}},57478:(e,t,i)=>{i.d(t,{h:()=>s});var a=i(30758);function s(e){return(0,a.useCallback)((t=>{null!==t&&void 0!==t.getAnimations&&t.getAnimations({subtree:!0}).filter((t=>t instanceof CSSAnimation&&t.animationName===e&&"running"===t.playState)).forEach((e=>e.startTime=0))}),[e])}},70736:(e,t,i)=>{i.d(t,{p:()=>s});var a=i(30758);const s=e=>{const[t,i]=(0,a.useState)(0);function s(a){const s=e.current?.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(!s)return;s.forEach((e=>{e.setAttribute("tabindex","-1")})),s&&s[0].setAttribute("tabindex","0");let n=t;if(s&&s.length>0)switch(a.key){case"Tab":document.activeElement&&i(0);break;case"ArrowUp":0===n?(a.preventDefault(),n=s.length-1):n-=1,s[n].focus(),i(n);break;case"ArrowDown":a.preventDefault(),n===s.length-1?n=0:n+=1,s[n].focus(),i(n)}}a.useEffect((()=>{const t=e.current;return t?.addEventListener("keydown",s),()=>{t?.removeEventListener("keydown",s)}}))}},19546:(e,t,i)=>{i.d(t,{X:()=>s});var a=i(35035);function s(e){return[a.kw.YES,a.kw.DOWNLOADING,a.kw.WAITING].includes(e)}},15838:(e,t,i)=>{i.d(t,{b:()=>n});var a=i(16157),s=i(35035);const n=({downloadAvailability:e,isExplicit:t,isMOGEFRestricted:i,contentRating:n,isPaywalled:l,isEnhanced:r,hasAssociatedVideo:o})=>{let d=0;const c={download:!1,explicit:!1,nineteen:!1,paid:!1,enhanced:!1,hasAssociatedVideo:!1};return e===s.kw.YES&&(c.download=!0,d++),(t&&!i||n===a.x7.Explicit)&&(c.explicit=!0,d++),(i||n===a.x7.NineteenPlus)&&(c.nineteen=!0,d++),l&&(c.paid=!0,d++),r&&(c.enhanced=!0,d++),o&&(c.hasAssociatedVideo=!0,d++),{badges:c,hasBadges:d>0}}}}]);
//# sourceMappingURL=dwp-whats-new-feed.js.map