"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[983],{39556:(e,t,a)=>{a.d(t,{P:()=>r});var s=a(14201),n=a(86070);const r=({iconSize:e,className:t})=>(0,n.jsx)("div",{className:t,children:(0,n.jsx)(s.E,{size:e,"aria-hidden":!0})})},14036:(e,t,a)=>{a.d(t,{l:()=>u});var s=a(97500),n=a.n(s);const r="x-toggle-wrapper",i="x-toggle-indicator",l="JCFCfOY_6UEZZSOO2xrl",o="x-toggle-indicatorWrapper",c="x-toggle-input";var d=a(86070);const u=({value:e,disabled:t,onSelected:a,id:s,className:u,condensed:m=!1,inputRef:p})=>(0,d.jsxs)("label",{className:n()(r,u),children:[(0,d.jsx)("input",{id:s,className:c,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;a(t)},ref:p}),(0,d.jsx)("span",{className:n()(o,{[l]:m}),children:(0,d.jsx)("span",{className:n()(i,{[l]:m})})})]})},19957:(e,t,a)=>{a.d(t,{DebugWindowContents:()=>zr});var s=a(30758),n=a(97500),r=a.n(n),i=a(89195),l=a(67107),o=a(58624),c=a(42051),d=(a(99974),a(22280)),u=a(49971),m=a(15935),p=a(13791),h=a(3520),x=a(78141),g=a(44481),v=a(422),f=a(84010),j=a(47152),y=a(45695),b=a(27241);const N=(0,y.h)();window.abba={get:async function(e,t){const a=new j.EW((0,b.X)()),s=(await a.getValues(j.kM.fromPartial({}))).pairs;let n={},r="";if(s.abbaOverrides?r=s.abbaOverrides:s.abbaoverrides&&(r=s.abbaoverrides),r)try{n=JSON.parse(r)}catch(e){console.error(`error parsing value=${r}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(n,e))return console.warn(`Abba: Override for ${e} : ${n[e]}`),void setTimeout((()=>t(null,n[e])),0);N.post("sp://abba/v1/flags",{flags:[e]}).then((a=>{const{flags:s=[]}=a,n=s[0]&&s[0].featureName===e&&s[0].cell;t(null,n||null)})).catch((e=>{t(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),N.get("sp://abba/v1/all_flags").then((t=>{const{flags:a=[]}=t,s=a.reduce(((e,t)=>(e[t.featureName]=t.cell,e)),{});e(null,JSON.stringify(s,null,2))})).catch((t=>{e(t)}))},getRequestedFlagNames:function(e){N.get("sp://abba/v1/requested_flag_names").then((t=>{e(null,JSON.stringify(t.sort(),null,2))})).catch((t=>{e(t)}))}};var w=a(35426);const C=function(){const[e,t]=(0,s.useState)();return{adMocks:e,getAdMocks:(0,s.useCallback)((async()=>w.D.getMocksList().then((e=>{t(e.body.test_cases)}))),[])}},S="rh7v8PDNC0ke2OkkyRhk",A="Kh0jtEAjRK83Z5A_IZRx";var k=a(86070);const E=()=>{const e=e=>60*e,[t,a]=(0,s.useState)(e(20)),[n,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[j,y]=(0,s.useState)((new Date).toISOString()),[b,N]=(0,s.useState)({message:"",status:"success"}),[E,I]=(0,s.useState)(!1),{adMocks:_,getAdMocks:R}=C(),O=({message:e,isError:t})=>{N({message:e,status:t?"error":"success"}),I(!0),setTimeout((()=>I(!1)),5e3)},P=(0,s.useCallback)((e=>{w.D.clearSlot(e).then((()=>{O({message:`${e} cleared`,isError:!1})}))}),[]),T=(0,s.useCallback)((e=>{a(e),w.D.increaseStreamTime(e).then((()=>{O({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{O({message:`Error increasing stream time: ${e}`,isError:!0})}))}),[]);return(0,s.useEffect)((()=>{R().then((()=>{O({message:"Ad mocks fetched",isError:!1})})).catch((()=>{O({message:"Ad mocks fetch failed",isError:!0})}))}),[R]),(0,k.jsxs)("div",{className:S,children:[(0,k.jsx)(d.qb,{colorSet:"error"===b.status?"negative":"brightAccent",showSnackbar:E,children:b.message}),(0,k.jsx)(u.Z,{as:"h1",variant:"forte",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,k.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Increase Stream Time"}),(0,k.jsx)(m.g,{label:"Quick add stream time",children:(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(p.I,{mode:"action",layout:"single-line","aria-label":"Stream time presets",children:[(0,k.jsx)(h.v,{variant:"contrasting",onClick:()=>T(e(1)),children:"Add 1 min"}),(0,k.jsx)(h.v,{variant:"contrasting",onClick:()=>T(e(20)),children:"Add 20 mins"}),(0,k.jsx)(h.v,{variant:"contrasting",onClick:()=>T(e(40)),children:"Add 40 mins"}),(0,k.jsx)(h.v,{variant:"contrasting",onClick:()=>T(e(60)),children:"Add 1 hour"})]})})}),(0,k.jsxs)(m.g,{label:"Custom stream time in seconds",children:[(0,k.jsx)("div",{className:A,children:(0,k.jsx)(x.Z,{onChange:e=>a(e.currentTarget.value),placeholder:"seconds",value:t,type:"number",min:0})}),(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(g.$,{size:"small",onClick:()=>T(t),children:["Add ",t," seconds (~ ",(D=t,Math.round(Number(D)/60))," minutes)"]})})]}),(0,k.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Fetch ad from Ad Mocker"}),(0,k.jsxs)(m.g,{label:"Enqueue ad json directly into pod",children:[(0,k.jsxs)("div",{className:A,children:[(0,k.jsx)(v.E,{as:"label",htmlFor:"adMockerSessionId",variant:"bodyMedium",children:"Session ID"}),(0,k.jsx)(x.Z,{name:"adMockerSessionId",type:"text",value:j,onChange:e=>y(String(e.currentTarget.value))})]}),(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(f.F,{value:o,onChange:e=>{c(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a mock"}),_?.map((e=>(0,k.jsxs)("option",{value:e.name,children:[e.name," (",e.group,")"]},e.name)))]})}),(0,k.jsx)(g.$,{size:"small",onClick:()=>{w.D.fetchAdAndEnqueue(o,j).then((()=>{O({message:`${o} inserted`,isError:!1})})).catch((e=>{O({message:`Error inserting ${o}: ${e}`,isError:!0})}))},children:"Insert ad directly"})]}),(0,k.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Override Country"}),(0,k.jsxs)(m.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(f.F,{value:i,onChange:e=>{l(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,k.jsx)("option",{value:"AU",children:"Australia"}),(0,k.jsx)("option",{value:"BR",children:"Brasil"}),(0,k.jsx)("option",{value:"JP",children:"Japan"}),(0,k.jsx)("option",{value:"SE",children:"Sweden"}),(0,k.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,k.jsx)("option",{value:"US",children:"USA"}),(0,k.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,k.jsx)("option",{value:"",children:"Clear"})]})}),(0,k.jsx)(g.$,{size:"small",onClick:()=>{w.D.overrideCountry(i).then((e=>{0===e.status?O({message:`${i} override successful`,isError:!1}):O({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,k.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Clear Slot"}),(0,k.jsxs)(m.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,k.jsx)("div",{className:A,children:(0,k.jsxs)(f.F,{value:n,onChange:e=>{r(e.currentTarget.value)},children:[(0,k.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,k.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,k.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,k.jsx)("option",{value:"billboard",children:"billboard"}),(0,k.jsx)("option",{value:"hpto",children:"hpto"}),(0,k.jsx)("option",{value:"stream",children:"stream"})]})}),(0,k.jsx)(g.$,{size:"small",onClick:()=>{""!==n?P(n):O({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,k.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Trigger Stream Slot"}),(0,k.jsx)(m.g,{label:"Calls slotsClient.createSlot, adds 20 mins, puts targeting in focus",children:(0,k.jsx)(g.$,{size:"small",onClick:()=>{w.D.queueVideoAd().then((e=>{const t=e[0];t.error?O({message:`Error queuing video ad: ${t?.error}`,isError:!0}):O({message:"Video queued in stream slot",isError:!1})}))},children:"Queue Video Ad"})})]});var D};var I=a(47197),_=a(12313),R=a(68049),O=a(34475),P=a(81102),T=a(47186),D=a(56602),U=a(92815),L=a(12027);const M={tableContainer:"TgLcw_ZdaHvESkPEgYLQ",collapsed:"zNGegc8KwsTw3SQKHf_u",tableTitle:"qMSX_Pybr996fZcayagh",tableToggle:"YS6d6BNlR28mEtkxH07w",table:"vDxH9w6xk7bHMabZsuhj",tableHead:"sEU19oMM1YAICdZY23E5",rowHeader:"Cw3H6ooohrEJbRFy9cdg",rowName:"W0HCTspPvFScLWQ9QyJq",rowValue:"WM3ogL7MpxKR0Ym_n9qw",rowActions:"DQhZfpOIasfYMfhSltgB",propertyDescription:"iTrSMSnZF2Sr2pAGcj21",rowAction:"gQCLM4Et4LueQCIi2zW9",rowControl:"f9VIhAIG3YgquVQZqHZ5"},V=({title:e,titleExtra:t,rows:a,cols:n,canCollapse:i=!1,isCollapsedInitially:l=!1,renderHead:o=!1,renderRow:c})=>{const[d,u]=(0,s.useState)(!!i&&l);return(0,k.jsxs)(P.K,{className:r()(M.tableContainer,{[M.collapsed]:d}),children:[e?(0,k.jsxs)("div",{className:M.tableTitle,onClick:()=>{i&&u(!d)},children:[i?(0,k.jsx)("button",{className:M.tableToggle,children:d?(0,k.jsx)(T.V,{size:"small"}):(0,k.jsx)(D.r,{size:"small"})}):null,(0,k.jsx)("h3",{children:e}),t]}):null,(0,k.jsxs)(U.X,{className:M.table,children:[(0,k.jsx)("colgroup",{children:n.map(((e,t)=>(0,k.jsx)("col",{width:e.width,className:e.className},t)))}),o?(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{children:n.map(((e,t)=>(0,k.jsx)(L.M,{className:M.tableHead,children:e.name},t)))})}):null,(0,k.jsx)("tbody",{children:Array.isArray(a)?a.map((e=>c?c(e,n):null)):a})]})]})};var F=a(27102);function B(){const e=(0,F.ox)();return(0,s.useMemo)((()=>e?new e.Function("value","if (value) { navigator.clipboard.writeText(value) }"):()=>{}),[e])}var H=a(87182),z=a(7307);const J="YMcjds_NcAi4cEbmH8CQ",W="gh0JfRJ_O4dLCEdAjNVw",$="Txtj4xKE3LxMG2u23BIV",q="qJy0FbUBMTQ6CejUVLKy",Z="C58BICAHtIsDaVKzFpyb",Y="SdB9m1NLh7FZ1mMfQsAR",G="SxRUmP6Y0IRW1aJijfU5",K="BWvIH314t4_hcIDb2onA",Q="ayzSMCWwex0kqdHjRr3Y",X=[{language:"en",uri:"spotify:audio:50PZU7JmDySDzojKzTapDx"},{language:"fr-CA",uri:"spotify:audio:0j61Bw8ZF9wfyW65Cpugt9"}],ee=new Intl.DisplayNames(["en"],{type:"language"}),te=({language:e,uri:t})=>{const a=(0,H.z)(),s=B();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:ee.of(e)}),(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:t}),(0,k.jsxs)(_.n,{className:M.rowActions,children:[(0,k.jsx)("button",{className:M.rowAction,onClick:()=>{a.play({uri:"spotify:internal:fileplayback",pages:[{items:[{type:z.c.UNKNOWN,uri:t,uid:t,provider:"context",metadata:{title:"Spotify",image_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-300.jpg",image_small_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-64.jpg",image_large_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg",image_xlarge_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg","actions.advancing_past_track":"stop"}}]}],restrictions:{disallowPausingReasons:["narration"],disallowResumingReasons:["narration"],disallowSeekingReasons:["narration"],disallowSkippingPreviousReasons:["narration"],disallowSkippingNextReasons:["narration"],disallowTogglingRepeatContextReasons:["narration"],disallowTogglingRepeatTrackReasons:["narration"],disallowTogglingShuffleReasons:["narration"],disallowAddToQueueReasons:["narration"],disallowSetQueueReasons:["narration"],disallowSettingPlaybackSpeedReasons:["narration"]}},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"},{skipTo:{index:0}})},children:(0,k.jsx)(R.A,{size:"small"})}),(0,k.jsx)("button",{className:M.rowAction,onClick:()=>{s(t)},children:(0,k.jsx)(O._,{size:"small"})})]})]})},ae=()=>(0,k.jsx)(V,{title:"Consumption Cap Audio Disclaimer",rows:X,cols:[],renderRow:e=>(0,k.jsx)(te,{...e},e.uri),canCollapse:!0}),se=()=>(0,k.jsx)("div",{className:J,children:(0,k.jsx)(ae,{})});var ne=a(72680);const re="UX08Irxg3ssZhLQNj40b",ie=()=>{const e=B(),t=(0,ne.Y)(),a=t.token?.accessToken??"Not authorized",s=new Date(t.token?.accessTokenExpirationTimestampMs??0);return(0,k.jsx)("div",{className:re,children:(0,k.jsx)(V,{title:"Authorization",rows:[{name:"Token",value:a},{name:"Expires At",value:s.toLocaleString()},{name:"Retry Attempt",value:t.retryAttempt?.toString()??"N/A"},{name:"Retry At",value:t.retryAt?.toLocaleString()??"N/A"}],cols:[{width:"30%"},{},{width:"16px"}],renderRow:({name:t,value:a})=>(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:t}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:a}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>e(a),children:(0,k.jsx)(O._,{size:"small"})})})]})})})};var le=a(79237);const oe="A83S2dzV013Y19VLxbRT",ce=({name:e,value:t})=>{const a=B();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:t}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>a(t),children:(0,k.jsx)(O._,{size:"small"})})})]})},de=({device:e})=>(0,k.jsx)(V,{title:e.name,rows:[{name:"Device",value:e?.name},{name:"Identifier",value:e.id},{name:"Type",value:e.type},{name:"Group",value:e.isGroup.toString()},{name:"Local",value:e.isLocal.toString()},{name:"Active",value:e.isActive.toString()},{name:"Connecting",value:e.isConnecting.toString()},{name:"Disabled",value:e.isDisabled.toString()},{name:"Volume",value:e.volume.toString()},{name:"HiFi",value:e.losslessSupport.deviceSupported.toString()}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(ce,{...e}),canCollapse:!0,isCollapsedInitially:!0}),ue=()=>{const{connectionStatus:e,devices:t}=(0,le.v)((e=>({connectionStatus:e.connectionStatus,devices:e.devices})));return(0,k.jsxs)("div",{className:oe,children:[(0,k.jsx)(V,{title:"Connect",rows:(0,k.jsx)(ce,{name:"Status",value:e}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),t.map((e=>(0,k.jsx)(de,{device:e},e.id)))]})};var me=a(56515),pe=a(93378),he=a(61791),xe=a(49281),ge=a(89796),ve=a(11418),fe=a(34900),je=a(88170),ye=a(66144),be=a(260),Ne=a(26823),we=a(99576),Ce=a(87150),Se=a(8143),Ae=a(22726),ke=a(97548),Ee=a(68933),Ie=a(86563),_e=a(93523),Re=a(10502),Oe=a(53133),Pe=a(32255),Te=a(69624),De=a(97844),Ue=a(34613),Le=a(32999);const Me="wJTo6UR1k7MEB2qA3J6Q",Ve=({loading:e,uri:t,type:a,title:s,subtitle:n,coverArt:r})=>{const i=(0,Le._)(),l=B(),{enqueueSnackbar:o}=(0,Oe.d)();return(0,k.jsx)(ke.v,{id:t,variant:"naked",leading:(0,k.jsx)(De.s,{type:a,semanticColor:"textSubdued",size:"small"}),media:(0,k.jsx)(Pe.b,{fadeIn:!0,images:i(r?.sources,48),shape:Fe(t),size:Te.Qe.SIZE_48,iconSize:"medium",type:a??He(t),title:s??"",color:(0,Ue.m)(r?.extractedColors),loadingMode:"eager",className:Me}),title:e?(0,k.jsx)(Re.Y,{as:"div",variant:"bodyMediumBold",charCount:10,isLoading:!0}):(0,k.jsx)(Ee.d,{lineClamp:2,children:s??t}),subtitle:e&&Be(t)?(0,k.jsx)(Re.Y,{as:"div",variant:"bodySmall",charCount:15,isLoading:!0}):(0,k.jsx)(Ie.j,{hasTextSeparator:!0,lineClamp:2,children:n}),trailing:(0,k.jsx)(_e.H,{iconOnly:O._,label:"Copy URI to clipboard",onClick:()=>{l(t),o("URI copied to clipboard")}})})};function Fe(e){return(0,Ae.ecE)(e)||(0,Ae.APS)(e)?Pe.u.CIRCLE:Pe.u.ROUNDED_CORNERS}function Be(e){return!((0,Ae.ecE)(e)||(0,Ae.APS)(e)||(0,Ae.lyd)(e))}function He(e){const t=(0,Ae.o_h)(e)?.type;switch(t){case Ae.NQG.TRACK:return z.c.TRACK;case Ae.NQG.ALBUM:return z.c.ALBUM;case Ae.NQG.ARTIST:return z.c.ARTIST;case Ae.NQG.PLAYLIST:case Ae.NQG.PLAYLIST_V2:return z.c.PLAYLIST;case Ae.NQG.SHOW:return z.c.SHOW;case Ae.NQG.EPISODE:return z.c.EPISODE;case Ae.NQG.PROFILE:return z.c.USER;case Ae.NQG.CONCERT:return z.c.CONCERT;default:return z.c.UNKNOWN}}var ze=a(24909),Je=a(31417),We=a(57776),$e=a(59147);const qe=new We.l("decorateDebugEntityListRowEntities","query","861c56569f6e3f9b582f58762b2aaf572a354e3481da106907b4be5295e5cdb1",null);var Ze=a(13719),Ye=a(85907);function Ge(e){const{data:t,loading:a}=(n={uris:e},r={gcTime:18e5,enabled:!!e.length,placeholderData:ze.rX},(0,$e.I)(qe,n,r));var n,r;return(0,s.useMemo)((()=>({entitiesByUri:Object.fromEntries(t?.lookup.map(Ke).filter(Ze.P).map((e=>[e.uri,e]))??[]),loading:a})),[t?.lookup,a])}function Ke(e){switch(e.__typename){case"AlbumResponseWrapper":return"Album"===e.data.__typename?{uri:e.data.uri,type:z.c.ALBUM,title:e.data.name,subtitle:e.data.artists.items.map((e=>e.profile.name)).join(Je.Ru.getSeparator()),coverArt:e.data.coverArt}:null;case"ArtistResponseWrapper":return"Artist"===e.data.__typename?{uri:e.data.uri,type:z.c.ARTIST,title:e.data.profile.name,subtitle:null,coverArt:e.data.visuals.avatarImage}:null;case"ConcertResponseWrapper":return"Concert"===e.data.__typename?{uri:e.data.uri,type:z.c.CONCERT,title:e.data.title,subtitle:null,coverArt:e.data.image}:null;case"EpisodeOrChapterResponseWrapper":return"Chapter"===e.data.__typename?{uri:e.data.uri,type:z.c.CHAPTER,title:e.data.name,subtitle:"Audiobook"===e.data.audiobookV2.data.__typename?e.data.audiobookV2.data.authors.map((e=>e.name)).join(Je.Ru.getSeparator()):null,coverArt:e.data.coverArt}:"Episode"===e.data.__typename?{uri:e.data.uri,type:z.c.EPISODE,title:e.data.name,subtitle:"Podcast"===e.data.podcastV2.data.__typename?[e.data.podcastV2.data.name,e.data.podcastV2.data.publisher?.name??null].filter(Ze.P):[],coverArt:e.data.coverArt}:null;case"PlaylistResponseWrapper":return"Playlist"===e.data.__typename?{uri:e.data.uri,type:z.c.PLAYLIST,title:e.data.name,subtitle:e.data.followers?Je.Ru.get("saves",e.data.followers):null,coverArt:e.data.images.items.at(0)??null}:null;case"PodcastOrAudiobookResponseWrapper":return"Audiobook"===e.data.__typename?{uri:e.data.uri,type:z.c.AUDIOBOOK,title:e.data.name,subtitle:e.data.authors.map((e=>e.name)).join(Je.Ru.getSeparator()),coverArt:e.data.coverArt}:"Podcast"===e.data.__typename?{uri:e.data.uri,type:z.c.SHOW,title:e.data.name,subtitle:e.data.publisher?.name??null,coverArt:e.data.coverArt}:null;case"TrackResponseWrapper":return"Track"===e.data.__typename?{uri:e.data.uri,type:z.c.TRACK,title:e.data.name,subtitle:[e.data.artists.items.at(0)?.profile.name??null,e.data.albumOfTrack?.name??null].filter(Ze.P),coverArt:e.data.albumOfTrack?.coverArt??null}:null;case"UserResponseWrapper":return"User"===e.data.__typename?{uri:e.data.uri,type:z.c.USER,title:e.data.name,subtitle:null,coverArt:e.data.avatar}:null;case"GenreResponseWrapper":case"MerchResponseWrapper":case"PreReleaseResponseWrapper":case"UnknownTypeWrapper":return null;default:(0,Ye.k)(e)}return null}const Qe=({uri:e})=>{const{entitiesByUri:t,loading:a}=Ge([e]);return(0,k.jsx)(Ve,{loading:a,...t[e],uri:e})},Xe=new RegExp(String.raw`
  \b                      # only match parts that start at a word boundary
  (?:
    (?:
      (?:
          https?://(?:open|play).spotify.com
          | spotify
        )
        ([:/])
        (?:
          (                   # all standard entity types that are preceded by
                              # "spotify" and followed by a 22-char base 62 id
            track
            | album
            | artist
            | show
            | episode
            | playlist
            | concert
          )
          | (?:
              user\1[^\1]+\1(    # playlist v1 uri:s that contain usernames
                playlist
              )
            )
        )
        \1
      )
      ([0-9a-zA-Z]{22})         # standard 22-char base 62 id
    | (?:
        (?:
          https?://(?:open|play).spotify.com
          | spotify
        )
        ([:/])(user)\5
          (
            (?:
              [A-Za-z0-9\-._~!$&'()*+,;=]  # valid unescaped username characters
              | %[0-9A-Fa-f]{2}             # escaped username characters
            )+
          )
      )
  )
  \b                            # only match parts that end at a word boundary
`.replace(/(?<!\\)\s|#.*.*/g,""),"ig");var et=a(49863),tt=a(66371),at=a(45415);const st=({view:e,className:t})=>{const a=(0,s.useCallback)((t=>{(0,Ne.TS)(e,t.nativeEvent,"search-panel")&&t.preventDefault()}),[e]),n=(0,s.useCallback)((t=>{e.dispatch({effects:je.Ri.of(new je.L0({search:t}))})}),[e]),r=(0,s.useCallback)((()=>{(0,je.jO)(e)}),[e]),i=(0,s.useRef)(null);return(0,s.useEffect)((()=>{e.dispatch({effects:je.Ri.of(new je.L0({search:""}))}),i.current?.select()}),[e]),(0,k.jsx)("div",{className:t,children:(0,k.jsx)(et.E,{iconLeading:(0,k.jsx)(tt.C,{}),iconTrailing:(0,k.jsx)(at.M,{onClick:()=>r()}),children:(0,k.jsx)(x.Z,{ref:i,onKeyDown:e=>a(e),onChange:e=>n(e.currentTarget.value)})})})};var nt=a(75302);function rt(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function it(e,t,a=[]){let s=0;for(const n of Object.getOwnPropertyNames(e))t(e,n,a)?s++:rt(e[n])&&(s+=it(e[n],t,[n,...a]));return s}function lt(e,t){return void 0===e[t]&&(e[t]={},!0)}function ot(e,t){return!(!Array.isArray(e[t])||0!==e[t].length)&&(e[t]=[{}],!0)}function ct(e,t){return!(!Array.isArray(e[t])||1!==e[t].length||!rt(e[t][0])||0!==Object.getOwnPropertyNames(e[t][0]).length)&&(e[t]=[],!0)}function dt(e,t){return!(!rt(e[t])||0!==Object.getOwnPropertyNames(e[t]).length)&&(e[t]=void 0,!0)}function ut(e,t,a){return!(!a.some((e=>/policy/i.test(e)))||!1!==e[t])&&(delete e[t],!0)}function mt(e,t,a={}){let s=0;do{s=it(t=e.fromPartial(t),lt),s+=it(t,ot)}while(s>0);return it(t,dt),it(t,ct),!0===a.cleanPolicies&&it(t,ut),t}const pt=["spotify:artist:5INjqkS1o8h1imAzPqGZBb","spotify:album:79dL7FLiJFOO0EoehUHQBv","spotify:track:6K4t31amVTZDgR3sKmwUJJ","spotify:show:1OLcQdw2PFDPG1jo3s0wbp","spotify:episode:0VpyIy8Srg5IKQdRAbDDH1"],ht=Object.values(nt.UH).filter((e=>"string"==typeof e)).map((e=>({name:e,value:(0,nt.SP)(e)})));function xt(e,t){let a=0;const s=[];if(t.type.is("["))t.parent();else if(t.type.is("Property")){if(!t.firstChild())return[];s.unshift(e.sliceDoc(t.from+1,t.to-1)),t.parent()}for(;t.parent()&&!t.type.is("JsonText");){if(t.type.is("Array"))s.unshift("[]");else if(t.type.is("Property")){if(!t.firstChild())break;s.unshift(e.sliceDoc(t.from+1,t.to-1)),t.parent()}if(++a>1e4)break}return s}function gt(e,t){for(const a of t)if("[]"===a){if(!Array.isArray(e)||0===e.length)return null;e=e[0]}else Object.hasOwn(e,a)&&(e=e[a]);return e}function vt(e={}){return(0,he.yU)({activateOnTyping:!1,override:[t=>{const a=(0,ve.mv)(t.state).cursorAt(t.pos,-1);if(a.type.is("{")||a.type.is("Object")){const s=xt(t.state,a),n=function(e,t){return Object.getOwnPropertyNames(gt(e,t))}(e,s);return{from:t.pos,options:n.map((e=>({type:"text",label:e,apply:`"${e}"`})))}}if(a.type.is("[")||a.type.is("Array")){const s=xt(t.state,a),n=gt(e,s);return Array.isArray(n)&&rt(n[0])?{from:t.pos,options:[{type:"text",label:"{ ... }",apply:JSON.stringify(n[0]),boost:1},{type:"text",label:"{}",boost:0}]}:/extension/i.test(s[s.length-1])?{from:t.pos,options:ht.map((({name:e,value:t})=>({type:"constant",label:e,apply:`${t}`})))}:{from:t.pos,options:pt.map((e=>({type:"text",label:`"${e}"`})))}}if(a.type.is("Property")){const s=xt(t.state,a),n=function(e,t){const a=gt(e,t);return void 0===a?"null":Array.isArray(a)?"array":typeof a}(e,s),r=[];if("boolean"===n)r.push({type:"keyword",label:"true",boost:1}),r.push({type:"keyword",label:"false",boost:0});else if("null"===n)r.push({type:"keyword",label:"null",boost:1}),r.push({label:"{}",apply:"{}",boost:0});else if("string"===n){r.push({label:'""'});for(const e of pt)r.push({label:`"${e}"`})}else if("number"===n)if(/extension/i.test(s[s.length-1]))for(const{name:e,value:t}of ht)r.push({type:"constant",label:e,apply:`${t}`});else r.push({label:"0",apply:"0"}),r.push({label:"10",apply:"10"}),r.push({label:"100",apply:"100"});else"object"===n?r.push({label:"{}",apply:"{}"}):"array"===n&&r.push({label:"[]",apply:"[]"});return{from:t.pos,options:r}}return null}]})}const ft=[be.bM,(0,ve.y9)(be.kS),(0,Ne.$K)(),(0,Ne.dz)(),(0,Ne.Wu)(),(0,Ne.VH)(),ye.$t.allowMultipleSelections.of(!0),Ne.w4.of([...xe.pw,...xe.cL,...he.OO,...je.Eo,xe.Yc]),(0,je.$P)({top:!0,createPanel:e=>{const t=e.dom.ownerDocument.createElement("div");return(0,we.H)(t).render((0,k.jsx)(Ce.ID,{target:e.dom.ownerDocument.head,children:(0,k.jsx)(st,{view:e})})),{dom:t,top:!0}}}),(0,ve.Lv)(),(0,ge.Pq)()],jt=[...ft,(0,xe.b6)(),(0,fe.bu)((0,ge.cp)()),(0,ve.WD)(),(0,ve.SG)(),(0,he.wm)()],yt=[...ft,ye.$t.readOnly.of(!0)],bt=new ye.xx,Nt=({readOnly:e=!1,onChange:t,onDiagnostics:a,editorRef:n,className:r})=>{const i=(0,s.useRef)(null),{extension:l,tooltip:o}=function(){const[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(null);return{tooltip:a&&e?(0,Se.createPortal)((0,k.jsx)(Qe,{uri:e}),a):null,extension:(0,s.useMemo)((()=>(0,Ne.Ux)(((e,a)=>{const{from:s,text:r}=e.state.doc.lineAt(a),i=a-s,l=Array.from(r.matchAll(Xe)).find((({0:e,index:t})=>i>=t&&i<=t+e.length));if(!l)return null;const{0:o,index:c}=l,d=(0,Ae.o_h)(o)?.toURI();return d?{pos:s+c,end:s+c+o.length,above:!0,create(){const e=document.createElement("div");return e.style.maxWidth="400px",e.style.minHeight="64px",e.style.whiteSpace="initial",t(d),n(e),{dom:e}}}:null}))),[])}}();return(0,s.useEffect)((()=>{const s=new Ne.Lz({parent:i.current,extensions:[...e?yt:jt,bt.of(vt({})),Ne.Lz.updateListener.of((e=>{e.docChanged&&t?.(e.state.doc.toString());for(const t of e.transactions)for(const e of t.effects)e.is(fe._k)&&a?.(e.value)})),l]});return void 0!==n&&(n.current=s),()=>{s.destroy()}}),[e,t,a,n,l]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:r,ref:i}),o]})};function wt({readOnly:e,className:t,onChange:a,onDiagnostics:n}){const r=(0,s.useRef)(),i=(0,s.useRef)(a),l=(0,s.useRef)(n);i.current=a,l.current=n;const o=(0,s.useCallback)((()=>{const e=r.current;return void 0!==e?e.state.doc.toString():null}),[]),c=(0,s.useCallback)((e=>{const t=r.current;void 0!==t&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})}),[]),d=(0,s.useCallback)((e=>{const t=r.current;void 0!==t&&t.dispatch({effects:bt.reconfigure(vt(e))})}),[]),u=(0,s.useCallback)((e=>{i?.current?.(e)}),[]),m=(0,s.useCallback)((e=>{l?.current?.(e)}),[]);return{Editor:(0,k.jsx)(Nt,{editorRef:r,readOnly:e,className:t,onChange:u,onDiagnostics:m}),getContent:o,setContent:c,setReference:d}}var Ct=a(3529),St=a(81562),At=a(47566),kt=a(20550),Et=a(86072),It=a(27013),_t=a(46041),Rt=a(64334),Ot=a(85852),Pt=a(75402),Tt=a(27026),Dt=a(42654),Ut=a(20972),Lt=a(86e3),Mt=a(84609),Vt=a(90248),Ft=a(8805),Bt=a(44242),Ht=a(61771),zt=a(11540),Jt=a(39258),Wt=a(85158),$t=a(22845),qt=a(5595),Zt=a(96319),Yt=a(33373),Gt=a(93219),Kt=a(79157),Qt=a(16530),Xt=a(16714),ea=a(99822),ta=a(75247),aa=a(42190),sa=a(3058),na=a(15584),ra=a(76672),ia=a(29496),la=a(36247),oa=a(6226),ca=a(45312),da=a(9367);const ua=[Ct.B,St.ve,At.Pc,kt.BM,Pt.CJ,Pt.NB,Pt.uC,Pt.RI,Pt.UF,Pt.FY,Pt.B3,Pt.Dt,Pt.s,Pt.Xk,Pt.Yl,Et.r,It.pt,_t.MI,Rt.J1,Ot.di,Tt.BO,Dt.Pm,Ut.Ww,Lt._w,Mt.rM,Mt.A5,Mt.qM,Vt.hN,Ft.NI,Bt.lb,Ht.xo,zt.IU,j.EW,Jt.oW,Wt.Gy,$t.LN,qt.HG,da._4,Zt.Ag,Yt._,Gt.y9,Kt.A,Qt.J4,Xt.xV,ea.hA,ta.f_,aa.Ms,sa.NH,na.$A,nt.sp,ra.GD,ia.to1,ia.hm7,ia.hb0,ia.Bl$,ia.ZxE,oa.aA,ca.FZ,la.zW];function ma(e){return JSON.parse(e,((e,t)=>null===t?void 0:t))}function pa(e){return JSON.stringify(e,((e,t)=>void 0===t?null:"bigint"==typeof t?t.toString():t),2)}function ha(){const{serviceMap:e,serviceNames:t}=(0,s.useMemo)((()=>{const e=function(e){return ua.sort(((e,t)=>e.SERVICE_ID.localeCompare(t.SERVICE_ID))).reduce(((t,a)=>(t[a.SERVICE_ID]={methods:a.METHODS,client:new a(e)},t)),{})}((0,b.X)());return{serviceMap:e,serviceNames:Object.keys(e)}}),[]),[a,n]=(0,s.useState)(t[0]),r=e[a].methods,i=e[a].client,l=Object.keys(r),[o,c]=(0,s.useState)(l[0]),d=r[o].requestType,u=r[o].isStreaming,m=i[o],p=(0,s.useCallback)(((t,a)=>{const s=t??Object.keys(e)[0],r=e[s].methods,i=a??Object.keys(r)[0];n(s),c(i)}),[e,n,c]),h=(0,s.useMemo)((()=>pa(mt(d,{},{cleanPolicies:!0}))),[d]),x=(0,s.useMemo)((()=>mt(d,{})),[d]),g=(0,s.useCallback)((e=>{try{return pa(mt(d,ma(e),{cleanPolicies:!0}))}catch(t){return e}}),[d]),v=(0,s.useCallback)((async(e,t)=>{const a=d.fromPartial(ma(e));if(u)return m.call(i,a,(e=>{t(pa(e))}));const s=await m.call(i,a);return t(pa(s)),null}),[i,u,d,m]);return{services:t,methods:l,service:a,method:o,client:i,message:d,call:v,jsonReference:x,jsonString:h,prettify:g,update:p}}const xa="k0haAXLr7hf1SVRhhDf_",ga="JzYBuC4I28TFE0vRsOB2",va="Jifrv_M5FQ_4004rxNlX",fa="ai8gaZdopia8aUEGYxks",ja="sSRpW8Sztpp8r_xEe6yQ",ya="xoLDWOSxKz7zqi5PkIS1",ba="GuzyU8s8JXVn4PKEcz1o",Na=()=>{const{services:e,methods:t,service:a,method:n,call:r,jsonReference:i,jsonString:l,prettify:o,update:c}=ha(),d=(0,s.useRef)(null),[u,m]=(0,s.useState)(!1),[p,h]=(0,s.useState)([]),x=p.length>0,{Editor:g,setContent:f,getContent:j,setReference:y}=wt({className:ba,onDiagnostics:e=>h(e)}),{Editor:b,setContent:N}=wt({className:ba,readOnly:!0}),w=(0,s.useCallback)((()=>{null!==d.current&&(d.current.cancel(),d.current=null,m(!1))}),[m]),C=(0,s.useCallback)((async()=>{w();const e=await r(j()??"{}",(e=>{N(e)}));null!==e&&(d.current=e,m(!0))}),[r,w,j,N]),S=(0,s.useCallback)((async()=>{const e=o(j()??"{}");f(e)}),[o,j,f]);(0,s.useEffect)((()=>{y(i),f(l),N(""),w()}),[y,i,f,l,N,w]);const A=[{label:"Core",options:e.filter((e=>-1===e.indexOf("desktop"))).map((e=>({label:e,value:e})))},{label:"Desktop",options:e.filter((e=>-1!==e.indexOf("desktop"))).map((e=>({label:e,value:e})))}],E=t.map((e=>({label:e,value:e})));return(0,k.jsxs)("div",{className:xa,children:[(0,k.jsxs)("div",{className:ga,children:[(0,k.jsx)(v.E,{as:"p",variant:"bodyMedium",children:"Endpoint"}),(0,k.jsx)(pe.Ay,{value:{label:a,value:a},options:A,onChange:e=>{c(e?.value??void 0)},styles:{menuList:t=>({...t,minHeight:`min(60vh, ${50*e.length}px)`})}}),(0,k.jsx)(pe.Ay,{value:{label:n,value:n},options:E,onChange:e=>c(a,e?.value??void 0),styles:{menuList:e=>({...e,minHeight:`min(60vh, ${50*t.length}px)`})}})]}),(0,k.jsxs)("div",{className:va,children:[(0,k.jsxs)("div",{className:ja,children:[(0,k.jsx)(v.E,{as:"p",variant:"bodyMedium",children:"Request"}),(0,k.jsx)(me.n,{className:ya,size:"small",disabled:x,onClick:S,children:"Prettify"}),(0,k.jsx)(me.n,{className:ya,size:"small",disabled:x,onClick:u?w:C,children:u?"Cancel":"Send"})]}),g]}),(0,k.jsxs)("div",{className:fa,children:[(0,k.jsx)("div",{className:ja,children:(0,k.jsx)(v.E,{as:"p",variant:"bodyMedium",children:"Response"})}),b]})]})};var wa=a(95683);const Ca={ranges:[{name:"Basic Latin (ASCII)",start:"U+0000",end:"U+007F"},{name:"Latin-1 Supplement",start:"U+0080",end:"U+00FF"},{name:"Latin Extended-A",start:"U+0100",end:"U+017F"},{name:"Latin Extended-B",start:"U+0180",end:"U+024F"},{name:"Greek and Coptic",start:"U+0370",end:"U+03FF"},{name:"Cyrillic",start:"U+0400",end:"U+04FF"},{name:"Armenian",start:"U+0530",end:"U+058F"},{name:"Hebrew",start:"U+0590",end:"U+05FF"},{name:"Arabic",start:"U+0600",end:"U+06FF"},{name:"Devanagari",start:"U+0900",end:"U+097F"},{name:"General Punctuation",start:"U+2000",end:"U+206F"}]},Sa={},Aa=()=>{const e=(0,s.useRef)(null),t=(0,s.useRef)(null),a=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useCallback)((()=>{const e=a.current?.getBoundingClientRect().width,t=(0,wa.L)(a.current.textContent,20,400);n.current.textContent=`Real width: ${e}px, Estimated width: ${t}px`}),[]),i=(0,s.useCallback)((()=>{Ca.ranges.forEach((t=>{const a=parseInt(t.start.slice(2),16),s=parseInt(t.end.slice(2),16);for(let t=a;t<=s;t++){const a=String.fromCharCode(t),s=document.createElement("span");s.style.display="inline",s.style.fontSize="20px",s.style.fontWeight="400",s.textContent=a,e.current?.appendChild(s);const n=s.getBoundingClientRect().width,r=Math.floor(n/20*100);Sa[t]=r}})),t.current.textContent=JSON.stringify(Sa)}),[]);return(0,s.useEffect)((()=>{r()}),[r]),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{children:"Change the text below if the map is working correctly"}),(0,k.jsx)("div",{children:(0,k.jsx)("span",{contentEditable:!0,style:{fontSize:"20px",fontWeight:400,background:"#fff",border:"1px solid blue",margin:"16px 0",padding:"0px"},ref:a,onInput:r,children:"Lorem ipsum dolor sit amet."})}),(0,k.jsx)("pre",{ref:n})]}),(0,k.jsx)("hr",{}),(0,k.jsx)("h2",{children:"JSON font map output"}),(0,k.jsx)("div",{children:(0,k.jsx)("textarea",{style:{width:"100%",height:"200px"},ref:t})}),(0,k.jsx)("hr",{}),(0,k.jsx)("h2",{children:"Rendering Area"}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{onClick:i,children:"Render chars"})}),(0,k.jsx)("div",{style:{width:"100%",maxWidth:"100%",border:"1px solid red"},ref:e})]})};var ka=a(34901),Ea=a(42822),Ia=a(33210),_a=a(88992),Ra=a(78482),Oa=a(85546),Pa=a(41231),Ta=a(61208),Da=a(52439),Ua=a(32929),La=a(99701),Ma=a(23091);function Va(e){return e instanceof Uint8Array?(0,Ma.U5)(e):Array.isArray(e)?e.map(Va):"object"==typeof e&&null!==e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,Va(t)]))):e}var Fa=a(62021),Ba=a(62933),Ha=a(30157),za=a(16946);var Ja=a(96566),Wa=a(61979);const $a="bJCivn96KnicF9OorMtA",qa="dYwRqJuHwq70xUmQIvWg",Za="J4_D9yyu_KzwPD8HrEP8",Ya="zSOvuirnU0EE_dZISOQG",Ga="SQ59ocfu1aRXjYTP_E7I",Ka="YlTDiTj7_ooJnrkjWaGI",Qa="v1ZF45YEwslZyIViHQr_",Xa="PgqFMbfDZ0HaAaMKz2hg",es="LzF5Qzz4X6invHGmooXD",ts="APJUu59mvWfVPwPVaZ78",as="L9rS2WwxiEjv6HLfbx0B",ss="f4sDBZZ5uI0KiTmmnuGL",ns=(0,Ja.g)(Ba.UH);const rs=()=>{const e=(0,Ha.N)(za.Z),{enqueueSnackbar:t}=(0,Oe.d)(),a=B(),n=function(){const e=(0,F.ox)();return(0,s.useMemo)((()=>e?new e.Function("","return navigator.clipboard.readText()"):()=>{}),[e])}(),{Editor:r,setContent:i,getContent:l}=wt({readOnly:!0}),o=Object.values(Ba.UH).filter((e=>"number"==typeof e)).map((e=>({value:e,label:Ba.UH[e]}))),c=(0,s.useMemo)((()=>Object.fromEntries(o.map((e=>[e.value,e])))),[o]),[d,u]=(0,s.useState)(""),[p,x]=(0,Fa.x)("mex-debug-extensions",[]),[f,j]=(0,Fa.x)("mex-debug-extension-kinds-by-entity-uri-to-request",{}),[y,b]=(0,Fa.x)("mex-debug-show-decorated-entities",!0),[N,w]=(0,Fa.x)("mex-debug-should-hex-encode-bytes",!0),[C,S]=(0,s.useState)(null),A=Ge(y?Object.keys(f):[]);(0,s.useEffect)((()=>{if(!C)return void i("");const{requestedExtensionKindsByEntityUri:e,extensionsByEntityUri:t}=C,a=Object.entries(e).map((([e,a])=>({entityUri:e,...Object.fromEntries(a.map((a=>[Ba.UH[a],t[e]?.[a]??null])))})));i(JSON.stringify(N?Va(a):a,null,2))}),[C,i,N]);const E=(0,s.useMemo)((()=>Array.from(new Set(Object.values(f).flat().filter((e=>!(0,Ba.V$)(e)))))),[f]);return(0,k.jsxs)("div",{className:$a,children:[(0,k.jsx)(v.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:"Metadata extensions"}),(0,k.jsxs)("div",{className:Za,children:[(0,k.jsx)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation();const a=is(d).split(/\n/).filter((e=>null!==(0,Ae.o_h)(e,{parseUnknown:!0})));if(!a.length)return void t(`Invalid entity URIs: "${d}"`);if(!p.length)return void t("Please select some metadata extensions before adding");const s=p.map((e=>e.value)),n=(0,Wa.h)(f);for(const e of a)n[e]??=[],n[e]=Array.from(new Set([...n[e],...s]));j(n)},children:(0,k.jsxs)(ka.a,{className:Ya,variant:"tinted",tabIndex:-1,children:[(0,k.jsx)(v.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Add entities"}),(0,k.jsxs)(m.g,{label:"Entity URI(s)",labelFor:"entity-uri",children:[(0,k.jsx)(Ea.h,{id:"entity-uri",type:"text",placeholder:"Entity URI(s) to fetch extensions for",value:d,className:Ga,autoFocus:!0,onChange:e=>{const t=e.currentTarget.value;u(e.nativeEvent instanceof InputEvent&&"insertFromPaste"===e.nativeEvent.inputType?is(t):t)},required:!0}),(0,k.jsx)(Ia.N,{children:"Entity URI(s) to request metadata extensions for."})]}),(0,k.jsxs)(m.g,{label:"Metadata extension(s)",labelFor:"metadata-extensions",children:[(0,k.jsx)(pe.Ay,{value:p,id:"metadata-extensions",placeholder:"Metadata extension(s) to fetch",isMulti:!0,name:"Metadata extensions",options:o,onChange:e=>{x([...e])}}),(0,k.jsx)(Ia.N,{children:"Metadata extension(s) to request for the specified entity uri(s)."})]}),(0,k.jsx)(me.n,{className:Qa,type:"submit",disabled:!d||!p.length,children:"Add"})]})}),(0,k.jsxs)(ka.a,{className:Ka,variant:"tinted",tabIndex:-1,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(v.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Added entities"}),(0,k.jsx)(_a.X,{checked:y,onChange:e=>{b(e.target.checked)},children:"Show decorated entities"})]}),Object.keys(f).length?(0,k.jsxs)(U.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"375px"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{width:"48px"})]}),(0,k.jsx)("thead",{children:(0,k.jsxs)(I.H,{children:[(0,k.jsx)(L.M,{children:"Entity"}),(0,k.jsx)(L.M,{children:"Extensions to request"}),(0,k.jsx)(L.M,{})]})}),(0,k.jsx)("tbody",{children:Object.entries(f).map((([e,s])=>(0,k.jsxs)(I.H,{children:[(0,k.jsx)(_.n,{condensed:!0,children:y?(0,k.jsx)(Ve,{loading:A.loading&&!(e in A.entitiesByUri),...A.entitiesByUri[e],uri:e}):(0,k.jsx)(h.v,{iconLeading:()=>(0,k.jsx)(De.s,{size:"small",type:A.entitiesByUri[e]?.type??(0,Ae.o_h)(e)?.type}),onClick:()=>{a(e),t("URI copied to clipboard")},style:{marginBlockEnd:0},children:e})}),(0,k.jsx)(_.n,{condensed:!0,children:(0,k.jsx)(pe.Ay,{value:s.map((e=>c[e])),placeholder:"Metadata extension(s) to fetch",isMulti:!0,isClearable:!1,name:"Metadata extensions",options:o,onChange:t=>{const a=(0,Wa.h)(f);a[e]=t.map((e=>e.value)),j(a)}})}),(0,k.jsx)(_.n,{condensed:!0,children:(0,k.jsx)(La.Zp,{label:"Remove entity",children:(0,k.jsx)(_e.H,{className:Qa,iconOnly:at.M,label:"Remove",onClick:()=>{const{[e]:t,...a}=f;j(a)}})})})]},e)))})]}):(0,k.jsxs)(Ra.p,{icon:Oa.Z,variant:"contextual",children:[(0,k.jsx)(Pa.R,{children:"No entities added"}),(0,k.jsx)(Ta.S,{children:"Add entities to request metadata extensions for and they'll be listed here."})]})]})]}),(0,k.jsxs)("div",{className:Xa,tabIndex:-1,children:[(0,k.jsx)(g.$,{className:Qa,onClick:async()=>{const t=f,a=new Map,s=new Map;for(const[e,t]of Object.entries(f)){const n=t.slice().sort().toString();a.has(n)||a.set(n,t);const r=a.get(n);s.set(r,(s.get(r)??[]).concat(e))}const n=await Promise.all(Array.from(s.entries()).map((([t,a])=>e.fetch(a,t)))).then((e=>Object.fromEntries(e.flat().map((({uri:e,extensions:t})=>[e,t])))));S({requestedExtensionKindsByEntityUri:t,extensionsByEntityUri:n})},children:"Fetch extensions"}),(0,k.jsx)(me.n,{className:Qa,onClick:async()=>{const a=new Map;for(const[e,t]of Object.entries(f))for(const s of t)a.has(s)||a.set(s,[]),a.get(s)?.push(e);await Promise.all(Array.from(a.entries()).map((([t,a])=>e.expire(a,t)))),t("Extensions expired!")},children:"Expire extensions"}),(0,k.jsx)(La.Zp,{label:"Copy request parameters",children:(0,k.jsx)(_e.H,{className:Qa,iconOnly:Da.C,condensed:!0,onClick:()=>{t("Request parameters copied to clipboard"),a(JSON.stringify(f,null,2))}})}),(0,k.jsx)(La.Zp,{label:"Import request parameters from clipboard",children:(0,k.jsx)(_e.H,{className:Qa,iconOnly:e=>(0,k.jsx)(Da.C,{...e,className:qa}),condensed:!0,onClick:async()=>{try{const a=JSON.parse(await n());"object"==typeof(e=a)&&null!==e&&Object.entries(e).every((([e,t])=>"string"==typeof e&&Array.isArray(t)&&t.every(ns)))?(j(a),t("Request parameters imported from clipboard")):t("Invalid request parameters in clipboard")}catch(e){t(`Failed to import request parameters from clipboard due to the error: ${e instanceof Error?e.message:e}`)}var e}})})]}),C&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ua.d,{className:es}),(0,k.jsxs)("div",{className:ss,tabIndex:-1,children:[(0,k.jsxs)("div",{className:ts,children:[(0,k.jsx)(v.E,{variant:"titleMedium",as:"h2",semanticColor:"textBase",children:"Response"}),(0,k.jsxs)("div",{className:as,children:[(0,k.jsx)(La.Zp,{label:"Hex encode all byte fields",children:(0,k.jsx)("div",{children:(0,k.jsx)(_a.X,{checked:N,onChange:e=>{w(e.target.checked)},children:"Hexify bytes"})})}),(0,k.jsx)(La.Zp,{label:"Copy response to clipboard",children:(0,k.jsx)(_e.H,{className:Qa,iconOnly:O._,onClick:()=>{a(l()??void 0),t("Response copied to clipboard")}})}),(0,k.jsx)(La.Zp,{label:"Clear response",children:(0,k.jsx)(_e.H,{className:Qa,iconOnly:at.M,onClick:()=>{S(null)}})})]})]}),E.length?(0,k.jsxs)(ka.a,{variant:"contrasting",colorSet:"warning",children:[(0,k.jsx)(v.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Warning: requested extensions lacking decoders:"}),(0,k.jsx)("div",{children:E.map((e=>(0,k.jsx)(h.v,{children:Ba.UH[e]},e)))}),(0,k.jsx)(v.E,{variant:"bodyMedium",paddingBottom:"tighter-2",children:"You might want to add proto files and generate a decoders for these in the MetadataExtensionsAPI."})]}):null,r]})]})]})};function is(e){return e.trimStart().split(/([\s,]+)/).map(((e,t)=>t%2?"\n":(0,Ae.o_h)(e,{parseUnknown:!0})?.toURI()??e)).join("")}var ls=a(71416),os=a(58054),cs=a(79110),ds=a(38635),us=a(73301),ms=a(36593),ps=a(5854),hs=a(14036),xs=a(3326);var gs=a(32792),vs=a(38694);var fs=a(58685),js=a(82935);const ys=({size:e,ranges:t})=>{if(0===t.length)return(0,k.jsx)("div",{className:$,children:(0,k.jsx)("div",{className:q})});const a=`linear-gradient(90deg, ${t.map((t=>{const a=100*t.fromByte/e,s=100*t.toByte/e;return`transparent ${a}%, ${ls.pfM} ${a}%, ${ls.pfM} ${s}%, transparent ${s}%`})).join(", ")})`;return(0,k.jsx)("div",{className:$,children:(0,k.jsx)("div",{className:q,style:{background:a}})})},bs=({item:e,file:t})=>{const a=(0,H.z)(),s=B(),n=(function(e){let t,a,s=0;if(0===e.length)return s;for(t=0;t<e.length;t++)a=e.charCodeAt(t),s=(s<<5)-s+a,s|=0;return s}(`${t.format}${t.bitrate}${t.formatEnum}`)+180)%360;return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:(0,k.jsxs)("div",{className:Z,style:{background:`linear-gradient(180deg, hsl(${n}, 60%, 30%), hsl(${n}, 40%, 70%))`},children:[(0,k.jsx)("span",{className:Y,children:t.format}),(0,k.jsx)("span",{className:G,children:Ns(t)})]})}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,children:(0,k.jsxs)("div",{className:W,children:[t.fileId,(0,k.jsx)(ys,{size:t.byteSize,ranges:t.byteRanges})]})}),(0,k.jsxs)(_.n,{className:M.rowActions,children:[(0,k.jsx)("button",{className:M.rowAction,onClick:()=>{a.play({uri:"spotify:internal:fileplayback",pages:[{items:[{...e,provider:"context",metadata:{"media.manifest":JSON.stringify({id:t.fileId,bitrate:t.bitrate,format:t.formatEnum,encryption:"aes"})}}]}]},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)(R.A,{size:"small"})}),(0,k.jsx)("button",{className:M.rowAction,onClick:()=>{s(t.fileId)},children:(0,k.jsx)(O._,{size:"small"})})]})]})};function Ns(e){switch(e.formatEnum){case 16:return"16-bit";case 22:return"24-bit";default:return ws(e.bitrate,1e3,"k")}}function ws(e=void 0,t=1,a=""){if(void 0!==e&&-1!==e)return"string"==typeof e&&(e=Number.parseInt(e,10)),`${(Number(e)/t).toLocaleString("en",{maximumFractionDigits:10})}${a}`}function Cs(e=void 0){return!0===e?"Yes":"No"}function Ss(e=void 0){if(void 0!==e)return(0,js.f)(Number(e))}const As=({name:e,value:t})=>{const a=B();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:t}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>a(t),children:(0,k.jsx)(O._,{size:"small"})})})]})},ks=({terminalType:e,transportType:t,isDefaultDevice:a})=>{const s=a?"essentialPositive":"essentialBase",n=[];switch(e){case Zt.FI.TERMINAL_TYPE_SPEAKERS:n.push((0,k.jsx)(os.r,{semanticColor:s,size:"small"}));break;case Zt.FI.TERMINAL_TYPE_HEADPHONES:n.push((0,k.jsx)(cs.r,{semanticColor:s,size:"small"}));break;case Zt.FI.TERMINAL_TYPE_DISPLAY_DEVICE:n.push((0,k.jsx)(ds.I,{semanticColor:s,size:"small"}))}switch(t){case Zt.Yg.TRANSPORT_TYPE_BUILT_IN:case Zt.Yg.TRANSPORT_TYPE_VIRTUAL:break;case Zt.Yg.TRANSPORT_TYPE_USB:n.push((0,k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{position:"relative",top:"3px",width:16,height:16,fill:(0,us.oj)(s)},children:(0,k.jsx)("path",{d:"m7.792.312-1.533 2.3A.25.25 0 0 0 6.467 3H7.5v7.319a2.5 2.5 0 0 0-.515-.298L5.909 9.56A1.5 1.5 0 0 1 5 8.18v-.266a1.5 1.5 0 1 0-1 0v.266a2.5 2.5 0 0 0 1.515 2.298l1.076.461a1.5 1.5 0 0 1 .888 1.129 2.001 2.001 0 1 0 1.021-.006v-.902a1.5 1.5 0 0 1 .756-1.303l1.484-.848A2.5 2.5 0 0 0 11.995 7h.755a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h.741a1.5 1.5 0 0 1-.747 1.142L8.76 8.99a2.584 2.584 0 0 0-.26.17V3h1.033a.25.25 0 0 0 .208-.389L8.208.312a.25.25 0 0 0-.416 0Z"})}));break;case Zt.Yg.TRANSPORT_TYPE_BLUETOOTH:n.push((0,k.jsx)(ms.C,{semanticColor:s,size:"small"}));break;case Zt.Yg.TRANSPORT_TYPE_DISPLAY_DEVICE:n.push((0,k.jsx)(ds.I,{semanticColor:s,size:"small"}))}return 0===n.length&&n.push((0,k.jsx)(ps.N,{semanticColor:s,size:"small"})),(0,k.jsx)(k.Fragment,{children:n})},Es=({name:e,id:t,isDefaultDevice:a,terminalType:s,terminalTypeRaw:n,transportType:r,transportTypeRaw:i})=>{const l=B();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsxs)(_.n,{className:M.rowName,highlight:!0,children:[(0,k.jsx)(ks,{terminalType:s,transportType:r,isDefaultDevice:a})," ",e]}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,children:t}),(0,k.jsx)(_.n,{className:M.rowValue,children:n}),(0,k.jsx)(_.n,{className:M.rowValue,children:i}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>l(t),children:(0,k.jsx)(O._,{size:"small"})})})]})},Is=()=>{const e=(0,fs.o)((e=>e?.item??null)),t=function(){const[e,t]=(0,s.useState)(null),a=(0,xs.p)();return(0,s.useEffect)((()=>{let e=!0;return a.getPlaybackInfo().then((a=>{e&&t(a)})),()=>{e=!1}}),[a]),(0,vs.F)(gs._.INFO,(({data:e})=>{t(e)})),e}(),a=function(e=null,t=null){const[a,n]=(0,s.useState)(null),r=(0,xs.p)();return(0,s.useEffect)((()=>{let a=!0,s=null;if(null===e)n(null);else{const i=async()=>{const t=await r.getFiles(e);a&&n(t)};i(),null!==t&&(s=window.setInterval(i,t))}return()=>{a=!1,null!==s&&window.clearInterval(s)}}),[r,e,t]),a}(e?.uri,500),n=(0,H.z)(),[r,i]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const e=(0,b.X)(),t=new Zt.Ag(e).getAudioOutputDevices({},(e=>{i(e.devices.sort(((e,t)=>e.isDefaultDevice?-1:t.isDefaultDevice?1:e.name.localeCompare(t.name))))}));return()=>{t.cancel()}}),[]),null===e?(0,k.jsx)("div",{className:J,children:"Nothing is currently playing."}):(0,k.jsxs)("div",{className:J,children:[(0,k.jsxs)("div",{className:K,children:[(0,k.jsx)(v.E,{variant:"bodySmallBold",children:"Forced shuffle"}),(0,k.jsx)(hs.l,{id:"forced-shuffe",value:n.getForcedShuffle(),onSelected:e=>{n.setForcedShuffle(e)}})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{className:Q,onClick:()=>{n.play({uri:"invalid_context_uri"},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,k.jsx)("span",{children:"Clear context"})})}),(0,k.jsx)(V,{title:"Devices",rows:r,cols:[{name:"Name",width:"30%"},{name:"ID"},{name:"Terminal"},{name:"Transport"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(Es,{...e}),canCollapse:!0}),(0,k.jsx)(V,{title:"Details",rows:[{name:"url"===t?.fileType?"URL":"File ID",value:t?.fileId},{name:"Type",value:t?.fileType},{name:"Codec",value:t?.codecName},{name:"Bitrate",value:ws(t?.fileBitrate,1e3,"k")},{name:"Strategy",value:t?.strategy},{name:"Target Bitrate",value:ws(t?.targetBitrate,1e3,"k")},{name:"Advisted Bitrate",value:ws(t?.advisedBitrate,1e3,"k")},{name:"Target File Available",value:Cs(t?.targetFileAvailable)},{name:"Duration (hh:mm)",value:Ss(t?.lengthMs)},{name:"Duration (ms)",value:ws(t?.lengthMs,1," ms")},{name:"Speed",value:ws(t?.playbackSpeed)},{name:"Gain Adjustment",value:ws(t?.gainAdjustment)},{name:"Loudness",value:t?.hasLoudness?ws(t?.loudness):void 0}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,k.jsx)(As,{...e}),canCollapse:!0}),(0,k.jsx)(V,{title:"Files",rows:a??[],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:t=>(0,k.jsx)(bs,{item:e,file:t},t.fileId),canCollapse:!0,isCollapsedInitially:!0})]})},_s="wNixUJkDt8ib6LarXls_",Rs=()=>{const e=(0,fs.o)((e=>e)),t=(0,s.useMemo)((()=>JSON.stringify(e,((e,t)=>"metadata"===e&&t?.constructor===Object?Object.fromEntries(Object.entries(t).sort()):t),2)),[e]),{Editor:a,setContent:n}=wt({readOnly:!0});return(0,s.useEffect)((()=>{n(t)}),[t,n]),(0,k.jsx)("div",{className:_s,children:a})};var Os=a(85387),Ps=a(11893);const Ts="cD9jN2lI075m3UkqXSlQ",Ds=({playlistUri:e})=>{const t=(0,Ps.J)(e,{decorateFormatListData:!0}),{Editor:a,setContent:n}=wt({readOnly:!0});return(0,s.useEffect)((()=>{const e=JSON.stringify(t,null,2);n(e)}),[t,n]),a},Us=()=>{const e=(0,Os.zy)(),t=(0,Ae.o_h)(e.pathname),a=(0,Ae.nuB)(t);return(0,k.jsx)("div",{className:Ts,children:a?(0,k.jsx)(Ds,{playlistUri:t.toURI()}):(0,k.jsx)(v.E,{variant:"bodyMedium",children:"Navigate to a playlist to see metadata here."})})};var Ls=a(82381);const Ms=()=>{const{data:e}=(0,Ls.k)(),t=Object.keys(e).sort().reduce(((t,a)=>(t[a]=e[a],t)),{}),a=JSON.stringify(t,null,2),{Editor:n,setContent:r}=wt({readOnly:!0});return(0,s.useEffect)((()=>{r(a)}),[a,r]),(0,k.jsx)("div",{className:Ts,children:n})};var Vs=a(29051),Fs=a(55968),Bs=a(14442),Hs=a(3339),zs=a(54866);function Js(e,t){const a=(0,zs.x)();(0,s.useEffect)((()=>a.getEvents().addListener(e,t)),[e,t,a])}const Ws="Gc_xi0GmVaC4DyViocdz",$s="uliJIthMaP5kUx2IpElY",qs="h0NXdJlkjupX8nTYlhhc",Zs=({name:e,value:t})=>{const a=B();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:t}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>a(t),children:(0,k.jsx)(O._,{size:"small"})})})]})},Ys=()=>{const e=(()=>{const e=(0,zs.x)(),[t,a]=(0,s.useState)(e.getSubscriptions()),n=(0,s.useCallback)((()=>{a(e.getSubscriptions())}),[e,a]);return Js(Hs.K.SUBSCRIBE,n),Js(Hs.K.CANCEL,n),Js(Hs.K.REFRESH,n),t})(),t=B(),a=Object.entries((n=e=>`${e.ident}${e.isPrefix?"*":""}`,e.reduce(((e,t)=>{const a=n(t);return(e[a]=e[a]||[]).push(t),e}),{})));var n;return(0,k.jsx)(V,{title:"Subscriptions",rows:a,cols:[{name:"Ident"},{name:"Actions",width:"16px"}],renderRow:([e,a])=>(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsxs)(_.n,{className:M.rowValue,truncate:!0,children:[e," (",a.length,")"]}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>t(e),children:(0,k.jsx)(O._,{size:"small"})})})]},e),canCollapse:!0})};function Gs(e){if(e.ident.endsWith("/json"))return!0;if(0===e.payloads.length)return!1;const t=(0,Ma.dI)(e.payloads[0]);return t.length>0&&"{"===t[0]}const Ks=({message:e})=>{const[t,a]=(0,s.useState)(!1),{Editor:n,setContent:r}=wt({readOnly:!0});return(0,s.useEffect)((()=>{if(0!==e.payloads.length)if(Gs(e)){const t=JSON.parse((0,Ma.dI)(e.payloads[0]));r(JSON.stringify(t,void 0,2))}else{const t=(0,Ma.U5)(e.payloads[0]);r(JSON.stringify(t,void 0,2))}}),[e,r]),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,children:new Date(e.timestamp).toLocaleString()}),(0,k.jsx)(_.n,{className:M.rowName,children:e.ident}),(0,k.jsxs)(_.n,{className:M.rowName,children:[(0,k.jsx)("button",{className:M.rowAction,onClick:()=>a(!t),children:(0,k.jsx)(Vs.W,{size:"small"})}),(0,k.jsx)(Bs.M,{isOpen:t,className:qs,onRequestClose:()=>a(!1),shouldCloseOnEsc:!0,shouldCloseOnBackdropClick:!0,animated:!0,children:n})]})]})},Qs=()=>{const e=(0,zs.x)(),[t,a]=(0,s.useState)(0),[n,r]=(0,s.useState)(!0);Js(Hs.K.MESSAGE,(()=>{a(t+1)}));const i=n?e.getMessages().filter(Gs):e.getMessages();return(0,k.jsx)(V,{title:"Messages",titleExtra:(0,k.jsxs)("div",{className:$s,children:[(0,k.jsx)(Fs.c,{id:"json-only",size:"small",checked:n,onChange:()=>r(!n)}),(0,k.jsx)(v.E,{as:"label",htmlFor:"json-only",variant:"marginal",children:"JSON only"})]}),rows:i,cols:[{name:"Time",width:"200px"},{name:"Ident"},{name:"Payload",width:"16px"}],renderRow:(e,t)=>(0,k.jsx)(Ks,{message:e},`${t}-${e.ident}-${e.timestamp}`),canCollapse:!0})},Xs=()=>{const e=(()=>{const e=(0,zs.x)(),[t,a]=(0,s.useState)(null);(0,s.useEffect)((()=>{e.getConnectionId().then((e=>a(e)))}),[e,a]);const n=(0,s.useCallback)((e=>a(e.data.connectionId)),[a]);return Js(Hs.K.CONNECTION,n),t})();return(0,k.jsxs)("div",{className:Ws,children:[(0,k.jsx)(V,{title:"PubSub",rows:(0,k.jsx)(Zs,{name:"Connection ID",value:e??"-"}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),(0,k.jsx)(Ys,{}),(0,k.jsx)(Qs,{})]})};var en=a(40638),tn=a(29482),an=a(92336),sn=a(87621),nn=a(28506),rn=a(39795),ln=a(50486),on=a(21762),cn=a(8284),dn=a(62478);const un=36e5;var mn=a(82162),pn=a(40184),hn=a(70896),xn=a(37842),gn=a(46845);const vn="CPh1NBIPIZdD7S5EeAJw",fn="ImIlB71ObQKbFW5YUTmT",jn="TzXFebu8XWPbINPiP4rs",yn="MigGXxVYX9Yi6_lGrDwe",bn="oyMDrjEp_otdJzIKn5YC",Nn=({property:e,value:t,onOverride:a,isOverridden:s})=>{if("int"===e.type||"internal"===e.type)throw Error("Invalid property type for dropdown!");const n="bool"===e.type?["true","false"]:e.values;return(0,k.jsx)(f.F,{id:`${e.name}-dropdown`,value:(t??e.default).toString(),onChange:t=>{var s;a(e.name,(s=t.currentTarget.value,"bool"===e.type?"true"===s:s))},className:r()({[yn]:s}),children:n.map((e=>(0,k.jsx)("option",{value:e,children:e},e)))})},wn=({property:e,value:t,onOverride:a,isOverridden:n})=>{if("int"!==e.type)throw Error("Invalid property type for dropdown!");const[i,l]=(0,s.useState)(t??e.default),o=(0,en.YQ)((t=>{a(e.name,t)}),500);return(0,k.jsx)(x.Z,{type:"number",min:e.lower,max:e.upper,value:i,onChange:e=>{l(e.currentTarget.value),o(Number.parseInt(e.currentTarget.value,10))},className:r()({[yn]:n})})},Cn=({property:e,localValue:t,remoteValue:a,experimentUrl:s,isRemoteUserSpecificOverride:n,onOverride:r,filter:i})=>{const l=t!==a,o=(0,gn.Ek)(),c=e.default.toString(),d=a?.toString();let u=(s||c!==d?d:null)??null;return u&&s&&(u=(0,k.jsxs)("a",{href:s,target:"_blank",className:bn,children:[d,n&&(0,k.jsx)(tn.o,{size:"small"})]}),n&&(u=(0,k.jsx)(La.Zp,{label:"This value comes from a user-specific override in the linked experiment.",children:u}))),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsxs)(_.n,{className:M.rowName,title:e.name,highlight:!0,children:[(0,k.jsx)("a",{href:`https://backstage.spotify.net/experimentation/propertiesList?propertyName=${e.name}&scope=${o?"desktop-ui":"web-player"}`,rel:"noopener noreferrer",target:"_blank",children:i?(0,k.jsx)(nn.M,{searchWords:[i??""],textToHighlight:e.name}):e.name}),(0,k.jsx)("div",{className:M.propertyDescription,children:e.description})]}),(0,k.jsx)(_.n,{className:M.rowValue,children:c}),(0,k.jsx)(_.n,{className:M.rowValue,children:u}),(0,k.jsx)(_.n,{className:M.rowValue,children:"bool"===e.type||"enum"===e.type?(0,k.jsx)(Nn,{property:e,value:t,onOverride:r,isOverridden:l}):"int"===e.type?(0,k.jsx)(wn,{property:e,value:t,onOverride:r,isOverridden:l}):null})]})},Sn="debugPanelRemoteConfigLastChangedAtByPropertyName",An=({properties:e,localConfiguration:t,remoteConfiguration:a,setOverrides:n,clearOverrides:r})=>{const{filter:i}=(0,s.useContext)(rn.g),l=(0,xn.q)(),o=()=>{const e=l.getItem(Sn);return e instanceof pn.m||e instanceof hn.Y?{}:e},c=(e,t)=>{n(an.Vk.fromJSON({[e]:t})),l.setItem(Sn,{...o(),[e]:Date.now()})},d=(0,s.useRef)(o()),u=e.sort(((e,t)=>(d.current[t.name]??0)-(d.current[e.name]??0)||e.name.localeCompare(t.name))),m=function(){const e=(0,cn.d)(),t=(0,Ls.k)(),a=(0,on.C)()?.username,n=(0,s.useMemo)((()=>an.mA.getPropertySetId({clientId:e.remote_config_client_id},(0,an.v6)(),[])),[e.remote_config_client_id]),r=(0,s.useMemo)((()=>{if(!e||!t.data||!a)return null;const s="web-player"===e.remote_config_client_id||"1"===t.data.employee;return{data:{platform:"WEB",clientId:e.remote_config_client_id,country:t.data.country,propertySetKey:n,clientVersion:e.event_sender_context_information?.client_version_string??"",installationId:e.event_sender_context_information?.installation_id??"",oauthClientId:e.event_sender_context_information?.client_id??"",employee:s,catalogue:t.data.catalogue,originPlatform:e.app_platform,originVersion:e.os_version??"",userName:a}}}),[a,e,t.data,n]),{data:i}=(0,ln.I)({queryKey:["traceback-config"],queryFn:()=>(0,dn.V)().request("https://remote-configuration-resolver.spotify.net/debug/traceback-config",{method:"POST",responseType:"json",headers:{"content-type":"application/json"},payload:JSON.stringify(r)}).then((e=>{const t=e.body;return Object.fromEntries(t.data.map((e=>[e.name,e])))})),staleTime:5e3,gcTime:un,refetchInterval:un,refetchOnWindowFocus:!1,enabled:!!r});return i??{}}();return(0,k.jsxs)("div",{className:fn,children:[(0,k.jsxs)("div",{className:jn,children:[(0,k.jsx)(me.n,{size:"small",onClick:()=>{r(),l.clearItem(Sn)},children:"Clear local overrides"}),(0,k.jsx)(sn.S,{placeholder:"Find",alwaysExpanded:!0})]}),(0,k.jsx)(P.K,{children:(0,k.jsxs)(U.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{})]}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)(I.H,{children:[(0,k.jsx)(L.M,{className:M.rowHeader,children:"Name"}),(0,k.jsx)(L.M,{className:M.rowHeader,children:"Default"}),(0,k.jsx)(L.M,{className:M.rowHeader,children:"Remote"}),(0,k.jsx)(L.M,{className:M.rowHeader,children:"Local"})]}),u.filter((e=>-1!==e.name.toLowerCase().indexOf(i.toLowerCase()))).map((e=>(0,k.jsx)(Cn,{property:e,localValue:t.getValue(e.name),remoteValue:a.getValue(e.name),experimentUrl:m?.[e.name]?.experimentRef?.experimentUrl,isRemoteUserSpecificOverride:m?.[e.name]?.isOverride??!1,onOverride:c,filter:i},e.name)))]})]})})]})},kn=()=>{const e=[...(0,an.v6)()],{localConfiguration:t,remoteConfiguration:a,setOverrides:s,clearOverrides:n}=(0,mn.g)();return(0,k.jsx)("div",{className:vn,children:(0,k.jsx)(rn.s,{uri:"spotify:internal:debug:remote-config-properties",children:(0,k.jsx)(An,{properties:e,localConfiguration:t,remoteConfiguration:a,setOverrides:s,clearOverrides:n})})})},En="wTIZy4hwIIwMdmqm93rW",In="g2bLOY5W1sbuXtffHyDY",_n=()=>{const e=(0,Os.zy)(),t=(0,Os.Zp)(),a=e=>{t(e,{state:{preventMoveFocus:!0}})},s=(0,Ae.o_h)(e.pathname);return(0,k.jsxs)("div",{className:En,children:[(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target).get("navigateTo").toString(),s=new URL(t,"https://open.spotify.com");s.hostname&&s.pathname?a(s.pathname+s.search+s.hash):a(t)},className:In,children:[(0,k.jsx)("label",{htmlFor:"navigate-input",children:"Navigate to"}),(0,k.jsx)(v.E,{variant:"bodySmall",as:"input",style:{color:ls.Ql9},name:"navigateTo",id:"navigate-input",type:"text",placeholder:"ex. /search/nirvana",onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation()}})]}),(0,k.jsx)("h2",{children:"Current location:"}),(0,k.jsxs)("ul",{children:[(0,k.jsxs)("li",{children:["Location: ",e.pathname]}),e.search&&(0,k.jsxs)("li",{children:["Search params: ?",e.search]}),e.hash&&(0,k.jsxs)("li",{children:["Hash params: #",e.hash]}),s?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("li",{children:["URL: ",s.toURL()]}),(0,k.jsxs)("li",{children:["URI: ",s.toURI()]})]}):(0,k.jsx)("li",{children:"Not parseable as a Spotify URI!"}),(0,k.jsxs)("li",{children:["Location state: ",(0,k.jsx)("pre",{children:JSON.stringify(e.state,null,2)})]})]})]})};var Rn=a(4564),On=a(38501);const Pn=()=>{const{localConfiguration:e,setOverrides:t}=(0,mn.g)();return(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"React-Query Cache Persistence"}),(0,k.jsx)(_.n,{className:M.rowValue,align:"right",children:(0,k.jsx)(_a.X,{checked:e.getValue(On.QMQ),onChange:e=>{t(an.Vk.fromJSON({enableReactQueryPersistence:Boolean(e.target.checked)}))},children:"Enabled"})}),(0,k.jsx)(_.n,{className:M.rowValue,align:"right",children:(0,k.jsx)(g.$,{size:"small",onClick:()=>{(0,Rn.k)()},children:"Clear cache"})})]})},Tn=()=>(0,k.jsx)("div",{className:J,children:(0,k.jsx)(V,{title:"Development options",rows:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(Pn,{})}),cols:[],canCollapse:!0})});var Dn=a(25155),Un=a(87022),Ln=a(5153),Mn=a(34462),Vn=a(62411),Fn=a(40935),Bn=a(98293),Hn=a(48570),zn=a(47756),Jn=a(69693),Wn=function(e){return e.IPL="IN_PERSON",e.RGS="REMOTE",e}(Wn||{});var $n=a(54126);function qn({obj:e}){return(0,k.jsx)(U.X,{children:(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Zn,{name:e[0],value:e[1]},e[0])))})})}function Zn({name:e,value:t}){const a=B();let s;return"string"==typeof t||"number"==typeof t?s=t:"boolean"==typeof t?s=(0,k.jsx)(_a.X,{defaultChecked:t,isActive:!1,onClick:e=>{e.preventDefault()}}):"object"==typeof t&&null!==t&&(s=(0,k.jsx)(qn,{obj:t})),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:s}),(0,k.jsx)(_.n,{className:M.rowActions,children:(0,k.jsx)("button",{className:M.rowAction,onClick:()=>{void 0!==t&&a("object"==typeof t?JSON.stringify(t):t.toString())},children:(0,k.jsx)(O._,{size:"small"})})})]})}var Yn=a(10565),Gn=a(52266),Kn=a(90754);var Qn=a(6530),Xn=a(330);const er=({deviceId:e,title:t,tech:a,type:s,token:n,isNew:r})=>{const i=(0,Yn.d)(),{data:l}=(0,ln.I)({queryKey:["scannedDeviceRowJam",n],queryFn:()=>i.getSessionInfo(n),refetchInterval:3e4}),{data:o}=(0,ln.I)({queryKey:["scannedDeviceVisibility",l?.sessionId],queryFn:l?.sessionId?()=>i.getLocalNetSesssionDeviceVisibility(l.sessionId):ze.hT,refetchInterval:3e4});return(0,k.jsx)(V,{title:t,rows:[{name:"Device ID",value:e},{name:"Tech",value:Xn.x[a]},{name:"Type",value:Xn.Z[s]},{name:"Token",value:n},{name:"Is new",value:r.toString()},...l?[{name:"Jam session id",value:l.sessionId},{name:"Jam session owner is self",value:l.isSessionOwner.toString()},{name:"Jam session owner",value:l.sessionMembers.find((e=>e.id===l.sessionOwnerId))?.displayName},{name:"Local device visibility",value:o?Qn.MS[o]:null}]:[]],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:({name:e,value:t})=>(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:e}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:t})]}),canCollapse:!0,isCollapsedInitially:!0},e)},tr=()=>{const e=(()=>{const e=(0,Yn.d)(),[t,a]=(0,s.useState)(e.getLocalNetSessionDevices());return(0,Kn.c)(Gn.P.SCAN_UPDATE,(()=>{a(e.getLocalNetSessionDevices())})),t})();return e?.devices.map((e=>(0,k.jsx)(er,{...e},e.deviceId)))};var ar=a(99348),sr=a(75950),nr=a(61612);const rr=[{title:"Debugging Info",Component:()=>{const e=(0,nr.M)(),t=(0,sr.C)(),a=(0,ar.y)(),{currentSession:s}=(0,Jn.D)(),[n]=(0,Fa.x)("dismissStartJamButtonFromQueue",!1),[r]=(0,Fa.x)("dismissStartJamButtonFromFriendFeed",!1);return(0,k.jsx)(P.K,{children:(0,k.jsxs)(U.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{width:"16px"})]}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"useIsSocialConnectAPIEnabled"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:e})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"useJamExperience()"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:t})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"Is current Jam active?"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:s?.active.toString()??"null"})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"useCanCreateJam()"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:a.toString()})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"Jam banner dismissed from queue"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:n.toString()})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"Jam banner dismissed from friend feed"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:r.toString()})]}),(0,k.jsxs)(I.H,{hover:!0,children:[(0,k.jsx)(_.n,{className:M.rowName,highlight:!0,children:"Scanned devices"}),(0,k.jsx)(_.n,{className:M.rowValue,truncate:!0,align:"right",children:(0,k.jsx)(U.X,{children:(0,k.jsx)("tbody",{children:(0,k.jsx)(tr,{})})})})]})]})]})})}},{title:"Current Session",Component:()=>{const{currentSession:e,refreshCurrentSession:t}=(0,Jn.D)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(_e.H,{iconOnly:$n.H,onClick:()=>{t()}}),(0,k.jsx)(P.K,{children:e&&(0,k.jsxs)(U.X,{children:[(0,k.jsxs)("colgroup",{children:[(0,k.jsx)("col",{width:"30%"}),(0,k.jsx)("col",{}),(0,k.jsx)("col",{width:"16px"})]}),(0,k.jsx)("tbody",{children:Object.entries(e).map((e=>(0,k.jsx)(Zn,{name:e[0],value:e[1]},e[0])))})]})})]})}},{title:"Create New Session",Component:()=>{const{createSession:e}=(0,Jn.D)(),[t,a]=(0,s.useState)(null),[n,r]=(0,s.useState)(Wn.IPL),i=(0,Vn.wA)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{children:"Create a new session as your current user (does nothing if you already have a session)"}),(0,k.jsxs)("div",{className:M.rowControl,children:[(0,k.jsxs)(Hn.C,{id:"sessionTypeDropdown",value:n,onSelect:e=>{switch(e){case Wn.IPL:r(Wn.IPL);break;case Wn.RGS:r(Wn.RGS);break;default:r(Wn.IPL)}},children:[(0,k.jsx)("option",{value:Wn.IPL,children:Wn.IPL},Wn.IPL),(0,k.jsx)("option",{value:Wn.RGS,children:Wn.RGS},Wn.RGS)]}),(0,k.jsx)(g.$,{onClick:async t=>{t.preventDefault();const s=await e();a(s)},children:"Create"})]}),(0,k.jsx)(me.n,{onClick:()=>{i((0,Bn.A9)(zn.EL.INVITE))},style:{marginTop:Fn.WG},children:"Open invitation modal"}),null!==t&&(0,k.jsx)(Ea.h,{value:JSON.stringify(t,null,2),readOnly:!0})]})}},{title:"Leave Current Session",Component:()=>{const{leaveSession:e,currentSession:t}=(0,Jn.D)(),[a,n]=(0,s.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:M.rowName,children:"Leave your current session"}),(0,k.jsxs)("div",{className:M.rowControl,children:[(0,k.jsx)(x.Z,{value:t?.sessionId??"",readOnly:!0}),(0,k.jsx)(g.$,{onClick:async a=>{if(a.preventDefault(),!t)return;const s=await e();n(s)},children:"Leave"})]}),null!==a&&(0,k.jsx)(Ea.h,{value:JSON.stringify(a,null,2),readOnly:!0})]})}},{title:"Delete Current Session",Component:()=>{const{currentSession:e,deleteSession:t}=(0,Jn.D)(),[a,n]=(0,s.useState)(null);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:M.rowName,children:"Delete your current session"}),(0,k.jsxs)("div",{className:M.rowControl,children:[(0,k.jsx)(x.Z,{value:e?.sessionId??"",readOnly:!0}),(0,k.jsx)(g.$,{onClick:async a=>{if(a.preventDefault(),!e)return;const s=await t();n(s)},children:"Delete"})]}),null!==a&&(0,k.jsx)(Ea.h,{value:JSON.stringify(a,null,2),readOnly:!0})]})}},{title:"Join Session as Guest",Component:()=>{const[e,t]=(0,s.useState)(""),a=(0,Vn.wA)(),n=(0,Os.Zp)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:M.rowName,children:"Join somebody else's session (paste join token or join URI)"}),(0,k.jsxs)("div",{className:M.rowControl,children:[(0,k.jsx)(x.Z,{value:e,onChange:e=>t(e.currentTarget.value)}),(0,k.jsx)(g.$,{onClick:async t=>{t.preventDefault();const s=(0,Ae.o_h)(e);s&&(0,Ae.crr)(s)?n(s.toURLPath(!0)):a((0,Bn.A9)(zn.EL.JOIN,e))},children:"Join"})]})]})}}],ir=()=>{const[e,t]=(0,s.useState)(-1);return(0,k.jsxs)("div",{className:En,children:[(0,k.jsx)("h1",{children:"Social Connect!"}),(0,k.jsx)(Dn.n,{children:rr.map(((a,s)=>(0,k.jsxs)(Un.A,{children:[(0,k.jsx)(Ln.J,{className:M.rowHeader,onClick:a=>{a.preventDefault(),t(s===e?-1:s)},isExpanded:s===e,children:a.title}),(0,k.jsx)(Mn.u,{isExpanded:s===e,children:a.Component&&(0,k.jsx)(a.Component,{})})]},`${s}-item`)))})]})};var lr=a(37350);const or=({event:e})=>{const t=e.location.pathNodes.at(0)?.name;if(!t)return null;const a=e.location.pathNodes.slice(1).map((e=>e.name)).join(Je.Ru.getSeparator());return(0,k.jsx)(ke.v,{id:Date.now().toString(),variant:"bordered",title:t,subtitle:a})};var cr=a(35484),dr=a(35072),ur=a(33329);const mr="_skmUsDWCY_10DmlP3pe",pr=()=>{const[e,t]=(0,s.useState)([]);return((e,t)=>{const a=(0,ur.s)(),n=(0,dr.J)(t);(0,s.useEffect)((()=>{const t=a.getEvents();return t.addListener(e,n),()=>{t.removeListener(e,n)}}),[e,a,n])})(cr.B.INTERACTION,(e=>{t((t=>[...t,e.data.event]))})),(0,k.jsxs)("div",{className:mr,children:[(0,k.jsx)(v.E,{variant:"titleMedium",children:"UBI Events"}),0===e.length?(0,k.jsx)(v.E,{variant:"bodySmall",children:"Interact with the app to start seeing events here!"}):(0,k.jsx)(lr.B,{children:e.map(((e,t)=>(0,k.jsx)(or,{event:e},`event-${t}`)))})]})};function hr(e){const[t,a]=(0,s.useState)("");return(0,s.useEffect)((()=>{sessionStorage.setItem(e,t)}),[e,t]),{value:t,setValue:a,clearStoredKeyValue:()=>{sessionStorage.removeItem(e)},clearSessionStorage:()=>{sessionStorage.clear()}}}const xr="rqY5xQzTYB0T5O0XyDdn",gr="jDgWpAIXmxJKgp8GtVWk",vr=()=>{const{value:e,setValue:t,clearStoredKeyValue:a,clearSessionStorage:s}=hr("eligibility"),{value:n,setValue:r,clearStoredKeyValue:i}=hr("datetime");return(0,k.jsxs)("div",{className:xr,children:[(0,k.jsx)("h1",{children:"Premium Page Debug"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Eligiiblity"}),(0,k.jsxs)("select",{className:gr,value:e,onChange:e=>t(e.target.value),children:[(0,k.jsx)("option",{}),(0,k.jsx)("option",{value:"INTRO_ELIGIBLE",children:"INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"NON_INTRO_ELIGIBLE",children:"NON_INTRO_ELIGIBLE"}),(0,k.jsx)("option",{value:"WINBACK",children:"WINBACK"})]}),(0,k.jsx)(g.$,{className:xr,size:"small",onClick:()=>a("eligibility"),children:"Remove Eligiblity Override"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{children:"Override Date"}),(0,k.jsx)("input",{className:gr,type:"datetime-local",value:n,onChange:e=>r(e.target.value)}),(0,k.jsx)(g.$,{size:"small",onClick:()=>i("datetime"),children:"Remove Date/Time Override"})]}),(0,k.jsx)(g.$,{size:"small",onClick:s,children:"Remove All Overrides"})]})},fr=new We.l("lookupDebug","query","06b6d7798e1149749a96c5399fbacd911f8cca5f6fb4edf4efc1c4d64de881b5",null);var jr=a(31026),yr=a(80337),br=a(81834),Nr=a(27963);const wr="coy21BK2YBTFtmDx4TNO",Cr="qqllJKnB60UvRvOwb8a2";function Sr(e){return Boolean(e)}function Ar(e){return(0,jr.yr)(e)}const kr=()=>{const{request:e}=(0,s.useContext)(br.j),[t,a]=(0,Fa.x)(yr.P,[]),[n,r]=(0,s.useState)(""),i=async()=>{if(!function(e){const t=(0,Ae.o_h)(e);return!(!t||(0,Ae.Z0m)(t)||t?.id===Ae.NQG.COLLECTION||!(!t||(0,Ae._Tv)(t)||(0,Ae.ecE)(t)||(0,Ae.gHQ)(t)||(0,Ae.APS)(t)||(0,Ae.U_m)(t)||(0,Ae.WB1)(t)||(0,Ae.nuB)(t)))}(n))return;const s=await(0,Nr.c)(e,fr,{uris:[n]}),r=s?.data?.lookup.map(Ar).filter(Sr)||[];a(r.concat(t))};return(0,k.jsxs)("div",{className:wr,children:[(0,k.jsx)("h1",{children:"Home"}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{children:"Shortcuts override"}),(0,k.jsxs)(m.g,{label:"Entity URI to add",labelFor:"shortcut_to_add",children:[(0,k.jsx)(x.Z,{id:"shortcut_to_add",type:"text",placeholder:"spotify:episode:123123",value:n,onChange:e=>r(e.currentTarget.value)}),(0,k.jsxs)(Ia.N,{children:["Right now we only allow: Artist, Album, Audiobook, Podcast, Track, User, Playlist, Episode and Chapter.",(0,k.jsx)("br",{})," For more info check the HomeV2ShortcutsShelf logic."]})]}),(0,k.jsx)(g.$,{size:"small",className:Cr,disabled:0===n.length,onClick:()=>{i()},children:"Add to Shortcuts"}),(0,k.jsx)(g.$,{size:"small",className:Cr,onClick:()=>{a([])},children:"Clear all overrides"})]})]})};var Er=a(27042);const Ir="WAiWdE4pBSCiS9bz5mI7",_r="WU9QRIfJrSPefs8V7QI0",Rr="pb99Xy2ZbO0AVWK2BIvI",Or="G_PJW1iqB1P56Y5QBCja",Pr=[{label:"Production",value:"prod"},{label:"Development",value:"dev"}],Tr=()=>{const e=(0,Vn.wA)(),t=(0,Vn.d4)((e=>e.inAppMessaging.env)),a=(0,Vn.d4)((e=>e.inAppMessaging.message)),[n,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a&&o&&c(!1)}),[a,o]);const d=!a&&o;return(0,k.jsx)("div",{className:Ir,children:(0,k.jsxs)("div",{className:_r,children:[(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingEnv",children:"Mode (endpoint):"})}),(0,k.jsx)(Hn.C,{dir:"auto",value:t,id:"desktop.settings.inAppMessagingEnv",onSelect:function(t){"prod"!==t&&"dev"!==t||e((0,Er.$h)(t))},children:Pr.map((({label:e,value:t})=>(0,k.jsx)("option",{value:t,children:e},t)))}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingCreativeId",children:"Creative Id:"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:Rr,placeholder:"(eg. 12123434)",id:"desktop.settings.inAppMessagingCreativeId",name:"Creative Id",type:"text",value:n,onChange:function(e){r(e.target.value),c(!1)}})}),(0,k.jsx)("div",{children:(0,k.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingAppUri",children:"URI for Dynamic Content (optional):"})}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:Rr,placeholder:"(eg. spotify:artist:123)",id:"desktop.settings.inAppMessagingAppUri",name:"App Uri",type:"text",value:i,onChange:function(e){l(e.target.value),c(!1)}})}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{}),(0,k.jsx)("div",{children:(0,k.jsx)(g.$,{colorSet:"invertedLight",onClick:function(t){t.preventDefault(),e((0,Er.yR)(n,i)),c(!1),window.setTimeout((()=>{c(!0)}),1e3)},children:"Get Preview"})}),d&&(0,k.jsx)("div",{className:Or,children:"No Messsage found"})]})})};var Dr=a(19616),Ur=a(8268);const Lr="CWbF6pzynkRv3fi29lB1",Mr="HJW0XXBdaYKM50QJ957Z",Vr="ELSpUVm2MXGkQ_0rlJaj",Fr="BEbSBX8wHpFESTzhAAUs",Br="debugWindowActiveTabGroup",Hr="debugWindowActiveTabIndex",zr=()=>{const e=(0,xs.p)().getCapabilities().canGetFiles,t=(0,nr.M)(),a=(0,F.ZY)(),n=(0,s.useRef)(null);(0,s.useEffect)((()=>{a&&(a.title="Spotify Debug Window")}),[a]);const d=(0,s.useMemo)((()=>Object.fromEntries(Object.entries({Authorization:[{label:"Access Token",Panel:ie},{label:"Product State",Panel:Ms}],Playback:[{label:"Player",Panel:Rs},e?{label:"Playback",Panel:Is}:null,{label:"Connect",Panel:ue},t?{label:"Social Connect",Panel:ir}:null].filter(Ze.P),"Data Fetching":[{label:"Esperanto",Panel:Na},{label:"PubSub",Panel:Xs},null,{label:"Metadata Extensions",Panel:rs}].filter(Ze.P),UI:[{label:"Routing",Panel:_n},{label:"UBI",Panel:pr},null].filter(Ze.P),Content:[{label:"Audiobooks",Panel:se},{label:"Playlist",Panel:Us}],Other:[null,{label:"Settings",Panel:Tn},{label:"Remote Config",Panel:kn},{label:"Ads",Panel:E},{label:"In-App Messaging",Panel:Tr},{label:"Your DJ",Panel:Ur.fW},{label:"Home",Panel:kr},{label:"Premium Page",Panel:vr},{label:"Font Width Estimation",Panel:Aa}].filter(Ze.P)}).filter((([e,t])=>t.length>0)))),[e,t]),u=Object.keys(d),m=(0,xn.q)(),p=m.getItem(Br),h="string"==typeof p&&p in d?p:u[0],[x,g]=(0,s.useState)(h),v=m.getItem(Hr),f="number"==typeof v&&v in d[x]?v:0,[j,y]=(0,s.useState)(f),b=d[x][j].className,N=d[x][j].Panel;return(0,k.jsx)(Dr.SnackbarProvider,{domRootRef:n,children:(0,k.jsx)("div",{className:r()("encore-dark-theme","encore-layout-themes"),children:(0,k.jsxs)("div",{className:Lr,children:[(0,k.jsx)(i.V,{className:Mr,children:(0,k.jsx)(l.r,{flexMobile:!0,children:u.map((e=>(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(o.D,{children:e}),d[e].map(((t,a)=>(0,k.jsx)(c.a,{active:x===e&&j===a,label:t.label,onClick:()=>{g(e),m.setItem(Br,e),y(a),m.setItem(Hr,a)},className:Vr,children:t.label},t.label)))]},e)))})}),(0,k.jsx)("div",{className:r()(Fr,b),ref:n,children:(0,k.jsx)(N,{})})]})})})}},31026:(e,t,a)=>{a.d(t,{Dx:()=>v,Uk:()=>m,b1:()=>h,f0:()=>u,o8:()=>d,wA:()=>g,yr:()=>x});var s=a(22726),n=a(60393),r=a(34613),i=a(16157),l=a(85907),o=a(63096);function c(e){return{url:e.url,width:e.width,height:e.height}}function d(e){if("Episode"===e.__typename){const t=e.podcastV2.data;return"Podcast"!==t.__typename?[]:t.coverArt?.sources.map(c)??[]}return[]}function u(e){switch(e.__typename){case"Artist":return e.visuals.avatarImage?.sources.map(c)??[];case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return e.coverArt?.sources.map(c)??[];case"Track":return e.albumOfTrack?.coverArt?.sources.map(c)??[];case"Playlist":return e.images.items[0]?.sources.map(c)??[];case"User":return e.avatar?.sources.map(c)??[];case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return[];default:return(0,l.k)(e),[]}}function m(e){switch(e.__typename){case"Artist":return(0,r.m)(e.visuals.avatarImage?.extractedColors);case"Album":case"Audiobook":case"Podcast":case"Episode":case"Chapter":return(0,r.m)(e.coverArt?.extractedColors);case"Track":return(0,r.m)(e.albumOfTrack?.coverArt?.extractedColors);case"Playlist":return(0,r.m)(e.images.items[0]?.extractedColors);case"User":return(0,r.m)(e.avatar?.extractedColors);case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return;default:return void(0,l.k)(e)}}function p(e){return{uri:e??"",name:"",images:[],error:!0}}function h(e){const t=function(e){if("UnknownType"===e.content.__typename){const t=(0,s.o_h)(e.uri);if((0,s.Z0m)(e.uri)||t?.id===s.NQG.COLLECTION)return e.uri.endsWith("your-episodes")?(0,n.n5)(t?.username):e.uri.endsWith("local-files")?(0,n.Iu)():(0,n.$R)(t?.username)}return null}(e);return null!==t?t:function(e){if(null===e||"UnknownType"===e.content.__typename||"PromotionResponseWrapper"===e.content.__typename||"ConcertV2ResponseWrapper"===e.content.__typename)return p(e?.uri??null);const t=e.content.data;if(!t)return p(e?.uri??null);switch(t.__typename){case"Artist":return{uri:e.uri,name:t.profile.name??"",images:u(t)};case"Album":case"Audiobook":case"Podcast":case"Track":case"User":return{uri:e.uri,name:t.name??"",images:u(t)};case"Playlist":return{uri:e.uri,name:t.name??"",images:u(t),formatListAttributes:t.attributes??[]};case"Episode":return{uri:e.uri,name:t.name??"",images:u(t),release_date:t.releaseDate?.isoString,resume_point:{resume_position_ms:t.playedState.playPositionMilliseconds,fully_played:t.playedState.state===i._w.Completed},podcast:"Podcast"===t.podcastV2.data.__typename?{uri:t.podcastV2.data.uri,name:t.podcastV2.data.name,images:u(t.podcastV2.data)}:void 0,duration_ms:t.duration.totalMilliseconds};case"Chapter":return"Audiobook"===t.audiobookV2.data.__typename?{uri:t.audiobookV2.data.uri,name:t.audiobookV2.data.name??"",images:u(t.audiobookV2.data)}:{uri:e.uri,name:t.name??"",images:u(t)};case"GenericError":case"NotFound":case"RestrictedContent":case"DiscoveryFeed":return p(e.uri);default:return(0,l.k)(t),p(e?.uri??null)}}(e)}function x(e){return function(e){if(!e||"UnknownTypeWrapper"===e.__typename)return p(e?._uri??null);if("GenreResponseWrapper"===e.__typename||"ConcertResponseWrapper"===e.__typename||"MerchResponseWrapper"===e.__typename||"PreReleaseResponseWrapper"===e.__typename)return p(null);const t=e?.data;switch(t.__typename){case"Artist":return{uri:t.uri,name:t.profile.name??"",images:u(t)};case"Album":case"Audiobook":case"Podcast":case"Track":case"User":return{uri:t.uri,name:t.name??"",images:u(t)};case"Playlist":return{uri:t.uri,name:t.name??"",images:u(t),formatListAttributes:t.attributes??[]};case"Episode":return{uri:t.uri,name:t.name??"",images:u(t),release_date:t.releaseDate?.isoString,resume_point:{resume_position_ms:t.playedState.playPositionMilliseconds,fully_played:t.playedState.state===i._w.Completed},podcast:"Podcast"===t.podcastV2.data.__typename?{uri:t.podcastV2.data.uri,name:t.podcastV2.data.name,images:u(t.podcastV2.data)}:void 0,duration_ms:t.duration.totalMilliseconds};case"Chapter":return"Audiobook"===t.audiobookV2.data.__typename?{uri:t.audiobookV2.data.uri,name:t.audiobookV2.data.name??"",images:u(t.audiobookV2.data)}:{uri:t.uri,name:t.name??"",images:u(t)};case"GenericError":case"NotFound":case"RestrictedContent":return p(null);default:return(0,l.k)(t),p(null)}}(e)}const g=(e,t,a)=>{if(e){if("ArtistResponseWrapper"===e.__typename&&"Artist"===e.data.__typename){const s=(0,o.g)(e.data.visuals.avatarImage?.sources,{desiredSize:48})?.url??null,n=e.data.uri,r=t?.translatedBaseText?.includes("{0}")?t.translatedBaseText.split("{0}")[0]:a?.transformedLabel??null;return{titleUri:n,titleMedia:s,titleMediaCircle:!0,title:r&&t?.transformedLabel?.includes(r)?t?.transformedLabel?.split(r)[1]:t?.transformedLabel??"",pretitle:r}}if(!("PodcastOrAudiobookResponseWrapper"!==e.__typename&&"EpisodeOrChapterResponseWrapper"!==e.__typename||"Podcast"!==e.data.__typename&&"Audiobook"!==e.data.__typename&&"Episode"!==e.data.__typename&&"Chapter"!==e.data.__typename)){const s=(0,o.g)(e.data.coverArt?.sources,{desiredSize:48})?.url??null,n=e.data.uri,r=t?.translatedBaseText?.includes("{0}")?t.translatedBaseText.split("{0}")[0]:a?.transformedLabel??null;return{titleUri:n,titleMedia:s,titleMediaCircle:!1,title:r&&t?.transformedLabel?.includes(r)?t?.transformedLabel?.split(r)[1]:t?.transformedLabel??"",pretitle:r}}}return{title:t?.transformedLabel??""}},v=e=>{if("Audiobook"!==e.__typename)return null;if("ConsumptionCappedAccessExplanation"===e.accessInfo?.accessExplanation?.__typename){return{title:e.accessInfo.accessExplanation.title??"",body:e.accessInfo.accessExplanation.body??"",cta:e.accessInfo.accessExplanation.actionText??"",ctaUrl:e.accessInfo.accessExplanation.ctaUrl??void 0,dismiss:e.accessInfo.accessExplanation.dismiss??void 0}}return null}},99348:(e,t,a)=>{a.d(t,{y:()=>s.y});var s=a(37921)},88423:(e,t,a)=>{a.d(t,{u:()=>m});var s=a(62411),n=a(14343),r=a(22726),i=a(31417),l=a(38501),o=a(36061),c=a(93004),d=a(98292),u=a(83785);function m(){const e=(0,d.v)({offset:0,limit:1}),{user:t}=(0,s.d4)(o.Ht),a=(0,n.NC)(l.ucV,{loadingValue:!1});if(null===e||!t?.id)return null;return{uri:a?c.H3:(0,r.fHB)(t.id,"your-episodes").toURI(),name:i.Ru.get("sidebar.your_episodes"),images:[],totalLength:e?.totalLength,owner:(0,u.w)(t)}}},21762:(e,t,a)=>{a.d(t,{C:()=>r});var s=a(62411),n=a(7307);const r=()=>{const e=(0,s.d4)((e=>e.session?.user));return e?{type:n.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:t,height:a})=>({url:e,width:t||void 0,height:a||void 0})))}:null}},8284:(e,t,a)=>{a.d(t,{d:()=>r});var s=a(30758),n=a(29064);const r=()=>(0,s.useContext)(n.D)},98292:(e,t,a)=>{a.d(t,{d:()=>u,v:()=>m});var s=a(30758),n=a(26184),r=a(20784),i=a(99248),l=a(88308),o=a(9138);const c=n.UV.UPDATE;function d(e,t){const a=(0,r.f)(),[n,l]=(0,s.useState)(null),d=(0,s.useCallback)((async s=>{e===s.data.list&&l(await t(a))}),[a,e,t]);return(0,s.useEffect)((()=>{d(new o.Vk(c,{list:e}))}),[d,e]),(0,i.l)(c,d),n}function u(e){return d(n.Ir.TRACKS,(0,l.U0)((t=>t.getTracks(e)),[e]))}function m(e){return d(n.Ir.EPISODES,(0,l.U0)((t=>t.getEpisodes(e)),[e]))}},38694:(e,t,a)=>{a.d(t,{F:()=>r});var s=a(30758),n=a(3326);function r(e,t){const a=(0,s.useRef)(t),r=(0,n.p)();a.current=t,(0,s.useEffect)((()=>r.getEvents().addListener(e,(e=>{a.current(e)}))),[e,r])}},54866:(e,t,a)=>{a.d(t,{x:()=>r});var s=a(53249),n=a(30157);function r(){return(0,n.N)(s.b)}},90754:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(30758),n=a(66530),r=a(10565),i=a(35072);function l(e,t){const a=(0,r.d)(),l=(0,i.J)(t),o=(0,n.a)();(0,s.useEffect)((()=>a.getBroadcastingEvents().addListener(e,(e=>{o()&&l(e)}))),[a,l,e,o])}},61979:(e,t,a)=>{a.d(t,{h:()=>s});a(1903),a(40098);function s(e){return"object"!=typeof e||null===e?e:window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e))}}}]);
//# sourceMappingURL=xpui-debug-window-contents.js.map